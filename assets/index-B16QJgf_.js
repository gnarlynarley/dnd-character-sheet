(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const Ji=!1;var mi=Array.isArray,Fs=Array.prototype.indexOf,_i=Array.from,Ao=Object.defineProperty,$n=Object.getOwnPropertyDescriptor,Do=Object.getOwnPropertyDescriptors,Bs=Object.prototype,Ms=Array.prototype,ga=Object.getPrototypeOf,Ma=Object.isExtensible;function Zn(e){return typeof e=="function"}const Re=()=>{};function qs(e){return e()}function fi(e){for(var t=0;t<e.length;t++)e[t]()}function Ro(){var e,t,n=new Promise((r,i)=>{e=r,t=i});return{promise:n,resolve:e,reject:t}}const rt=2,Dr=4,nr=8,ea=1<<24,rn=16,yn=32,Un=64,yi=128,Bt=512,ct=1024,yt=2048,an=4096,Ct=8192,Zt=16384,lr=32768,pn=65536,ta=1<<17,ma=1<<18,sr=1<<19,No=1<<20,cn=1<<25,qn=32768,na=1<<21,_a=1<<22,In=1<<23,Pn=Symbol("$state"),Oo=Symbol("legacy props"),js=Symbol(""),Ln=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},bi=3,Vn=8;function wi(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Hs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Us(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Vs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ys(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ws(){throw new Error("https://svelte.dev/e/effect_pending_outside_reaction")}function Gs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Qs(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Xs(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ks(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Zs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Js(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function eu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const tu=1,nu=2,Lo=4,ru=8,iu=16,au=1,ou=2,lu=4,su=8,uu=16,cu=1,fu=2,du=4,vu=1,hu=2,pu="[",xi="[!",ya="]",zr={},ot=Symbol(),gu="http://www.w3.org/1999/xhtml";function Fr(e){console.warn("https://svelte.dev/e/hydration_mismatch")}function mu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let de=!1;function dn(e){de=e}let Se;function et(e){if(e===null)throw Fr(),zr;return Se=e}function An(){return et(jt(Se))}function N(e){if(de){if(jt(Se)!==null)throw Fr(),zr;Se=e}}function xe(e=1){if(de){for(var t=e,n=Se;t--;)n=jt(n);Se=n}}function Rr(e=!0){for(var t=0,n=Se;;){if(n.nodeType===Vn){var r=n.data;if(r===ya){if(t===0)return n;t-=1}else(r===pu||r===xi)&&(t+=1)}var i=jt(n);e&&n.remove(),n=i}}function zo(e){if(!e||e.nodeType!==Vn)throw Fr(),zr;return e.data}function Fo(e){return e===this.v}function Bo(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Mo(e){return!Bo(e,this.v)}let vn=!1,ur=!1,_u=!1;function yu(){vn=!0}function bu(){ur=!0}let Oe=null;function rr(e){Oe=e}function $e(e,t=!1,n){Oe={p:Oe,i:!1,c:null,e:null,s:e,x:null,l:ur&&!t?{s:null,u:null,$:[]}:null}}function Ie(e){var t=Oe,n=t.e;if(n!==null){t.e=null;for(var r of n)fl(r)}return t.i=!0,Oe=t.p,{}}function Br(){return!ur||Oe!==null&&Oe.l===null}let zn=[];function qo(){var e=zn;zn=[],fi(e)}function bn(e){if(zn.length===0&&!$r){var t=zn;queueMicrotask(()=>{t===zn&&qo()})}zn.push(e)}function wu(){for(;zn.length>0;)qo()}function jo(e){var t=ye;if(t===null)return we.f|=In,e;if((t.f&lr)===0){if((t.f&yi)===0)throw e;t.b.error(e)}else jn(e,t)}function jn(e,t){for(;t!==null;){if((t.f&yi)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const xu=-7169;function tt(e,t){e.f=e.f&xu|t}function ba(e){(e.f&Bt)!==0||e.deps===null?tt(e,ct):tt(e,an)}function Ho(e){if(e!==null)for(const t of e)(t.f&rt)===0||(t.f&qn)===0||(t.f^=qn,Ho(t.deps))}function Uo(e,t,n){(e.f&yt)!==0?t.add(e):(e.f&an)!==0&&n.add(e),Ho(e.deps),tt(e,ct)}const Gn=new Set;let Pe=null,si=null,lt=null,Lt=[],Si=null,ra=!1,$r=!1;class Kt{committed=!1;current=new Map;previous=new Map;#e=new Set;#i=new Set;#t=0;#a=0;#o=null;#r=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#a>0}process(t){Lt=[],si=null,this.apply();var n=[],r=[];for(const i of t)this.#l(i,n,r);this.is_fork||this.#u(),this.is_deferred()?(this.#s(r),this.#s(n)):(si=this,Pe=null,qa(r),qa(n),si=null,this.#o?.resolve()),lt=null}#l(t,n,r){t.f^=ct;for(var i=t.first,a=null;i!==null;){var o=i.f,l=(o&(yn|Un))!==0,s=l&&(o&ct)!==0,u=s||(o&Ct)!==0||this.skipped_effects.has(i);if(vn&&a===null&&(o&yi)!==0&&i.b?.is_pending&&(a=i),!u&&i.fn!==null){l?i.f^=ct:a!==null&&(o&(Dr|nr|ea))!==0?a.b.defer_effect(i):(o&Dr)!==0?n.push(i):vn&&(o&(nr|ea))!==0?r.push(i):dr(i)&&((o&rn)!==0&&this.#r.add(i),ar(i));var d=i.first;if(d!==null){i=d;continue}}var f=i.parent;for(i=i.next;i===null&&f!==null;)f===a&&(a=null),i=f.next,f=f.parent}}#s(t){for(var n=0;n<t.length;n+=1)Uo(t[n],this.#r,this.#n)}capture(t,n){n!==ot&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&In)===0&&(this.current.set(t,t.v),lt?.set(t,t.v))}activate(){Pe=this,this.apply()}deactivate(){Pe===this&&(Pe=null,lt=null)}flush(){if(this.activate(),Lt.length>0){if(ia(),Pe!==null&&Pe!==this)return}else this.#t===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#i)t(this);this.#i.clear()}#u(){if(this.#a===0){for(const t of this.#e)t();this.#e.clear()}this.#t===0&&this.#c()}#c(){if(Gn.size>1){this.previous.clear();var t=lt,n=!0;for(const i of Gn){if(i===this){n=!1;continue}const a=[];for(const[l,s]of this.current){if(i.current.has(l))if(n&&s!==i.current.get(l))i.current.set(l,s);else continue;a.push(l)}if(a.length===0)continue;const o=[...i.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var r=Lt;Lt=[];const l=new Set,s=new Map;for(const u of a)Yo(u,o,l,s);if(Lt.length>0){Pe=i,i.apply();for(const u of Lt)i.#l(u,[],[]);i.deactivate()}Lt=r}}Pe=null,lt=t}this.committed=!0,Gn.delete(this)}increment(t){this.#t+=1,t&&(this.#a+=1)}decrement(t){this.#t-=1,t&&(this.#a-=1),this.revive()}revive(){for(const t of this.#r)this.#n.delete(t),tt(t,yt),gn(t);for(const t of this.#n)tt(t,an),gn(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#i.add(t)}settled(){return(this.#o??=Ro()).promise}static ensure(){if(Pe===null){const t=Pe=new Kt;Gn.add(Pe),$r||Kt.enqueue(()=>{Pe===t&&t.flush()})}return Pe}static enqueue(t){bn(t)}apply(){if(!(!vn||!this.is_fork&&Gn.size===1)){lt=new Map(this.current);for(const t of Gn)if(t!==this)for(const[n,r]of t.previous)lt.has(n)||lt.set(n,r)}}}function Vo(e){var t=$r;$r=!0;try{var n;for(e&&(Pe!==null&&ia(),n=e());;){if(wu(),Lt.length===0&&(Pe?.flush(),Lt.length===0))return Si=null,n;ia()}}finally{$r=t}}function ia(){var e=Bn;ra=!0;var t=null;try{var n=0;for(vi(!0);Lt.length>0;){var r=Kt.ensure();if(n++>1e3){var i,a;Su()}r.process(Lt),Cn.clear()}}finally{ra=!1,vi(e),Si=null}}function Su(){try{Gs()}catch(e){jn(e,Si)}}let Qt=null;function qa(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Zt|Ct))===0&&dr(r)&&(Qt=new Set,ar(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?pl(r):r.fn=null),Qt?.size>0)){Cn.clear();for(const i of Qt){if((i.f&(Zt|Ct))!==0)continue;const a=[i];let o=i.parent;for(;o!==null;)Qt.has(o)&&(Qt.delete(o),a.push(o)),o=o.parent;for(let l=a.length-1;l>=0;l--){const s=a[l];(s.f&(Zt|Ct))===0&&ar(s)}}Qt.clear()}}Qt=null}}function Yo(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const i of e.reactions){const a=i.f;(a&rt)!==0?Yo(i,t,n,r):(a&(_a|rn))!==0&&(a&yt)===0&&Wo(i,t,r)&&(tt(i,yt),gn(i))}}function Wo(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(t.includes(i))return!0;if((i.f&rt)!==0&&Wo(i,t,n))return n.set(i,!0),!0}return n.set(e,!1),!1}function gn(e){for(var t=Si=e;t.parent!==null;){t=t.parent;var n=t.f;if(ra&&t===ye&&(n&rn)!==0&&(n&ma)===0)return;if((n&(Un|yn))!==0){if((n&ct)===0)return;t.f^=ct}}Lt.push(t)}let di=[];function ku(){try{Vo(()=>{for(const e of di)Du(e)})}finally{di=[]}}function Eu(e){var t=Dn(0),n=!0,r=void 0;return x(t),zu(()=>{if(n){var i=lt;try{lt=null,r=e()}finally{lt=i}return}di.length===0&&bn(ku),di.push(t)}),n=!1,r}function $u(e){let t=0,n=Dn(0),r;return()=>{xa()&&(x(n),Yn(()=>(t===0&&(r=V(()=>e(()=>Pr(n)))),t+=1,()=>{bn(()=>{t-=1,t===0&&(r?.(),r=void 0,Pr(n))})})))}}var Iu=pn|sr|yi;function Go(e,t,n){new Pu(e,t,n)}class Pu{parent;is_pending=!1;#e;#i=de?Se:null;#t;#a;#o;#r=null;#n=null;#l=null;#s=null;#u=null;#c=0;#f=0;#v=!1;#h=new Set;#p=new Set;#d=null;#b=$u(()=>(this.#d=Dn(this.#c),()=>{this.#d=null}));constructor(t,n,r){this.#e=t,this.#t=n,this.#a=r,this.parent=ye.b,this.is_pending=!!this.#t.pending,this.#o=fr(()=>{if(ye.b=this,de){const a=this.#i;An(),a.nodeType===Vn&&a.data===xi?this.#x():(this.#w(),this.#f===0&&(this.is_pending=!1))}else{var i=this.#_();try{this.#r=zt(()=>r(i))}catch(a){this.error(a)}this.#f>0?this.#m():this.is_pending=!1}return()=>{this.#u?.remove()}},Iu),de&&(this.#e=Se)}#w(){try{this.#r=zt(()=>this.#a(this.#e))}catch(t){this.error(t)}}#x(){const t=this.#t.pending;t&&(this.#n=zt(()=>t(this.#e)),Kt.enqueue(()=>{var n=this.#_();this.#r=this.#g(()=>(Kt.ensure(),zt(()=>this.#a(n)))),this.#f>0?this.#m():(Fn(this.#n,()=>{this.#n=null}),this.is_pending=!1)}))}#_(){var t=this.#e;return this.is_pending&&(this.#u=mt(),this.#e.before(this.#u),t=this.#u),t}defer_effect(t){Uo(t,this.#h,this.#p)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#t.pending}#g(t){var n=ye,r=we,i=Oe;en(this.#o),xt(this.#o),rr(this.#o.ctx);try{return t()}catch(a){return jo(a),null}finally{en(n),xt(r),rr(i)}}#m(){const t=this.#t.pending;this.#r!==null&&(this.#s=document.createDocumentFragment(),this.#s.append(this.#u),_l(this.#r,this.#s)),this.#n===null&&(this.#n=zt(()=>t(this.#e)))}#y(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(t);return}if(this.#f+=t,this.#f===0){this.is_pending=!1;for(const n of this.#h)tt(n,yt),gn(n);for(const n of this.#p)tt(n,an),gn(n);this.#h.clear(),this.#p.clear(),this.#n&&Fn(this.#n,()=>{this.#n=null}),this.#s&&(this.#e.before(this.#s),this.#s=null)}}update_pending_count(t){this.#y(t),this.#c+=t,this.#d&&ir(this.#d,this.#c)}get_effect_pending(){return this.#b(),x(this.#d)}error(t){var n=this.#t.onerror;let r=this.#t.failed;if(this.#v||!n&&!r)throw t;this.#r&&(St(this.#r),this.#r=null),this.#n&&(St(this.#n),this.#n=null),this.#l&&(St(this.#l),this.#l=null),de&&(et(this.#i),xe(),et(Rr()));var i=!1,a=!1;const o=()=>{if(i){mu();return}i=!0,a&&eu(),Kt.ensure(),this.#c=0,this.#l!==null&&Fn(this.#l,()=>{this.#l=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#g(()=>(this.#v=!1,zt(()=>this.#a(this.#e)))),this.#f>0?this.#m():this.is_pending=!1};var l=we;try{xt(null),a=!0,n?.(t,o),a=!1}catch(s){jn(s,this.#o&&this.#o.parent)}finally{xt(l)}r&&bn(()=>{this.#l=this.#g(()=>{Kt.ensure(),this.#v=!0;try{return zt(()=>{r(this.#e,()=>t,()=>o)})}catch(s){return jn(s,this.#o.parent),null}finally{this.#v=!1}})})}}function Qo(){return ye.b}function Cu(){ye===null&&Ws();var e=ye.b;return e===null?0:e.get_effect_pending()}function ki(e,t,n,r){const i=Br()?Mr:Ii;if(n.length===0&&e.length===0){r(t.map(i));return}var a=Pe,o=ye,l=Ko();function s(){Promise.all(n.map(u=>$i(u))).then(u=>{l();try{r([...t.map(i),...u])}catch(d){(o.f&Zt)===0&&jn(d,o)}a?.deactivate(),Nr()}).catch(u=>{jn(u,o)})}e.length>0?Promise.all(e).then(()=>{l();try{return s()}finally{a?.deactivate(),Nr()}}):s()}function Xo(e,t){ki(e,[],[],t)}function Ko(){var e=ye,t=we,n=Oe,r=Pe;return function(a=!0){en(e),xt(t),rr(n),a&&r?.activate()}}function Nr(){en(null),xt(null),rr(null)}function Ei(e){const t=Ko();var n=Qo(),r=Pe,i=n.is_rendered();n.update_pending_count(1),r.increment(i);var a=ye,o=null;const l=d=>{o={error:d},Ha(a)||jn(d,a)};var s=Promise.resolve(e[0]()).catch(l),u=[s];for(const d of e.slice(1))s=s.then(()=>{if(o)throw o.error;if(Ha(a))throw Ln;return t(),d()}).catch(l).finally(()=>{Nr(),Pe?.deactivate()}),u.push(s);return s.then(()=>Promise.resolve()).finally(()=>{n.update_pending_count(-1),r.decrement(i)}),u}function Mr(e){var t=rt|yt,n=we!==null&&(we.f&rt)!==0?we:null;return ye!==null&&(ye.f|=sr),{ctx:Oe,deps:null,effects:null,equals:Fo,f:t,fn:e,reactions:null,rv:0,v:ot,wv:0,parent:n??ye,ac:null}}function $i(e,t,n){let r=ye;r===null&&Hs();var i=r.b,a=void 0,o=Dn(ot),l=!we,s=new Map;return qu(()=>{var u=Ro();a=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{d===Pe&&d.committed&&d.deactivate(),Nr()})}catch(c){u.reject(c),Nr()}var d=Pe;if(l){var f=i.is_rendered();i.update_pending_count(1),d.increment(f),s.get(d)?.reject(Ln),s.delete(d),s.set(d,u)}const v=(c,g=void 0)=>{if(d.activate(),g)g!==Ln&&(o.f|=In,ir(o,g));else{(o.f&In)!==0&&(o.f^=In),ir(o,c);for(const[k,m]of s){if(s.delete(k),k===d)break;m.reject(Ln)}}l&&(i.update_pending_count(-1),d.decrement(f))};u.promise.then(v,c=>v(null,c||"unknown"))}),Sa(()=>{for(const u of s.values())u.reject(Ln)}),new Promise(u=>{function d(f){function v(){f===a?u(o):d(a)}f.then(v,v)}d(a)})}function Me(e){const t=Mr(e);return vn||yl(t),t}function Ii(e){const t=Mr(e);return t.equals=Mo,t}function Zo(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)St(t[n])}}function Tu(e){for(var t=e.parent;t!==null;){if((t.f&rt)===0)return(t.f&Zt)===0?t:null;t=t.parent}return null}function wa(e){var t,n=ye;en(Tu(e));try{e.f&=~qn,Zo(e),t=Sl(e)}finally{en(n)}return t}function Jo(e){var t=wa(e);if(!e.equals(t)&&(e.wv=wl(),(!Pe?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){tt(e,ct);return}Nn||(lt!==null?(xa()||Pe?.is_fork)&&lt.set(e,t):ba(e))}let aa=new Set;const Cn=new Map;let el=!1;function Dn(e,t){var n={f:0,v:e,reactions:null,equals:Fo,rv:0,wv:0};return n}function De(e,t){const n=Dn(e);return yl(n),n}function Ir(e,t=!1,n=!0){const r=Dn(e);return t||(r.equals=Mo),ur&&n&&Oe!==null&&Oe.l!==null&&(Oe.l.s??=[]).push(r),r}function se(e,t,n=!1){we!==null&&(!Vt||(we.f&ta)!==0)&&Br()&&(we.f&(rt|rn|_a|ta))!==0&&!hn?.includes(e)&&Js();let r=n?kn(t):t;return ir(e,r)}function ir(e,t){if(!e.equals(t)){var n=e.v;Nn?Cn.set(e,t):Cn.set(e,n),e.v=t;var r=Kt.ensure();if(r.capture(e,n),(e.f&rt)!==0){const i=e;(e.f&yt)!==0&&wa(i),ba(i)}e.wv=wl(),tl(e,yt),Br()&&ye!==null&&(ye.f&ct)!==0&&(ye.f&(yn|Un))===0&&(Ot===null?Uu([e]):Ot.push(e)),!r.is_fork&&aa.size>0&&!el&&Au()}return t}function Au(){el=!1;var e=Bn;vi(!0);const t=Array.from(aa);try{for(const n of t)(n.f&ct)!==0&&tt(n,an),dr(n)&&ar(n)}finally{vi(e)}aa.clear()}function Du(e,t=1){var n=x(e),r=t===1?n++:n--;return se(e,n),r}function Pr(e){se(e,e.v+1)}function tl(e,t){var n=e.reactions;if(n!==null)for(var r=Br(),i=n.length,a=0;a<i;a++){var o=n[a],l=o.f;if(!(!r&&o===ye)){var s=(l&yt)===0;if(s&&tt(o,t),(l&rt)!==0){var u=o;lt?.delete(u),(l&qn)===0&&(l&Bt&&(o.f|=qn),tl(u,an))}else s&&((l&rn)!==0&&Qt!==null&&Qt.add(o),gn(o))}}}function kn(e){if(typeof e!="object"||e===null||Pn in e)return e;const t=ga(e);if(t!==Bs&&t!==Ms)return e;var n=new Map,r=mi(e),i=De(0),a=Mn,o=l=>{if(Mn===a)return l();var s=we,u=Mn;xt(null),Va(a);var d=l();return xt(s),Va(u),d};return r&&n.set("length",De(e.length)),new Proxy(e,{defineProperty(l,s,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ks();var d=n.get(s);return d===void 0?d=o(()=>{var f=De(u.value);return n.set(s,f),f}):se(d,u.value,!0),!0},deleteProperty(l,s){var u=n.get(s);if(u===void 0){if(s in l){const d=o(()=>De(ot));n.set(s,d),Pr(i)}}else se(u,ot),Pr(i);return!0},get(l,s,u){if(s===Pn)return e;var d=n.get(s),f=s in l;if(d===void 0&&(!f||$n(l,s)?.writable)&&(d=o(()=>{var c=kn(f?l[s]:ot),g=De(c);return g}),n.set(s,d)),d!==void 0){var v=x(d);return v===ot?void 0:v}return Reflect.get(l,s,u)},getOwnPropertyDescriptor(l,s){var u=Reflect.getOwnPropertyDescriptor(l,s);if(u&&"value"in u){var d=n.get(s);d&&(u.value=x(d))}else if(u===void 0){var f=n.get(s),v=f?.v;if(f!==void 0&&v!==ot)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,s){if(s===Pn)return!0;var u=n.get(s),d=u!==void 0&&u.v!==ot||Reflect.has(l,s);if(u!==void 0||ye!==null&&(!d||$n(l,s)?.writable)){u===void 0&&(u=o(()=>{var v=d?kn(l[s]):ot,c=De(v);return c}),n.set(s,u));var f=x(u);if(f===ot)return!1}return d},set(l,s,u,d){var f=n.get(s),v=s in l;if(r&&s==="length")for(var c=u;c<f.v;c+=1){var g=n.get(c+"");g!==void 0?se(g,ot):c in l&&(g=o(()=>De(ot)),n.set(c+"",g))}if(f===void 0)(!v||$n(l,s)?.writable)&&(f=o(()=>De(void 0)),se(f,kn(u)),n.set(s,f));else{v=f.v!==ot;var k=o(()=>kn(u));se(f,k)}var m=Reflect.getOwnPropertyDescriptor(l,s);if(m?.set&&m.set.call(d,u),!v){if(r&&typeof s=="string"){var y=n.get("length"),$=Number(s);Number.isInteger($)&&$>=y.v&&se(y,$+1)}Pr(i)}return!0},ownKeys(l){x(i);var s=Reflect.ownKeys(l).filter(f=>{var v=n.get(f);return v===void 0||v.v!==ot});for(var[u,d]of n)d.v!==ot&&!(u in l)&&s.push(u);return s},setPrototypeOf(){Zs()}})}var Rn,nl,rl,il,al;function Ru(){if(Rn===void 0){Rn=window,nl=document,rl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;il=$n(t,"firstChild").get,al=$n(t,"nextSibling").get,Ma(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ma(n)&&(n.__t=void 0)}}function mt(e=""){return document.createTextNode(e)}function gt(e){return il.call(e)}function jt(e){return al.call(e)}function L(e,t){if(!de)return gt(e);var n=gt(Se);if(n===null)n=Se.appendChild(mt());else if(t&&n.nodeType!==bi){var r=mt();return n?.before(r),et(r),r}return et(n),n}function K(e,t=!1){if(!de){var n=gt(e);return n instanceof Comment&&n.data===""?jt(n):n}if(t&&Se?.nodeType!==bi){var r=mt();return Se?.before(r),et(r),r}return Se}function P(e,t=1,n=!1){let r=de?Se:e;for(var i;t--;)i=r,r=jt(r);if(!de)return r;if(n&&r?.nodeType!==bi){var a=mt();return r===null?i?.after(a):r.before(a),et(a),a}return et(r),r}function ol(e){e.textContent=""}function ll(){if(!vn||Qt!==null)return!1;var e=ye.f;return(e&lr)!==0}function Nu(e){de&&gt(e)!==null&&ol(e)}let ja=!1;function sl(){ja||(ja=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function cr(e){var t=we,n=ye;xt(null),en(null);try{return e()}finally{xt(t),en(n)}}function ul(e,t,n,r=n){e.addEventListener(t,()=>cr(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),sl()}function cl(e){ye===null&&(we===null&&Ys(),Vs()),Nn&&Us()}function Ou(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ht(e,t,n){var r=ye;r!==null&&(r.f&Ct)!==0&&(e|=Ct);var i={ctx:Oe,deps:null,nodes:null,f:e|yt|Bt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{ar(i),i.f|=lr}catch(l){throw St(i),l}else t!==null&&gn(i);var a=i;if(n&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&sr)===0&&(a=a.first,(e&rn)!==0&&(e&pn)!==0&&a!==null&&(a.f|=pn)),a!==null&&(a.parent=r,r!==null&&Ou(a,r),we!==null&&(we.f&rt)!==0&&(e&Un)===0)){var o=we;(o.effects??=[]).push(a)}return i}function xa(){return we!==null&&!Vt}function Sa(e){const t=Ht(nr,null,!1);return tt(t,ct),t.teardown=e,t}function Jt(e){cl();var t=ye.f,n=!we&&(t&yn)!==0&&(t&lr)===0;if(n){var r=Oe;(r.e??=[]).push(e)}else return fl(e)}function fl(e){return Ht(Dr|No,e,!1)}function Lu(e){return cl(),Ht(nr|No,e,!0)}function zu(e){return Ht(ta,e,!0)}function Fu(e){Kt.ensure();const t=Ht(Un|sr,e,!0);return(n={})=>new Promise(r=>{n.outro?Fn(t,()=>{St(t),r(void 0)}):(St(t),r(void 0))})}function ka(e){return Ht(Dr,e,!1)}function Bu(e,t){var n=Oe,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=Yn(()=>{e(),!r.ran&&(r.ran=!0,V(t))})}function Mu(){var e=Oe;Yn(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&ct)!==0&&n.deps!==null&&tt(n,an),dr(n)&&ar(n),t.ran=!1}})}function qu(e){return Ht(_a|sr,e,!0)}function Yn(e,t=0){return Ht(nr|t,e,!0)}function pe(e,t=[],n=[],r=[]){ki(r,t,n,i=>{Ht(nr,()=>e(...i.map(x)),!0)})}function ju(e,t=[],n=[],r=[]){var i=Pe,a=n.length>0||r.length>0;a&&i.increment(!0),ki(r,t,n,o=>{Ht(Dr,()=>e(...o.map(x)),!1),a&&i.decrement(!0)})}function fr(e,t=0){var n=Ht(rn|t,e,!0);return n}function zt(e){return Ht(yn|sr,e,!0)}function dl(e){var t=e.teardown;if(t!==null){const n=Nn,r=we;Ua(!0),xt(null);try{t.call(null)}finally{Ua(n),xt(r)}}}function vl(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const i=n.ac;i!==null&&cr(()=>{i.abort(Ln)});var r=n.next;(n.f&Un)!==0?n.parent=null:St(n,t),n=r}}function Hu(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&yn)===0&&St(t),t=n}}function St(e,t=!0){var n=!1;(t||(e.f&ma)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(hl(e.nodes.start,e.nodes.end),n=!0),vl(e,t&&!n),hi(e,0),tt(e,Zt);var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)a.stop();dl(e);var i=e.parent;i!==null&&i.first!==null&&pl(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function hl(e,t){for(;e!==null;){var n=e===t?null:jt(e);e.remove(),e=n}}function pl(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Fn(e,t,n=!0){var r=[];gl(e,r,!0);var i=()=>{n&&St(e),t&&t()},a=r.length;if(a>0){var o=()=>--a||i();for(var l of r)l.out(o)}else i()}function gl(e,t,n){if((e.f&Ct)===0){e.f^=Ct;var r=e.nodes&&e.nodes.t;if(r!==null)for(const l of r)(l.is_global||n)&&t.push(l);for(var i=e.first;i!==null;){var a=i.next,o=(i.f&pn)!==0||(i.f&yn)!==0&&(e.f&rn)!==0;gl(i,t,o?n:!1),i=a}}}function Ea(e){ml(e,!0)}function ml(e,t){if((e.f&Ct)!==0){e.f^=Ct,(e.f&ct)===0&&(tt(e,yt),gn(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&pn)!==0||(n.f&yn)!==0;ml(n,i?t:!1),n=r}var a=e.nodes&&e.nodes.t;if(a!==null)for(const o of a)(o.is_global||t)&&o.in()}}function Ha(e=ye){return(e.f&Zt)!==0}function _l(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var i=n===r?null:jt(n);t.append(n),n=i}}let Bn=!1;function vi(e){Bn=e}let Nn=!1;function Ua(e){Nn=e}let we=null,Vt=!1;function xt(e){we=e}let ye=null;function en(e){ye=e}let hn=null;function yl(e){we!==null&&(!vn||(we.f&rt)!==0)&&(hn===null?hn=[e]:hn.push(e))}let pt=null,It=0,Ot=null;function Uu(e){Ot=e}let bl=1,Or=0,Mn=Or;function Va(e){Mn=e}function wl(){return++bl}function dr(e){var t=e.f;if((t&yt)!==0)return!0;if(t&rt&&(e.f&=~qn),(t&an)!==0){for(var n=e.deps,r=n.length,i=0;i<r;i++){var a=n[i];if(dr(a)&&Jo(a),a.wv>e.wv)return!0}(t&Bt)!==0&&lt===null&&tt(e,ct)}return!1}function xl(e,t,n=!0){var r=e.reactions;if(r!==null&&!(!vn&&hn?.includes(e)))for(var i=0;i<r.length;i++){var a=r[i];(a.f&rt)!==0?xl(a,t,!1):t===a&&(n?tt(a,yt):(a.f&ct)!==0&&tt(a,an),gn(a))}}function Sl(e){var t=pt,n=It,r=Ot,i=we,a=hn,o=Oe,l=Vt,s=Mn,u=e.f;pt=null,It=0,Ot=null,we=(u&(yn|Un))===0?e:null,hn=null,rr(e.ctx),Vt=!1,Mn=++Or,e.ac!==null&&(cr(()=>{e.ac.abort(Ln)}),e.ac=null);try{e.f|=na;var d=e.fn,f=d(),v=e.deps;if(pt!==null){var c;if(hi(e,It),v!==null&&It>0)for(v.length=It+pt.length,c=0;c<pt.length;c++)v[It+c]=pt[c];else e.deps=v=pt;if(xa()&&(e.f&Bt)!==0)for(c=It;c<v.length;c++)(v[c].reactions??=[]).push(e)}else v!==null&&It<v.length&&(hi(e,It),v.length=It);if(Br()&&Ot!==null&&!Vt&&v!==null&&(e.f&(rt|an|yt))===0)for(c=0;c<Ot.length;c++)xl(Ot[c],e);return i!==null&&i!==e&&(Or++,Ot!==null&&(r===null?r=Ot:r.push(...Ot))),(e.f&In)!==0&&(e.f^=In),f}catch(g){return jo(g)}finally{e.f^=na,pt=t,It=n,Ot=r,we=i,hn=a,rr(o),Vt=l,Mn=s}}function Vu(e,t){let n=t.reactions;if(n!==null){var r=Fs.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}if(n===null&&(t.f&rt)!==0&&(pt===null||!pt.includes(t))){var a=t;(a.f&Bt)!==0&&(a.f^=Bt,a.f&=~qn),ba(a),Zo(a),hi(a,0)}}function hi(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Vu(e,n[r])}function ar(e){var t=e.f;if((t&Zt)===0){tt(e,ct);var n=ye,r=Bn;ye=e,Bn=!0;try{(t&(rn|ea))!==0?Hu(e):vl(e),dl(e);var i=Sl(e);e.teardown=typeof i=="function"?i:null,e.wv=bl;var a;Ji&&_u&&(e.f&yt)!==0&&e.deps}finally{Bn=r,ye=n}}}async function Pi(){if(vn)return new Promise(e=>{requestAnimationFrame(()=>e()),setTimeout(()=>e())});await Promise.resolve(),Vo()}function x(e){var t=e.f,n=(t&rt)!==0;if(we!==null&&!Vt){var r=ye!==null&&(ye.f&Zt)!==0;if(!r&&!hn?.includes(e)){var i=we.deps;if((we.f&na)!==0)e.rv<Or&&(e.rv=Or,pt===null&&i!==null&&i[It]===e?It++:pt===null?pt=[e]:pt.includes(e)||pt.push(e));else{(we.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[we]:a.includes(we)||a.push(we)}}}if(Nn&&Cn.has(e))return Cn.get(e);if(n){var o=e;if(Nn){var l=o.v;return((o.f&ct)===0&&o.reactions!==null||El(o))&&(l=wa(o)),Cn.set(o,l),l}var s=(o.f&Bt)===0&&!Vt&&we!==null&&(Bn||(we.f&Bt)!==0),u=o.deps===null;dr(o)&&(s&&(o.f|=Bt),Jo(o)),s&&!u&&kl(o)}if(lt?.has(e))return lt.get(e);if((e.f&In)!==0)throw e.v;return e.v}function kl(e){if(e.deps!==null){e.f|=Bt;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&rt)!==0&&(t.f&Bt)===0&&kl(t)}}function El(e){if(e.v===ot)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Cn.has(t)||(t.f&rt)!==0&&El(t))return!0;return!1}function V(e){var t=Vt;try{return Vt=!0,e()}finally{Vt=t}}function $l(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Pn in e)oa(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Pn in n&&oa(n)}}}function oa(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{oa(e[r],t)}catch{}const n=ga(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Do(n);for(let i in r){const a=r[i].get;if(a)try{a.call(e)}catch{}}}}}const Yu=["touchstart","touchmove"];function Wu(e){return Yu.includes(e)}const Il=new Set,la=new Set;function Gu(e,t,n,r={}){function i(a){if(r.capture||kr.call(t,a),!a.cancelBubble)return cr(()=>n?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?bn(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Yt(e,t,n,r,i){var a={capture:r,passive:i},o=Gu(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Sa(()=>{t.removeEventListener(e,o,a)})}function At(e){for(var t=0;t<e.length;t++)Il.add(e[t]);for(var n of la)n(e)}let Ya=null;function kr(e){var t=this,n=t.ownerDocument,r=e.type,i=e.composedPath?.()||[],a=i[0]||e.target;Ya=e;var o=0,l=Ya===e&&e.__root;if(l){var s=i.indexOf(l);if(s!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;s<=u&&(o=s)}if(a=i[o]||e.target,a!==t){Ao(e,"currentTarget",{configurable:!0,get(){return a||n}});var d=we,f=ye;xt(null),en(null);try{for(var v,c=[];a!==null;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var k=a["__"+r];k!=null&&(!a.disabled||e.target===a)&&k.call(a,e)}catch(m){v?c.push(m):v=m}if(e.cancelBubble||g===t||g===null)break;a=g}if(v){for(let m of c)queueMicrotask(()=>{throw m});throw v}}finally{e.__root=t,delete e.currentTarget,xt(d),en(f)}}}function $a(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Mt(e,t){var n=ye;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function F(e,t){var n=(t&vu)!==0,r=(t&hu)!==0,i,a=!e.startsWith("<!>");return()=>{if(de)return Mt(Se,null),Se;i===void 0&&(i=$a(a?e:"<!>"+e),n||(i=gt(i)));var o=r||rl?document.importNode(i,!0):i.cloneNode(!0);if(n){var l=gt(o),s=o.lastChild;Mt(l,s)}else Mt(o,o);return o}}function Qu(e,t,n="svg"){var r=!e.startsWith("<!>"),i=`<${n}>${r?e:"<!>"+e}</${n}>`,a;return()=>{if(de)return Mt(Se,null),Se;if(!a){var o=$a(i),l=gt(o);a=gt(l)}var s=a.cloneNode(!0);return Mt(s,s),s}}function Xu(e,t){return Qu(e,t,"svg")}function Ze(e=""){if(!de){var t=mt(e+"");return Mt(t,t),t}var n=Se;return n.nodeType!==bi&&(n.before(n=mt()),et(n)),Mt(n,n),n}function qt(){if(de)return Mt(Se,null),Se;var e=document.createDocumentFragment(),t=document.createComment(""),n=mt();return e.append(t,n),Mt(t,n),e}function A(e,t){if(de){var n=ye;((n.f&lr)===0||n.nodes.end===null)&&(n.nodes.end=Se),An();return}e!==null&&e.before(t)}let sa=!0;function Ye(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Ku(e,t){return Zu(e,t)}const Qn=new Map;function Zu(e,{target:t,anchor:n,props:r={},events:i,context:a,intro:o=!0}){Ru();var l=new Set,s=f=>{for(var v=0;v<f.length;v++){var c=f[v];if(!l.has(c)){l.add(c);var g=Wu(c);t.addEventListener(c,kr,{passive:g});var k=Qn.get(c);k===void 0?(document.addEventListener(c,kr,{passive:g}),Qn.set(c,1)):Qn.set(c,k+1)}}};s(_i(Il)),la.add(s);var u=void 0,d=Fu(()=>{var f=n??t.appendChild(mt());return Go(f,{pending:()=>{}},v=>{if(a){$e({});var c=Oe;c.c=a}if(i&&(r.$$events=i),de&&Mt(v,null),sa=o,u=e(v,r)||{},sa=!0,de&&(ye.nodes.end=Se,Se===null||Se.nodeType!==Vn||Se.data!==ya))throw Fr(),zr;a&&Ie()}),()=>{for(var v of l){t.removeEventListener(v,kr);var c=Qn.get(v);--c===0?(document.removeEventListener(v,kr),Qn.delete(v)):Qn.set(v,c)}la.delete(s),f!==n&&f.parentNode?.removeChild(f)}});return Ju.set(u,d),u}let Ju=new WeakMap;function ft(e,t=[],n=[],r){var i=Qo(),a=Pe,o=i.is_rendered();i.update_pending_count(1),a.increment(o);var l=de;if(l){An();var s=Se,u=Rr(!1);et(u)}ki(t,[],n,d=>{l&&(dn(!0),et(s));try{for(const f of d)x(f);r(e,...d)}finally{l&&dn(!1),i.update_pending_count(-1),a.decrement(o)}})}class Ia{anchor;#e=new Map;#i=new Map;#t=new Map;#a=new Set;#o=!0;constructor(t,n=!0){this.anchor=t,this.#o=n}#r=()=>{var t=Pe;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#i.get(n);if(r)Ea(r),this.#a.delete(n);else{var i=this.#t.get(n);i&&(this.#i.set(n,i.effect),this.#t.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[a,o]of this.#e){if(this.#e.delete(a),a===t)break;const l=this.#t.get(o);l&&(St(l.effect),this.#t.delete(o))}for(const[a,o]of this.#i){if(a===n||this.#a.has(a))continue;const l=()=>{if(Array.from(this.#e.values()).includes(a)){var u=document.createDocumentFragment();_l(o,u),u.append(mt()),this.#t.set(a,{effect:o,fragment:u})}else St(o);this.#a.delete(a),this.#i.delete(a)};this.#o||!r?(this.#a.add(a),Fn(o,l,!1)):l()}}};#n=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,i]of this.#t)n.includes(r)||(St(i.effect),this.#t.delete(r))};ensure(t,n){var r=Pe,i=ll();if(n&&!this.#i.has(t)&&!this.#t.has(t))if(i){var a=document.createDocumentFragment(),o=mt();a.append(o),this.#t.set(t,{effect:zt(()=>n(o)),fragment:a})}else this.#i.set(t,zt(()=>n(this.anchor)));if(this.#e.set(r,t),i){for(const[l,s]of this.#i)l===t?r.skipped_effects.delete(s):r.skipped_effects.add(s);for(const[l,s]of this.#t)l===t?r.skipped_effects.delete(s.effect):r.skipped_effects.add(s.effect);r.oncommit(this.#r),r.ondiscard(this.#n)}else de&&(this.anchor=Se),this.#r()}}function ze(e,t,n=!1){de&&An();var r=new Ia(e),i=n?pn:0;function a(o,l){if(de){const u=zo(e)===xi;if(o===u){var s=Rr();et(s),r.anchor=s,dn(!1),r.ensure(o,l),dn(!0);return}}r.ensure(o,l)}fr(()=>{var o=!1;t((l,s=!0)=>{o=!0,a(s,l)}),o||a(!1,null)},i)}function Wa(e,t){de&&et(gt(e)),Yn(()=>{var n=t();for(var r in n){var i=n[r];i?e.style.setProperty(r,i):e.style.removeProperty(r)}})}function mn(e,t){return t}function ec(e,t,n){for(var r=[],i=t.length,a,o=t.length,l=0;l<i;l++){let f=t[l];Fn(f,()=>{if(a){if(a.pending.delete(f),a.done.add(f),a.pending.size===0){var v=e.outrogroups;ua(_i(a.done)),v.delete(a),v.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var s=r.length===0&&n!==null;if(s){var u=n,d=u.parentNode;ol(d),d.append(u),e.items.clear()}ua(t,!s)}else a={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(a)}function ua(e,t=!0){for(var n=0;n<e.length;n++)St(e[n],t)}var Ga;function Wt(e,t,n,r,i,a=null){var o=e,l=new Map,s=(t&Lo)!==0;if(s){var u=e;o=de?et(gt(u)):u.appendChild(mt())}de&&An();var d=null,f=Ii(()=>{var y=n();return mi(y)?y:y==null?[]:_i(y)}),v,c=!0;function g(){m.fallback=d,tc(m,v,o,t,r),d!==null&&(v.length===0?(d.f&cn)===0?Ea(d):(d.f^=cn,Er(d,null,o)):Fn(d,()=>{d=null}))}var k=fr(()=>{v=x(f);var y=v.length;let $=!1;if(de){var D=zo(o)===xi;D!==(y===0)&&(o=Rr(),et(o),dn(!1),$=!0)}for(var O=new Set,S=Pe,b=ll(),I=0;I<y;I+=1){de&&Se.nodeType===Vn&&Se.data===ya&&(o=Se,$=!0,dn(!1));var z=v[I],B=r(z,I),H=c?null:l.get(B);H?(H.v&&ir(H.v,z),H.i&&ir(H.i,I),b&&S.skipped_effects.delete(H.e)):(H=nc(l,c?o:Ga??=mt(),z,B,I,i,t,n),c||(H.e.f|=cn),l.set(B,H)),O.add(B)}if(y===0&&a&&!d&&(c?d=zt(()=>a(o)):(d=zt(()=>a(Ga??=mt())),d.f|=cn)),de&&y>0&&et(Rr()),!c)if(b){for(const[M,j]of l)O.has(M)||S.skipped_effects.add(j.e);S.oncommit(g),S.ondiscard(()=>{})}else g();$&&dn(!0),x(f)}),m={effect:k,items:l,outrogroups:null,fallback:d};c=!1,de&&(o=Se)}function tc(e,t,n,r,i){var a=(r&ru)!==0,o=t.length,l=e.items,s=e.effect.first,u,d=null,f,v=[],c=[],g,k,m,y;if(a)for(y=0;y<o;y+=1)g=t[y],k=i(g,y),m=l.get(k).e,(m.f&cn)===0&&(m.nodes?.a?.measure(),(f??=new Set).add(m));for(y=0;y<o;y+=1){if(g=t[y],k=i(g,y),m=l.get(k).e,e.outrogroups!==null)for(const H of e.outrogroups)H.pending.delete(m),H.done.delete(m);if((m.f&cn)!==0)if(m.f^=cn,m===s)Er(m,null,n);else{var $=d?d.next:s;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Sn(e,d,m),Sn(e,m,$),Er(m,$,n),d=m,v=[],c=[],s=d.next;continue}if((m.f&Ct)!==0&&(Ea(m),a&&(m.nodes?.a?.unfix(),(f??=new Set).delete(m))),m!==s){if(u!==void 0&&u.has(m)){if(v.length<c.length){var D=c[0],O;d=D.prev;var S=v[0],b=v[v.length-1];for(O=0;O<v.length;O+=1)Er(v[O],D,n);for(O=0;O<c.length;O+=1)u.delete(c[O]);Sn(e,S.prev,b.next),Sn(e,d,S),Sn(e,b,D),s=D,d=b,y-=1,v=[],c=[]}else u.delete(m),Er(m,s,n),Sn(e,m.prev,m.next),Sn(e,m,d===null?e.effect.first:d.next),Sn(e,d,m),d=m;continue}for(v=[],c=[];s!==null&&s!==m;)(u??=new Set).add(s),c.push(s),s=s.next;if(s===null)continue}(m.f&cn)===0&&v.push(m),d=m,s=m.next}if(e.outrogroups!==null){for(const H of e.outrogroups)H.pending.size===0&&(ua(_i(H.done)),e.outrogroups?.delete(H));e.outrogroups.size===0&&(e.outrogroups=null)}if(s!==null||u!==void 0){var I=[];if(u!==void 0)for(m of u)(m.f&Ct)===0&&I.push(m);for(;s!==null;)(s.f&Ct)===0&&s!==e.fallback&&I.push(s),s=s.next;var z=I.length;if(z>0){var B=(r&Lo)!==0&&o===0?n:null;if(a){for(y=0;y<z;y+=1)I[y].nodes?.a?.measure();for(y=0;y<z;y+=1)I[y].nodes?.a?.fix()}ec(e,I,B)}}a&&bn(()=>{if(f!==void 0)for(m of f)m.nodes?.a?.apply()})}function nc(e,t,n,r,i,a,o,l){var s=(o&tu)!==0?(o&iu)===0?Ir(n,!1,!1):Dn(n):null,u=(o&nu)!==0?Dn(i):null;return{v:s,i:u,e:zt(()=>(a(t,s??n,u??i,l),()=>{e.delete(r)}))}}function Er(e,t,n){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,a=t&&(t.f&cn)===0?t.nodes.start:n;r!==null;){var o=jt(r);if(a.before(r),r===i)return;r=o}}function Sn(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function rc(e,t,n=!1,r=!1,i=!1){var a=e,o="";pe(()=>{var l=ye;if(o===(o=t()??"")){de&&An();return}if(l.nodes!==null&&(hl(l.nodes.start,l.nodes.end),l.nodes=null),o!==""){if(de){Se.data;for(var s=An(),u=s;s!==null&&(s.nodeType!==Vn||s.data!=="");)u=s,s=jt(s);if(s===null)throw Fr(),zr;Mt(Se,u),a=et(s);return}var d=o+"";n?d=`<svg>${d}</svg>`:r&&(d=`<math>${d}</math>`);var f=$a(d);if((n||r)&&(f=gt(f)),Mt(gt(f),f.lastChild),n||r)for(;gt(f);)a.before(gt(f));else a.before(f)}})}function ht(e,t,...n){var r=new Ia(e);fr(()=>{const i=t()??null;r.ensure(i,i&&(a=>i(a,...n)))},pn)}function Qa(e,t,n){de&&An();var r=new Ia(e);fr(()=>{var i=t()??null;r.ensure(i,i&&(a=>n(a,i)))},pn)}const ic=()=>performance.now(),sn={tick:e=>requestAnimationFrame(e),now:()=>ic(),tasks:new Set};function Pl(){const e=sn.now();sn.tasks.forEach(t=>{t.c(e)||(sn.tasks.delete(t),t.f())}),sn.tasks.size!==0&&sn.tick(Pl)}function ac(e){let t;return sn.tasks.size===0&&sn.tick(Pl),{promise:new Promise(n=>{sn.tasks.add(t={c:e,f:n})}),abort(){sn.tasks.delete(t)}}}function ri(e,t){cr(()=>{e.dispatchEvent(new CustomEvent(t))})}function oc(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Xa(e){const t={},n=e.split(";");for(const r of n){const[i,a]=r.split(":");if(!i||a===void 0)break;const o=oc(i.trim());t[o]=a.trim()}return t}const lc=e=>e;function Ka(e,t,n,r){var i=(e&cu)!==0,a=(e&fu)!==0,o=i&&a,l=(e&du)!==0,s=o?"both":i?"in":"out",u,d=t.inert,f=t.style.overflow,v,c;function g(){return cr(()=>u??=n()(t,r?.()??{},{direction:s}))}var k={is_global:l,in(){if(t.inert=d,!i){c?.abort(),c?.reset?.();return}a||v?.abort(),ri(t,"introstart"),v=ca(t,g(),c,1,()=>{ri(t,"introend"),v?.abort(),v=u=void 0,t.style.overflow=f})},out(D){if(!a){D?.(),u=void 0;return}t.inert=!0,ri(t,"outrostart"),c=ca(t,g(),v,0,()=>{ri(t,"outroend"),D?.()})},stop:()=>{v?.abort(),c?.abort()}},m=ye;if((m.nodes.t??=[]).push(k),i&&sa){var y=l;if(!y){for(var $=m.parent;$&&($.f&pn)!==0;)for(;($=$.parent)&&($.f&rn)===0;);y=!$||($.f&lr)!==0}y&&ka(()=>{V(()=>k.in())})}}function ca(e,t,n,r,i){var a=r===1;if(Zn(t)){var o,l=!1;return bn(()=>{if(!l){var m=t({direction:a?"in":"out"});o=ca(e,m,n,r,i)}}),{abort:()=>{l=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(n?.deactivate(),!t?.duration)return i(),{abort:Re,deactivate:Re,reset:Re,t:()=>r};const{delay:s=0,css:u,tick:d,easing:f=lc}=t;var v=[];if(a&&n===void 0&&(d&&d(0,1),u)){var c=Xa(u(0,1));v.push(c,c)}var g=()=>1-r,k=e.animate(v,{duration:s,fill:"forwards"});return k.onfinish=()=>{k.cancel();var m=n?.t()??1-r;n?.abort();var y=r-m,$=t.duration*Math.abs(y),D=[];if($>0){var O=!1;if(u)for(var S=Math.ceil($/16.666666666666668),b=0;b<=S;b+=1){var I=m+y*f(b/S),z=Xa(u(I,1-I));D.push(z),O||=z.overflow==="hidden"}O&&(e.style.overflow="hidden"),g=()=>{var B=k.currentTime;return m+y*f(B/$)},d&&ac(()=>{if(k.playState!=="running")return!1;var B=g();return d(B,1-B),!0})}k=e.animate(D,{duration:$,fill:"forwards"}),k.onfinish=()=>{g=()=>r,d?.(r,1-r),i()}},{abort:()=>{k&&(k.cancel(),k.effect=null,k.onfinish=Re)},deactivate:()=>{i=Re},reset:()=>{r===0&&d?.(1,0)},t:()=>g()}}function sc(e,t){let n=null,r=de;var i;if(de){n=Se;for(var a=gt(document.head);a!==null&&(a.nodeType!==Vn||a.data!==e);)a=jt(a);if(a===null)dn(!1);else{var o=jt(a);a.remove(),et(o)}}de||(i=document.head.appendChild(mt()));try{fr(()=>t(i),ma)}finally{r&&(dn(!0),et(n))}}function Ci(e,t,n){ka(()=>{var r=V(()=>t(e,n?.())||{});if(r?.destroy)return()=>r.destroy()})}const Za=[...` 	
\r\fÂ \v\uFEFF`];function uc(e,t,n){var r=e==null?"":""+e;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var a=i.length,o=0;(o=r.indexOf(i,o))>=0;){var l=o+a;(o===0||Za.includes(r[o-1]))&&(l===r.length||Za.includes(r[l]))?r=(o===0?"":r.substring(0,o))+r.substring(l+1):o=l}}return r===""?null:r}function cc(e,t){return e==null?null:String(e)}function Tt(e,t,n,r,i,a){var o=e.__className;if(de||o!==n||o===void 0){var l=uc(n,r,a);(!de||l!==e.getAttribute("class"))&&(l==null?e.removeAttribute("class"):e.className=l),e.__className=n}else if(a&&i!==a)for(var s in a){var u=!!a[s];(i==null||u!==!!i[s])&&e.classList.toggle(s,u)}return a}function fc(e,t,n,r){var i=e.__style;if(de||i!==t){var a=cc(t);(!de||a!==e.getAttribute("style"))&&(a==null?e.removeAttribute("style"):e.style.cssText=a),e.__style=t}return r}const dc=Symbol("is custom element"),vc=Symbol("is html");function er(e){if(de){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;tn(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var i=e.checked;tn(e,"checked",null),e.checked=i}}};e.__on_r=n,bn(n),sl()}}function tn(e,t,n,r){var i=hc(e);de&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=n)&&(t==="loading"&&(e[js]=n),n==null?e.removeAttribute(t):typeof n!="string"&&pc(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function hc(e){return e.__attributes??={[dc]:e.nodeName.includes("-"),[vc]:e.namespaceURI===gu}}var Ja=new Map;function pc(e){var t=e.getAttribute("is")||e.nodeName,n=Ja.get(t);if(n)return n;Ja.set(t,n=[]);for(var r,i=e,a=Element.prototype;a!==i;){r=Do(i);for(var o in r)r[o].set&&n.push(o);i=ga(i)}return n}function tr(e,t,n=t){var r=new WeakSet;ul(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=Vi(e)?Yi(a):a,n(a),Pe!==null&&r.add(Pe),await Pi(),a!==(a=t())){var o=e.selectionStart,l=e.selectionEnd,s=e.value.length;if(e.value=a??"",l!==null){var u=e.value.length;o===l&&l===s&&u>s?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=o,e.selectionEnd=Math.min(l,u))}}}),(de&&e.defaultValue!==e.value||V(t)==null&&e.value)&&(n(Vi(e)?Yi(e.value):e.value),Pe!==null&&r.add(Pe)),Yn(()=>{var i=t();if(e===document.activeElement){var a=si??Pe;if(r.has(a))return}Vi(e)&&i===Yi(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function gc(e,t,n=t){ul(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),(de&&e.defaultChecked!==e.checked||V(t)==null)&&n(e.checked),Yn(()=>{var r=t();e.checked=!!r})}function Vi(e){var t=e.type;return t==="number"||t==="range"}function Yi(e){return e===""?null:+e}function eo(e,t){return e===t||e?.[Pn]===t}function Hn(e={},t,n,r){return ka(()=>{var i,a;return Yn(()=>{i=a,a=[],V(()=>{e!==n(...a)&&(t(e,...a),i&&eo(n(...i),e)&&t(null,...i))})}),()=>{bn(()=>{a&&eo(n(...a),e)&&t(null,...a)})}}),e}function Cl(e=!1){const t=Oe,n=t.l.u;if(!n)return;let r=()=>$l(t.s);if(e){let i=0,a={};const o=Mr(()=>{let l=!1;const s=t.s;for(const u in s)s[u]!==a[u]&&(a[u]=s[u],l=!0);return l&&i++,i});r=()=>x(o)}n.b.length&&Lu(()=>{to(t,r),fi(n.b)}),Jt(()=>{const i=V(()=>n.m.map(qs));return()=>{for(const a of i)typeof a=="function"&&a()}}),n.a.length&&Jt(()=>{to(t,r),fi(n.a)})}function to(e,t){if(e.l.s)for(const n of e.l.s)x(n);t()}function no(e,t){var n=e.$$events?.[t.type],r=mi(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,t)}function Pa(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Re;const r=V(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Xn=[];function Tl(e,t){return{subscribe:or(e,t).subscribe}}function or(e,t=Re){let n=null;const r=new Set;function i(l){if(Bo(e,l)&&(e=l,n)){const s=!Xn.length;for(const u of r)u[1](),Xn.push(u,e);if(s){for(let u=0;u<Xn.length;u+=2)Xn[u][0](Xn[u+1]);Xn.length=0}}}function a(l){i(l(e))}function o(l,s=Re){const u=[l,s];return r.add(u),r.size===1&&(n=t(i,a)||Re),l(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}function Al(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Tl(n,(o,l)=>{let s=!1;const u=[];let d=0,f=Re;const v=()=>{if(d)return;f();const g=t(r?u[0]:u,o,l);a?o(g):f=typeof g=="function"?g:Re},c=i.map((g,k)=>Pa(g,m=>{u[k]=m,d&=~(1<<k),s&&v()},()=>{d|=1<<k}));return s=!0,v(),function(){fi(c),f(),s=!1}})}function mc(e){let t;return Pa(e,n=>t=n)(),t}let ii=!1,fa=Symbol();function qe(e,t,n){const r=n[t]??={store:null,source:Ir(void 0),unsubscribe:Re};if(r.store!==e&&!(fa in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Re;else{var i=!0;r.unsubscribe=Pa(e,a=>{i?r.source.v=a:se(r.source,a)}),i=!1}return e&&fa in n?mc(e):x(r.source)}function _c(e,t,n){let r=n[t];return r&&r.store!==e&&(r.unsubscribe(),r.unsubscribe=Re),e}function yc(e,t){return e.set(t),t}function fn(e,t){var n=e[t];n.store!==null&&yc(n.store,n.source.v)}function it(){const e={};function t(){Sa(()=>{for(var n in e)e[n].unsubscribe();Ao(e,fa,{enumerable:!1,value:!0})})}return[e,t]}function he(e,t,n){return e.set(n),t}function bc(e){var t=ii;try{return ii=!1,[e(),ii]}finally{ii=t}}const wc={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Zn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];Zn(i)&&(i=i());const a=$n(i,t);if(a&&a.set)return a.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(Zn(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=$n(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===Pn||t===Oo)return!1;for(let n of e.props)if(Zn(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(Zn(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function ro(...e){return new Proxy({props:e},wc)}function _t(e,t,n,r){var i=!ur||(n&ou)!==0,a=(n&su)!==0,o=(n&uu)!==0,l=r,s=!0,u=()=>(s&&(s=!1,l=o?V(r):r),l),d;if(a){var f=Pn in e||Oo in e;d=$n(e,t)?.set??(f&&t in e?D=>e[t]=D:void 0)}var v,c=!1;a?[v,c]=bc(()=>e[t]):v=e[t],v===void 0&&r!==void 0&&(v=u(),d&&(i&&Xs(),d(v)));var g;if(i?g=()=>{var D=e[t];return D===void 0?u():(s=!0,D)}:g=()=>{var D=e[t];return D!==void 0&&(l=void 0),D===void 0?l:D},i&&(n&lu)===0)return g;if(d){var k=e.$$legacy;return(function(D,O){return arguments.length>0?((!i||!O||k||c)&&d(O?g():D),D):g()})}var m=!1,y=((n&au)!==0?Mr:Ii)(()=>(m=!1,g()));a&&x(y);var $=ye;return(function(D,O){if(arguments.length>0){const S=O?x(y):i&&a?kn(D):D;return se(y,S),m=!0,l!==void 0&&(l=S),D}return Nn&&m||($.f&Zt)!==0?y.v:x(y)})}function xc(e){Oe===null&&wi(),ur&&Oe.l!==null?Dl(Oe).m.push(e):Jt(()=>{const t=V(e);if(typeof t=="function")return t})}function Sc(e){Oe===null&&wi(),xc(()=>()=>V(e))}function kc(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Ec(){const e=Oe;return e===null&&wi(),(t,n,r)=>{const i=e.s.$$events?.[t];if(i){const a=mi(i)?i.slice():[i],o=kc(t,n,r);for(const l of a)l.call(e.x,o);return!o.defaultPrevented}return!0}}function $c(e){Oe===null&&wi(),Oe.l===null&&Qs(),Dl(Oe).a.push(e)}function Dl(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Ic="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ic);bu();yu();var Pc=F("<div><!></div>");function oe(e,t){var n=Pc();let r;var i=L(n);ht(i,()=>t.children??Re),N(n),pe(()=>r=Tt(n,1,"flex svelte-13pc1i9",null,r,{paddingVertical:t.padding==="vertical"||t.padding===!0,paddingHorizontal:t.padding==="horizontal"||t.padding===!0,column:t.column,full:t.full,nogap:t.nogap,justifyStart:t.justify==="start",justifyCenter:t.justify==="center",justifyEnd:t.justify==="end",justifyBetween:t.justify==="between",alignStart:t.align==="start",alignCenter:t.align==="center",alignEnd:t.align==="end",sm:t.sm,xl:t.xl,nogrow:t.nogrow})),A(e,n)}var Cc=F("<h1>oops! something went wrong.</h1> <pre> </pre> <button>oops! try again</button>",1),Tc=F("<h1>loading...</h1>"),Ac=F("<!> <!>",1);function Dc(e,t){var n=qt(),r=K(n);Go(r,{failed:(a,o=Re,l=Re)=>{var s=Cc(),u=P(K(s),2),d=L(u,!0);N(u);var f=P(u,2);f.__click=function(...v){l()?.apply(this,v)},pe(v=>Ye(d,v),[()=>JSON.stringify(o(),null,2)]),A(a,s)}},a=>{var o=Ac(),l=K(o);ht(l,()=>t.children??Re);var s=P(l,2);{var u=d=>{oe(d,{justify:"center",padding:!0,children:(f,v)=>{var c=Tc();A(f,c)}})};ze(s,d=>{Eu(Cu)&&d(u)})}A(a,o)}),A(e,n)}At(["click"]);const Rc="modulepreload",Nc=function(e){return"/dnd-character-sheet/"+e},io={},qr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var o=u;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),s=l?.nonce||l?.getAttribute("nonce");i=u(n.map(d=>{if(d=Nc(d),d in io)return;io[d]=!0;const f=d.endsWith(".css"),v=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const c=document.createElement("link");if(c.rel=f?"stylesheet":Rc,f||(c.as="script"),c.crossOrigin="",c.href=d,s&&c.setAttribute("nonce",s),document.head.appendChild(c),f)return new Promise((g,k)=>{c.addEventListener("load",g),c.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(l){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=l,window.dispatchEvent(s),!s.defaultPrevented)throw l}return i.then(l=>{for(const s of l||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};function Rl(e){return e>0?`+${e}`:e.toString()}function Ti(e){return Math.floor((e-10)/2)}function Oc(e){switch(e){case"none":return 0;case"proficient":return 1;case"double":return 2;case"half":return .5}}function Lc(e,t,n){const r=Oc(n),i=Ti(e);return Math.floor(i+t*r)}function zc(e){return Object.entries(e)}function Nl(e){const t=URL.createObjectURL(e);return new Promise((n,r)=>{const i=document.createElement("img");i.dispose=()=>{URL.revokeObjectURL(t)},i.onload=()=>{n(i)},i.onerror=()=>{r(new Error("Image could not be loaded"))},i.src=t})}function Fc(e,t){const n=e.indexOf(t),r=Array.from(e);return n===-1?r.push(t):r.splice(n,1),r}function Bc(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,"")}function Wi(e,t){const{[t]:n,...r}=e;return r}function Mc(){return(Date.now()+Math.floor(Math.random()*1e3)).toString(36)}function qc(e,t){const n=e.indexOf(t);if(n===-1)return[e,""];const r=e.slice(0,n),i=e.slice(n+t.length);return[r.trim(),i.trim()]}function Ol(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}const Ca=or([]);function pi(e,t="info"){const n={id:Mc(),message:e,type:t};Ca.update(r=>[...r,n])}function ao(e){Ca.update(t=>t.filter(n=>n.id!==e))}const jc=e=>e;function Hc(e){const t=e-1;return t*t*t+1}function oo(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Uc(e,{delay:t=0,duration:n=400,easing:r=jc}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:a=>`opacity: ${a*i}`}}function Vc(e,{delay:t=0,duration:n=400,easing:r=Hc,x:i=0,y:a=0,opacity:o=0}={}){const l=getComputedStyle(e),s=+l.opacity,u=l.transform==="none"?"":l.transform,d=s*(1-o),[f,v]=oo(i),[c,g]=oo(a);return{delay:t,duration:n,easing:r,css:(k,m)=>`
			transform: ${u} translate(${(1-k)*f}${v}, ${(1-k)*c}${g});
			opacity: ${s-d*m}`}}var Yc=F('<div><div class="inner svelte-foxhw6"><!></div></div>');function Je(e,t){var n=Yc();let r;var i=L(n),a=L(i);ht(a,()=>t.children??Re),N(i),N(n),pe(()=>r=Tt(n,1,"container svelte-foxhw6",null,r,{nopadding:t.nopadding,grid:t.grid,absolute:t.absolute,rounded:t.rounded,noshadow:t.noshadow,transparent:t.transparent,faded:t.faded,small:t.small,nogrow:t.nogrow,withHover:t.withHover,flex:t.flex})),A(e,n)}var Wc=F('<div class="message"> </div>'),Gc=F('<button type="button" class="container"><!></button>');function Qc(e,t){$e(t,!0);const n=4e3;let r=De(!1);function i(){ao(t.notification.id)}function a(){se(r,!0)}function o(){se(r,!1)}Jt(()=>{if(x(r))return;const u=setTimeout(()=>{ao(t.notification.id)},n);return()=>{clearTimeout(u)}});var l=Gc();l.__click=i;var s=L(l);Je(s,{children:(u,d)=>{var f=Wc(),v=L(f,!0);N(f),pe(()=>Ye(v,t.notification.message)),A(u,f)}}),N(l),Yt("mouseenter",l,a),Yt("mouseleave",l,o),Ka(1,l,()=>Vc,()=>({y:100,duration:300})),Ka(2,l,()=>Uc,()=>({duration:300})),A(e,l),Ie()}At(["click"]);var Xc=F('<div class="notification"><!></div>'),Kc=F('<div class="container hide-print svelte-1tpaxq5"></div>');function Zc(e){const t=()=>qe(Ca,"$notifications",n),[n,r]=it();var i=Kc();Wt(i,5,t,a=>a.id,(a,o)=>{var l=Xc(),s=L(l);Qc(s,{get notification(){return x(o)}}),N(l),A(a,l)}),N(i),A(e,i),r()}var Jc=Xu('<svg width="0" height="0" style="display: none;"><filter id="pencil"><feTurbulence type="fractalNoise" baseFrequency="0.5" numOctaves="1" result="noise"></feTurbulence><feDisplacementMap in="SourceGraphic" in2="noise"></feDisplacementMap></filter></svg>');function ef(e){let n=De(2.2);function r(){se(n,.8)}function i(){se(n,2.2)}var a=Jc();Yt("beforeprint",Rn,r),Yt("afterprint",Rn,i);var o=L(a),l=P(L(o));N(o),N(a),pe(()=>tn(l,"scale",x(n))),A(e,a)}function Ll(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,a,o=[],l="",s=e.split("/");for(s[0]||s.shift();i=s.shift();)n=i[0],n==="*"?(o.push("wild"),l+="/(.*)"):n===":"?(r=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~r?r:~a?a:i.length)),l+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~r?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+"/?$","i")}}function lo(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let r="";return n>-1&&(r=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:r}}const Ai=Tl(null,function(t){t(lo());const n=()=>{t(lo())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});Al(Ai,e=>e.location);Al(Ai,e=>e.querystring);const so=or(void 0);async function tf(e){if(!e||e.length<1||e.charAt(0)!="/"&&e.indexOf("#/")!==0)throw Error("Invalid parameter location");await Pi(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(e.charAt(0)=="#"?"":"#")+e}function Ta(e,t){if(t=co(t),!e||!e.tagName||e.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return uo(e,t),{update(n){n=co(n),uo(e,n)}}}function nf(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function uo(e,t){let n=t.href||e.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);e.setAttribute("href",n),e.addEventListener("click",r=>{r.preventDefault(),t.disabled||rf(r.currentTarget.getAttribute("href"))})}function co(e){return e&&typeof e=="string"?{href:e}:e||{}}function rf(e){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=e}function af(e,t){$e(t,!1);let n=_t(t,"routes",24,()=>({})),r=_t(t,"prefix",8,""),i=_t(t,"restoreScrollState",8,!1);class a{constructor(b,I){if(!I||typeof I!="function"&&(typeof I!="object"||I._sveltesparouter!==!0))throw Error("Invalid component object");if(!b||typeof b=="string"&&(b.length<1||b.charAt(0)!="/"&&b.charAt(0)!="*")||typeof b=="object"&&!(b instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:z,keys:B}=Ll(b);this.path=b,typeof I=="object"&&I._sveltesparouter===!0?(this.component=I.component,this.conditions=I.conditions||[],this.userData=I.userData,this.props=I.props||{}):(this.component=()=>Promise.resolve(I),this.conditions=[],this.props={}),this._pattern=z,this._keys=B}match(b){if(r()){if(typeof r()=="string")if(b.startsWith(r()))b=b.substr(r().length)||"/";else return null;else if(r()instanceof RegExp){const H=b.match(r());if(H&&H[0])b=b.substr(H[0].length)||"/";else return null}}const I=this._pattern.exec(b);if(I===null)return null;if(this._keys===!1)return I;const z={};let B=0;for(;B<this._keys.length;){try{z[this._keys[B]]=decodeURIComponent(I[B+1]||"")||null}catch{z[this._keys[B]]=null}B++}return z}async checkConditions(b){for(let I=0;I<this.conditions.length;I++)if(!await this.conditions[I](b))return!1;return!0}}const o=[];n()instanceof Map?n().forEach((S,b)=>{o.push(new a(b,S))}):Object.keys(n()).forEach(S=>{o.push(new a(S,n()[S]))});let l=Ir(null),s=Ir(null),u=Ir({});const d=Ec();async function f(S,b){await Pi(),d(S,b)}let v=null,c=null;i()&&(c=S=>{S.state&&(S.state.__svelte_spa_router_scrollY||S.state.__svelte_spa_router_scrollX)?v=S.state:v=null},window.addEventListener("popstate",c),$c(()=>{nf(v)}));let g=null,k=null;const m=Ai.subscribe(async S=>{g=S;let b=0;for(;b<o.length;){const I=o[b].match(S.location);if(!I){b++;continue}const z={route:o[b].path,location:S.location,querystring:S.querystring,userData:o[b].userData,params:I&&typeof I=="object"&&Object.keys(I).length?I:null};if(!await o[b].checkConditions(z)){se(l,null),k=null,f("conditionsFailed",z);return}f("routeLoading",Object.assign({},z));const B=o[b].component;if(k!=B){B.loading?(se(l,B.loading),k=B,se(s,B.loadingParams),se(u,{}),f("routeLoaded",Object.assign({},z,{component:x(l),name:x(l).name,params:x(s)}))):(se(l,null),k=null);const H=await B();if(S!=g)return;se(l,H&&H.default||H),k=B}I&&typeof I=="object"&&Object.keys(I).length?se(s,I):se(s,null),se(u,o[b].props),f("routeLoaded",Object.assign({},z,{component:x(l),name:x(l).name,params:x(s)})).then(()=>{so.set(x(s))});return}se(l,null),k=null,so.set(void 0)});Sc(()=>{m(),c&&window.removeEventListener("popstate",c)}),Bu(()=>$l(i()),()=>{history.scrollRestoration=i()?"manual":"auto"}),Mu(),Cl();var y=qt(),$=K(y);{var D=S=>{var b=qt(),I=K(b);Qa(I,()=>x(l),(z,B)=>{B(z,ro({get params(){return x(s)}},()=>x(u),{$$events:{routeEvent(H){no.call(this,t,H)}}}))}),A(S,b)},O=S=>{var b=qt(),I=K(b);Qa(I,()=>x(l),(z,B)=>{B(z,ro(()=>x(u),{$$events:{routeEvent(H){no.call(this,t,H)}}}))}),A(S,b)};ze($,S=>{x(s)?S(D):S(O,!1)})}A(e,y),Ie()}var of=F("<div></div>");function _e(e,t){var n=of();let r;pe(()=>r=Tt(n,1,"svelte-avds",null,r,{spread:t.spread,vertical:t.vertical})),A(e,n)}const Cr=1300,Tr=1e3;function lf(e,t,n=.4,r=!1,i=128){const a=e.width|0,o=e.height|0;if(a<=0||o<=0)return;const l=t.getImageData(0,0,a,o),s=l.data,d=Math.max(-1,Math.min(1,n))*255,f=259*(d+255)/(255*(259-d)),v=g=>g<0?0:g>255?255:g,c=g=>v(f*(g-128)+128);for(let g=0;g<s.length;g+=4){if(s[g+3]===0)continue;const m=s[g+0],y=s[g+1],$=s[g+2];if(r){const D=.2126*m+.7152*y+.0722*$,S=c(D)<i?0:255;s[g+0]=S,s[g+1]=S,s[g+2]=S}else s[g+0]=c(m),s[g+1]=c(y),s[g+2]=c($)}t.putImageData(l,0,0)}function sf(e,t,n,r){const i=t.getImageData(0,0,e.width,e.height),a=i.data,o=r*255,l=n*r*(255-r);for(let s=0;s<a.length;s+=4){const u=a[s],d=a[s+1],f=a[s+2],v=.299*u+.587*d+.114*f;let c=0;v>l&&(c=190),v>o&&(c=255),a[s]=c,a[s+1]=c,a[s+2]=c}t.putImageData(i,0,0)}function uf(e,t,n=6,r=45){const i=e.width|0,a=e.height|0;if(i<=0||a<=0)return;const l=t.getImageData(0,0,i,a).data,s=150,u=i*a,d=new Uint8Array(u),f=new Uint8Array(u);for(let I=0;I<u;I++){const z=I*4;if(l[z+3]===0){d[I]=255,f[I]=0;continue}const H=l[z+0],M=l[z+1],j=l[z+2],Y=.2126*H+.7152*M+.0722*j|0;d[I]=Y,f[I]=Y<=s?1:0}const v=document.createElement("canvas");v.width=i,v.height=a;const c=v.getContext("2d");if(!c)return;c.clearRect(0,0,i,a),c.fillStyle="#fff",c.fillRect(0,0,i,a),c.fillStyle="#000";const g=r*Math.PI/180,k=Math.cos(g),m=Math.sin(g),y=Math.max(2,Math.round(n*2)),$=i/2,D=a/2,O=Math.sqrt(i*i+a*a)/2;for(let I=-O;I<=O;I+=y)for(let z=-O;z<=O;z+=y){const B=$+z*k-I*m,H=D+z*m+I*k,M=B|0,j=H|0;if(M<0||M>=i||j<0||j>=a)continue;const Y=j*i+M,J=Y*4;if(l[J+3]===0||f[Y])continue;const te=(1-d[Y]/255)*n;te<=.15||(c.beginPath(),c.arc(B,H,te,0,Math.PI*2),c.fill())}const S=c.getImageData(0,0,i,a),b=S.data;for(let I=0;I<u;I++){const z=I*4,B=l[z+3];if(B===0){b[z+3]=0;continue}if(f[I]){const H=d[I];b[z+0]=H,b[z+1]=H,b[z+2]=H,b[z+3]=B}else b[z+3]=B}t.putImageData(S,0,0)}function cf(e,t,n,r,i){const a=e.getContext("2d");if(!a)return;const{width:o,height:l}=t;a.drawImage(t,n,r,o*i,l*i)}var ff=F('<div class="wrapper svelte-rcmikk"><div class="overlay svelte-rcmikk" data-html2canvas-ignore=""></div> <canvas class="svelte-rcmikk"></canvas></div>');function zl(e,t){$e(t,!0);let n=_t(t,"canvas",15),r=_t(t,"context",15);Jt(()=>{r(n()?.getContext("2d",{willReadFrequently:!0})??null)});var i=ff(),a=P(L(i),2);Hn(a,o=>n(o),()=>n()),N(i),pe(()=>{tn(a,"width",t.width),tn(a,"height",t.height)}),A(e,i),Ie()}var df=F('<div class="canvas svelte-nzlhga"><!></div>');function Aa(e,t){$e(t,!0);const n=Me(()=>t.avatar.blob);var r,i,a,o,l,s,u=Ei([async()=>r=await $i(async()=>x(n)?await Nl(x(n)):null),()=>i=De(null),()=>a=De(null),()=>o=Me(()=>t.avatar.contrast),()=>l=Me(()=>t.avatar.gray),()=>s=Me(()=>t.avatar.black),()=>{Jt(()=>{!x(r)||!x(a)||!x(i)||(x(a).clearRect(0,0,x(i).width,x(i).height),cf(x(i),x(r),t.avatar.x,t.avatar.y,t.avatar.scale),t.disableEffects||(lf(x(i),x(a),x(o)),sf(x(i),x(a),x(l),x(s)),uf(x(i),x(a),4,45)))})}]),d=df(),f=L(d);ft(f,[u[1],u[2]],void 0,v=>{zl(f,{get width(){return Tr},get height(){return Cr},get canvas(){return x(i)},set canvas(c){se(i,c,!0)},get context(){return x(a)},set context(c){se(a,c,!0)}})}),N(d),A(e,d),Ie()}var vf=F('<div class="inner svelte-l89b3q"><!></div>'),hf=F("<div><!></div>");function Da(e,t){var n=hf();let r;var i=L(n);Je(i,{withHover:!0,nopadding:!0,children:(a,o)=>{var l=vf(),s=L(l);ht(s,()=>t.children??Re),N(l),A(a,l)}}),N(n),pe(()=>r=Tt(n,1,"wrapper svelte-l89b3q",null,r,{pending:t.pending})),A(e,n)}var pf=F("<button><!></button>");function dt(e,t){$e(t,!0);const n=_t(t,"type",3,"button");let r=De(!1);function i(){x(r)||(se(r,!0),Promise.resolve(t.onclick?.()).finally(()=>{se(r,!1)}))}var a=pf();a.__click=i;let o;var l=L(a);Da(l,{get pending(){return x(r)},children:(s,u)=>{var d=qt(),f=K(d);ht(f,()=>t.children??Re),A(s,d)}}),N(a),pe(()=>{tn(a,"type",n()),o=Tt(a,1,"svelte-18sv61c",null,o,{pending:x(r)})}),A(e,a),Ie()}At(["click"]);var gf=F('<div class="dot svelte-6jkwtr"></div> <div class="dot svelte-6jkwtr"></div> <div class="dot svelte-6jkwtr"></div>',1),mf=F('<!> <div class="label"> </div>',1);function gi(e,t){oe(e,{column:!0,sm:!0,children:(n,r)=>{var i=mf(),a=K(i);oe(a,{sm:!0,children:(s,u)=>{var d=gf();xe(4),A(s,d)},$$slots:{default:!0}});var o=P(a,2),l=L(o,!0);N(o),pe(()=>Ye(l,t.label)),A(n,i)},$$slots:{default:!0}})}var _f=F('<div class="push svelte-1c0ge01"></div>');function Tn(e){var t=_f();A(e,t)}var yf=F('<div class="wrapper svelte-1mlq5p3"><!> <div class="inner"><!></div></div>');function Fl(e,t){var n=yf(),r=L(n);_e(r,{});var i=P(r,2),a=L(i);ht(a,()=>t.children??Re),N(i),N(n),A(e,n)}function Di(e,t){sc("1822nxv",n=>{ju(()=>{nl.title=t.title??""})})}var bf=F('<div class="divider svelte-1iq5b9c"><!></div>'),wf=F("<div><!></div> <!>",1);function Fe(e,t){const n=_t(t,"row",3,!1),r=_t(t,"cell",3,!1),i=Me(()=>{if(n())return;let f="";return t.cells&&(f+=`--cells:${t.cells};`),t.fillCell&&(f+=`--full:${t.fillCell};`),f||void 0});var a=wf(),o=K(a);let l;var s=L(o);ht(s,()=>t.children??Re),N(o);var u=P(o,2);{var d=f=>{var v=bf(),c=L(v);_e(c,{}),N(v),A(f,v)};ze(u,f=>{n()&&f(d)})}pe(()=>{fc(o,x(i)),l=Tt(o,1,"svelte-1iq5b9c",null,l,{table:n()===!1&&r()===!1,row:n(),cell:r(),centered:t.centered,right:t.right})}),A(e,a)}let Gi;function Bl(e){return{lang:e?.lang??Gi?.lang,message:e?.message,abortEarly:e?.abortEarly??Gi?.abortEarly,abortPipeEarly:e?.abortPipeEarly??Gi?.abortPipeEarly}}let xf;function Sf(e){return xf?.get(e)}let kf;function Ef(e){return kf?.get(e)}let $f;function If(e,t){return $f?.get(e)?.get(t)}function Ml(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function _n(e,t,n,r,i){const a=i&&"input"in i?i.input:n.value,o=i?.expected??e.expects??null,l=i?.received??Ml(a),s={kind:e.kind,type:e.type,input:a,expected:o,received:l,message:`Invalid ${t}: ${o?`Expected ${o} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},u=e.kind==="schema",d=i?.message??e.message??If(e.reference,s.lang)??(u?Ef(s.lang):null)??r.message??Sf(s.lang);d!==void 0&&(s.message=typeof d=="function"?d(s):d),u&&(n.typed=!1),n.issues?n.issues.push(s):n.issues=[s]}function on(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Bl())}}}function Pf(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}function fo(e,t){const n={};for(const r of e)n[r]=t;return n}var Cf=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ql(e){return{kind:"validation",type:"non_empty",reference:ql,async:!1,expects:"!0",message:e,"~run"(t,n){return t.typed&&t.value.length===0&&_n(this,"length",t,n,{received:"0"}),t}}}function Tf(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function Ra(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Jn(e,t){return{kind:"schema",type:"array",reference:Jn,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return on(this)},"~run"(n,r){const i=n.value;if(Array.isArray(i)){n.typed=!0,n.value=[];for(let a=0;a<i.length;a++){const o=i[a],l=this.item["~run"]({value:o},r);if(l.issues){const s={type:"array",origin:"value",input:i,key:a,value:o};for(const u of l.issues)u.path?u.path.unshift(s):u.path=[s],n.issues?.push(u);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value.push(l.value)}}else _n(this,"type",n,r);return n}}}function jl(e){return{kind:"schema",type:"boolean",reference:jl,expects:"boolean",async:!1,message:e,get"~standard"(){return on(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:_n(this,"type",t,n),t}}}function Hl(e,t){return{kind:"schema",type:"instance",reference:Hl,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return on(this)},"~run"(n,r){return n.value instanceof this.class?n.typed=!0:_n(this,"type",n,r),n}}}function Ul(e,t){return{kind:"schema",type:"nullable",reference:Ul,expects:`(${e.expects} | null)`,async:!1,wrapped:e,default:t,get"~standard"(){return on(this)},"~run"(n,r){return n.value===null&&(this.default!==void 0&&(n.value=Ra(this,n,r)),n.value===null)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function st(e){return{kind:"schema",type:"number",reference:st,expects:"number",async:!1,message:e,get"~standard"(){return on(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:_n(this,"type",t,n),t}}}function un(e,t){return{kind:"schema",type:"object",reference:un,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return on(this)},"~run"(n,r){const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const o=this.entries[a];if(a in i||(o.type==="exact_optional"||o.type==="optional"||o.type==="nullish")&&o.default!==void 0){const l=a in i?i[a]:Ra(o),s=o["~run"]({value:l},r);if(s.issues){const u={type:"object",origin:"value",input:i,key:a,value:l};for(const d of s.issues)d.path?d.path.unshift(u):d.path=[u],n.issues?.push(d);if(n.issues||(n.issues=s.issues),r.abortEarly){n.typed=!1;break}}s.typed||(n.typed=!1),n.value[a]=s.value}else if(o.fallback!==void 0)n.value[a]=Tf(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(_n(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),r.abortEarly))break}}else _n(this,"type",n,r);return n}}}function ae(e,t){return{kind:"schema",type:"optional",reference:ae,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return on(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Ra(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Ri(e,t){return{kind:"schema",type:"picklist",reference:Ri,expects:Pf(e.map(Ml),"|"),async:!1,options:e,message:t,get"~standard"(){return on(this)},"~run"(n,r){return this.options.includes(n.value)?n.typed=!0:_n(this,"type",n,r),n}}}function Le(e){return{kind:"schema",type:"string",reference:Le,expects:"string",async:!1,message:e,get"~standard"(){return on(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:_n(this,"type",t,n),t}}}function Vl(e,t,n){const r=e["~run"]({value:t},Bl(n));if(r.issues)throw new Cf(r.issues);return r.value}function Af(...e){return{...e[0],pipe:e,get"~standard"(){return on(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}const Df=["acrobatics","animalHandling","arcana","athletics","deception","history","insight","intimidation","investigation","medicine","nature","perception","performance","persuasion","religion","sleightOfHand","stealth","survival"],Yl=["str","dex","con","int","wis","cha"],Rf=["none","str","dex","con","int","wis","cha"],Nf=["none","proficient","double","half"],Of=Ri(Yl),Lf=Ri(Rf),zf=Ri(Nf),Ff=un({name:ae(Le(),""),hit:ae(st(),0),damage:ae(Le(),""),details:ae(Le(),"")}),Wl=un({name:ae(Le(),""),level:ae(st(),0),castingTime:ae(Le(),""),range:ae(Le(),""),components:ae(Le(),""),duration:ae(Le(),""),description:ae(Le(),""),notes:ae(Le(),""),prepared:ae(jl(),!0)}),Bf=un({blob:ae(Ul(Hl(Blob)),null),contrast:ae(st(),0),gray:ae(st(),.5),black:ae(st(),.25),x:ae(st(),0),y:ae(st(),0),scale:ae(st(),1)}),Mf=un({slug:Af(Le(),ql()),avatar:ae(Bf,{blob:null,contrast:1,gray:.5,black:.25,x:0,y:0,scale:1}),name:ae(Le(),""),playerName:ae(Le(),""),level:ae(st(),1),class:ae(Le(),""),subclass:ae(Le(),""),species:ae(Le(),""),size:ae(Le(),""),speed:ae(st(),30),background:ae(Le(),""),alignment:ae(Le(),""),armorClass:ae(st(),10),hitDice:ae(Le(),"1d8"),hitPoints:ae(st(),1),proficiencyBonus:ae(st(),2),proficienies:ae(Le(),""),abilityScores:ae(un(fo(Yl,ae(st(),10))),{str:10,dex:10,con:10,int:10,wis:10,cha:10}),abilityProficiencies:ae(Jn(Of),[]),skillProficiencies:ae(un(fo(Df,ae(zf,"none"))),{acrobatics:"none",animalHandling:"none",arcana:"none",athletics:"none",deception:"none",history:"none",insight:"none",intimidation:"none",investigation:"none",medicine:"none",nature:"none",perception:"none",performance:"none",persuasion:"none",religion:"none",sleightOfHand:"none",stealth:"none",survival:"none"}),languages:ae(Le(),""),features:ae(un({feats:ae(Le(),""),species:ae(Le(),""),class:ae(Le(),"")}),{feats:"",species:"",class:""}),weapons:ae(Jn(Ff),[]),spells:ae(Jn(Wl),[]),spellcastingAbility:ae(Lf,"none"),spellSlots:ae(Jn(un({level:ae(st(),1),amount:ae(st(),0)})),[]),inventory:ae(Jn(Le()),[])});function Ni(e){return Vl(Mf,e)}function Gl(e){try{return Ni(e)}catch{return null}}const qf={acrobatics:"dex",animalHandling:"wis",arcana:"int",athletics:"str",deception:"cha",history:"int",insight:"wis",intimidation:"cha",investigation:"int",medicine:"wis",nature:"int",perception:"wis",performance:"cha",persuasion:"cha",religion:"int",sleightOfHand:"dex",stealth:"dex",survival:"wis"},jf="/dnd-character-sheet/assets/belo-DO5QS6YM.jpg",Hf="/dnd-character-sheet/assets/belo-1j1Nv5tw.yml";async function Ql(e,t,n){const r=await Nl(e),i=r.width/r.height,a=t/n;let o,l,s;return i>a?(o=n/r.height,l=(t-r.width*o)/2,s=0):(o=t/r.width,l=0,s=(n-r.height*o)/2),r.dispose(),{x:l,y:s,scale:o}}var ai=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qi={exports:{}};var vo;function Uf(){return vo||(vo=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(r,i,a){function o(u,d){if(!i[u]){if(!r[u]){var f=typeof oi=="function"&&oi;if(!d&&f)return f(u,!0);if(l)return l(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var c=i[u]={exports:{}};r[u][0].call(c.exports,function(g){var k=r[u][1][g];return o(k||g)},c,c.exports,n,r,i,a)}return i[u].exports}for(var l=typeof oi=="function"&&oi,s=0;s<a.length;s++)o(a[s]);return o})({1:[function(n,r,i){(function(a){var o=a.MutationObserver||a.WebKitMutationObserver,l;if(o){var s=0,u=new o(g),d=a.document.createTextNode("");u.observe(d,{characterData:!0}),l=function(){d.data=s=++s%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var f=new a.MessageChannel;f.port1.onmessage=g,l=function(){f.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?l=function(){var m=a.document.createElement("script");m.onreadystatechange=function(){g(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},a.document.documentElement.appendChild(m)}:l=function(){setTimeout(g,0)};var v,c=[];function g(){v=!0;for(var m,y,$=c.length;$;){for(y=c,c=[],m=-1;++m<$;)y[m]();$=c.length}v=!1}r.exports=k;function k(m){c.push(m)===1&&!v&&l()}}).call(this,typeof ai<"u"?ai:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var a=n(1);function o(){}var l={},s=["REJECTED"],u=["FULFILLED"],d=["PENDING"];r.exports=f;function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,S!==o&&k(this,S)}f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,b){if(typeof S!="function"&&this.state===u||typeof b!="function"&&this.state===s)return this;var I=new this.constructor(o);if(this.state!==d){var z=this.state===u?S:b;c(I,z,this.outcome)}else this.queue.push(new v(I,S,b));return I};function v(S,b,I){this.promise=S,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(S){l.resolve(this.promise,S)},v.prototype.otherCallFulfilled=function(S){c(this.promise,this.onFulfilled,S)},v.prototype.callRejected=function(S){l.reject(this.promise,S)},v.prototype.otherCallRejected=function(S){c(this.promise,this.onRejected,S)};function c(S,b,I){a(function(){var z;try{z=b(I)}catch(B){return l.reject(S,B)}z===S?l.reject(S,new TypeError("Cannot resolve promise with itself")):l.resolve(S,z)})}l.resolve=function(S,b){var I=m(g,b);if(I.status==="error")return l.reject(S,I.value);var z=I.value;if(z)k(S,z);else{S.state=u,S.outcome=b;for(var B=-1,H=S.queue.length;++B<H;)S.queue[B].callFulfilled(b)}return S},l.reject=function(S,b){S.state=s,S.outcome=b;for(var I=-1,z=S.queue.length;++I<z;)S.queue[I].callRejected(b);return S};function g(S){var b=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof b=="function")return function(){b.apply(S,arguments)}}function k(S,b){var I=!1;function z(j){I||(I=!0,l.reject(S,j))}function B(j){I||(I=!0,l.resolve(S,j))}function H(){b(B,z)}var M=m(H);M.status==="error"&&z(M.value)}function m(S,b){var I={};try{I.value=S(b),I.status="success"}catch(z){I.status="error",I.value=z}return I}f.resolve=y;function y(S){return S instanceof this?S:l.resolve(new this(o),S)}f.reject=$;function $(S){var b=new this(o);return l.reject(b,S)}f.all=D;function D(S){var b=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=S.length,z=!1;if(!I)return this.resolve([]);for(var B=new Array(I),H=0,M=-1,j=new this(o);++M<I;)Y(S[M],M);return j;function Y(J,Z){b.resolve(J).then(te,function(re){z||(z=!0,l.reject(j,re))});function te(re){B[Z]=re,++H===I&&!z&&(z=!0,l.resolve(j,B))}}}f.race=O;function O(S){var b=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=S.length,z=!1;if(!I)return this.resolve([]);for(var B=-1,H=new this(o);++B<I;)M(S[B]);return H;function M(j){b.resolve(j).then(function(Y){z||(z=!0,l.resolve(H,Y))},function(Y){z||(z=!0,l.reject(H,Y))})}}},{1:1}],3:[function(n,r,i){(function(a){typeof a.Promise!="function"&&(a.Promise=n(2))}).call(this,typeof ai<"u"?ai:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};function o(h,E){if(!(h instanceof E))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var s=l();function u(){try{if(!s||!s.open)return!1;var h=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),E=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!h||E)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(h,E){h=h||[],E=E||{};try{return new Blob(h,E)}catch(C){if(C.name!=="TypeError")throw C;for(var p=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,T=new p,R=0;R<h.length;R+=1)T.append(h[R]);return T.getBlob(E.type)}}typeof Promise>"u"&&n(3);var f=Promise;function v(h,E){E&&h.then(function(p){E(null,p)},function(p){E(p)})}function c(h,E,p){typeof E=="function"&&h.then(E),typeof p=="function"&&h.catch(p)}function g(h){return typeof h!="string"&&(console.warn(h+" used as a key, but it is not a string."),h=String(h)),h}function k(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var m="local-forage-detect-blob-support",y=void 0,$={},D=Object.prototype.toString,O="readonly",S="readwrite";function b(h){for(var E=h.length,p=new ArrayBuffer(E),T=new Uint8Array(p),R=0;R<E;R++)T[R]=h.charCodeAt(R);return p}function I(h){return new f(function(E){var p=h.transaction(m,S),T=d([""]);p.objectStore(m).put(T,"key"),p.onabort=function(R){R.preventDefault(),R.stopPropagation(),E(!1)},p.oncomplete=function(){var R=navigator.userAgent.match(/Chrome\/(\d+)/),C=navigator.userAgent.match(/Edge\//);E(C||!R||parseInt(R[1],10)>=43)}}).catch(function(){return!1})}function z(h){return typeof y=="boolean"?f.resolve(y):I(h).then(function(E){return y=E,y})}function B(h){var E=$[h.name],p={};p.promise=new f(function(T,R){p.resolve=T,p.reject=R}),E.deferredOperations.push(p),E.dbReady?E.dbReady=E.dbReady.then(function(){return p.promise}):E.dbReady=p.promise}function H(h){var E=$[h.name],p=E.deferredOperations.pop();if(p)return p.resolve(),p.promise}function M(h,E){var p=$[h.name],T=p.deferredOperations.pop();if(T)return T.reject(E),T.promise}function j(h,E){return new f(function(p,T){if($[h.name]=$[h.name]||ge(),h.db)if(E)B(h),h.db.close();else return p(h.db);var R=[h.name];E&&R.push(h.version);var C=s.open.apply(s,R);E&&(C.onupgradeneeded=function(q){var U=C.result;try{U.createObjectStore(h.storeName),q.oldVersion<=1&&U.createObjectStore(m)}catch(W){if(W.name==="ConstraintError")console.warn('The database "'+h.name+'" has been upgraded from version '+q.oldVersion+" to version "+q.newVersion+', but the storage "'+h.storeName+'" already exists.');else throw W}}),C.onerror=function(q){q.preventDefault(),T(C.error)},C.onsuccess=function(){var q=C.result;q.onversionchange=function(U){U.target.close()},p(q),H(h)}})}function Y(h){return j(h,!1)}function J(h){return j(h,!0)}function Z(h,E){if(!h.db)return!0;var p=!h.db.objectStoreNames.contains(h.storeName),T=h.version<h.db.version,R=h.version>h.db.version;if(T&&(h.version!==E&&console.warn('The database "'+h.name+`" can't be downgraded from version `+h.db.version+" to version "+h.version+"."),h.version=h.db.version),R||p){if(p){var C=h.db.version+1;C>h.version&&(h.version=C)}return!0}return!1}function te(h){return new f(function(E,p){var T=new FileReader;T.onerror=p,T.onloadend=function(R){var C=btoa(R.target.result||"");E({__local_forage_encoded_blob:!0,data:C,type:h.type})},T.readAsBinaryString(h)})}function re(h){var E=b(atob(h.data));return d([E],{type:h.type})}function le(h){return h&&h.__local_forage_encoded_blob}function ve(h){var E=this,p=E._initReady().then(function(){var T=$[E._dbInfo.name];if(T&&T.dbReady)return T.dbReady});return c(p,h,h),p}function w(h){B(h);for(var E=$[h.name],p=E.forages,T=0;T<p.length;T++){var R=p[T];R._dbInfo.db&&(R._dbInfo.db.close(),R._dbInfo.db=null)}return h.db=null,Y(h).then(function(C){return h.db=C,Z(h)?J(h):C}).then(function(C){h.db=E.db=C;for(var q=0;q<p.length;q++)p[q]._dbInfo.db=C}).catch(function(C){throw M(h,C),C})}function ee(h,E,p,T){T===void 0&&(T=1);try{var R=h.db.transaction(h.storeName,E);p(null,R)}catch(C){if(T>0&&(!h.db||C.name==="InvalidStateError"||C.name==="NotFoundError"))return f.resolve().then(function(){if(!h.db||C.name==="NotFoundError"&&!h.db.objectStoreNames.contains(h.storeName)&&h.version<=h.db.version)return h.db&&(h.version=h.db.version+1),J(h)}).then(function(){return w(h).then(function(){ee(h,E,p,T-1)})}).catch(p);p(C)}}function ge(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _(h){var E=this,p={db:null};if(h)for(var T in h)p[T]=h[T];var R=$[p.name];R||(R=ge(),$[p.name]=R),R.forages.push(E),E._initReady||(E._initReady=E.ready,E.ready=ve);var C=[];function q(){return f.resolve()}for(var U=0;U<R.forages.length;U++){var W=R.forages[U];W!==E&&C.push(W._initReady().catch(q))}var G=R.forages.slice(0);return f.all(C).then(function(){return p.db=R.db,Y(p)}).then(function(X){return p.db=X,Z(p,E._defaultConfig.version)?J(p):X}).then(function(X){p.db=R.db=X,E._dbInfo=p;for(var ne=0;ne<G.length;ne++){var be=G[ne];be!==E&&(be._dbInfo.db=p.db,be._dbInfo.version=p.version)}})}function ue(h,E){var p=this;h=g(h);var T=new f(function(R,C){p.ready().then(function(){ee(p._dbInfo,O,function(q,U){if(q)return C(q);try{var W=U.objectStore(p._dbInfo.storeName),G=W.get(h);G.onsuccess=function(){var X=G.result;X===void 0&&(X=null),le(X)&&(X=re(X)),R(X)},G.onerror=function(){C(G.error)}}catch(X){C(X)}})}).catch(C)});return v(T,E),T}function me(h,E){var p=this,T=new f(function(R,C){p.ready().then(function(){ee(p._dbInfo,O,function(q,U){if(q)return C(q);try{var W=U.objectStore(p._dbInfo.storeName),G=W.openCursor(),X=1;G.onsuccess=function(){var ne=G.result;if(ne){var be=ne.value;le(be)&&(be=re(be));var Ae=h(be,ne.key,X++);Ae!==void 0?R(Ae):ne.continue()}else R()},G.onerror=function(){C(G.error)}}catch(ne){C(ne)}})}).catch(C)});return v(T,E),T}function ce(h,E,p){var T=this;h=g(h);var R=new f(function(C,q){var U;T.ready().then(function(){return U=T._dbInfo,D.call(E)==="[object Blob]"?z(U.db).then(function(W){return W?E:te(E)}):E}).then(function(W){ee(T._dbInfo,S,function(G,X){if(G)return q(G);try{var ne=X.objectStore(T._dbInfo.storeName);W===null&&(W=void 0);var be=ne.put(W,h);X.oncomplete=function(){W===void 0&&(W=null),C(W)},X.onabort=X.onerror=function(){var Ae=be.error?be.error:be.transaction.error;q(Ae)}}catch(Ae){q(Ae)}})}).catch(q)});return v(R,p),R}function ke(h,E){var p=this;h=g(h);var T=new f(function(R,C){p.ready().then(function(){ee(p._dbInfo,S,function(q,U){if(q)return C(q);try{var W=U.objectStore(p._dbInfo.storeName),G=W.delete(h);U.oncomplete=function(){R()},U.onerror=function(){C(G.error)},U.onabort=function(){var X=G.error?G.error:G.transaction.error;C(X)}}catch(X){C(X)}})}).catch(C)});return v(T,E),T}function Ee(h){var E=this,p=new f(function(T,R){E.ready().then(function(){ee(E._dbInfo,S,function(C,q){if(C)return R(C);try{var U=q.objectStore(E._dbInfo.storeName),W=U.clear();q.oncomplete=function(){T()},q.onabort=q.onerror=function(){var G=W.error?W.error:W.transaction.error;R(G)}}catch(G){R(G)}})}).catch(R)});return v(p,h),p}function Ce(h){var E=this,p=new f(function(T,R){E.ready().then(function(){ee(E._dbInfo,O,function(C,q){if(C)return R(C);try{var U=q.objectStore(E._dbInfo.storeName),W=U.count();W.onsuccess=function(){T(W.result)},W.onerror=function(){R(W.error)}}catch(G){R(G)}})}).catch(R)});return v(p,h),p}function He(h,E){var p=this,T=new f(function(R,C){if(h<0){R(null);return}p.ready().then(function(){ee(p._dbInfo,O,function(q,U){if(q)return C(q);try{var W=U.objectStore(p._dbInfo.storeName),G=!1,X=W.openKeyCursor();X.onsuccess=function(){var ne=X.result;if(!ne){R(null);return}h===0||G?R(ne.key):(G=!0,ne.advance(h))},X.onerror=function(){C(X.error)}}catch(ne){C(ne)}})}).catch(C)});return v(T,E),T}function We(h){var E=this,p=new f(function(T,R){E.ready().then(function(){ee(E._dbInfo,O,function(C,q){if(C)return R(C);try{var U=q.objectStore(E._dbInfo.storeName),W=U.openKeyCursor(),G=[];W.onsuccess=function(){var X=W.result;if(!X){T(G);return}G.push(X.key),X.continue()},W.onerror=function(){R(W.error)}}catch(X){R(X)}})}).catch(R)});return v(p,h),p}function Et(h,E){E=k.apply(this,arguments);var p=this.config();h=typeof h!="function"&&h||{},h.name||(h.name=h.name||p.name,h.storeName=h.storeName||p.storeName);var T=this,R;if(!h.name)R=f.reject("Invalid arguments");else{var C=h.name===p.name&&T._dbInfo.db,q=C?f.resolve(T._dbInfo.db):Y(h).then(function(U){var W=$[h.name],G=W.forages;W.db=U;for(var X=0;X<G.length;X++)G[X]._dbInfo.db=U;return U});h.storeName?R=q.then(function(U){if(U.objectStoreNames.contains(h.storeName)){var W=U.version+1;B(h);var G=$[h.name],X=G.forages;U.close();for(var ne=0;ne<X.length;ne++){var be=X[ne];be._dbInfo.db=null,be._dbInfo.version=W}var Ae=new f(function(Ne,Ke){var Xe=s.open(h.name,W);Xe.onerror=function(Nt){var wr=Xe.result;wr.close(),Ke(Nt)},Xe.onupgradeneeded=function(){var Nt=Xe.result;Nt.deleteObjectStore(h.storeName)},Xe.onsuccess=function(){var Nt=Xe.result;Nt.close(),Ne(Nt)}});return Ae.then(function(Ne){G.db=Ne;for(var Ke=0;Ke<X.length;Ke++){var Xe=X[Ke];Xe._dbInfo.db=Ne,H(Xe._dbInfo)}}).catch(function(Ne){throw(M(h,Ne)||f.resolve()).catch(function(){}),Ne})}}):R=q.then(function(U){B(h);var W=$[h.name],G=W.forages;U.close();for(var X=0;X<G.length;X++){var ne=G[X];ne._dbInfo.db=null}var be=new f(function(Ae,Ne){var Ke=s.deleteDatabase(h.name);Ke.onerror=function(){var Xe=Ke.result;Xe&&Xe.close(),Ne(Ke.error)},Ke.onblocked=function(){console.warn('dropInstance blocked for database "'+h.name+'" until all open connections are closed')},Ke.onsuccess=function(){var Xe=Ke.result;Xe&&Xe.close(),Ae(Xe)}});return be.then(function(Ae){W.db=Ae;for(var Ne=0;Ne<G.length;Ne++){var Ke=G[Ne];H(Ke._dbInfo)}}).catch(function(Ae){throw(M(h,Ae)||f.resolve()).catch(function(){}),Ae})})}return v(R,E),R}var Ue={_driver:"asyncStorage",_initStorage:_,_support:u(),iterate:me,getItem:ue,setItem:ce,removeItem:ke,clear:Ee,length:Ce,key:He,keys:We,dropInstance:Et};function wn(){return typeof openDatabase=="function"}var Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qe="~~local_forage_type~",at=/^~~local_forage_type~([^~]+)~/,Ve="__lfsc__:",bt=Ve.length,ln="arbf",vr="blob",Hr="si08",Ur="ui08",Vr="uic8",Yr="si16",Wr="si32",xn="ur16",Gr="ui32",Qr="fl32",hr="fl64",Xr=bt+ln.length,pr=Object.prototype.toString;function gr(h){var E=h.length*.75,p=h.length,T,R=0,C,q,U,W;h[h.length-1]==="="&&(E--,h[h.length-2]==="="&&E--);var G=new ArrayBuffer(E),X=new Uint8Array(G);for(T=0;T<p;T+=4)C=Ge.indexOf(h[T]),q=Ge.indexOf(h[T+1]),U=Ge.indexOf(h[T+2]),W=Ge.indexOf(h[T+3]),X[R++]=C<<2|q>>4,X[R++]=(q&15)<<4|U>>2,X[R++]=(U&3)<<6|W&63;return G}function mr(h){var E=new Uint8Array(h),p="",T;for(T=0;T<E.length;T+=3)p+=Ge[E[T]>>2],p+=Ge[(E[T]&3)<<4|E[T+1]>>4],p+=Ge[(E[T+1]&15)<<2|E[T+2]>>6],p+=Ge[E[T+2]&63];return E.length%3===2?p=p.substring(0,p.length-1)+"=":E.length%3===1&&(p=p.substring(0,p.length-2)+"=="),p}function Li(h,E){var p="";if(h&&(p=pr.call(h)),h&&(p==="[object ArrayBuffer]"||h.buffer&&pr.call(h.buffer)==="[object ArrayBuffer]")){var T,R=Ve;h instanceof ArrayBuffer?(T=h,R+=ln):(T=h.buffer,p==="[object Int8Array]"?R+=Hr:p==="[object Uint8Array]"?R+=Ur:p==="[object Uint8ClampedArray]"?R+=Vr:p==="[object Int16Array]"?R+=Yr:p==="[object Uint16Array]"?R+=xn:p==="[object Int32Array]"?R+=Wr:p==="[object Uint32Array]"?R+=Gr:p==="[object Float32Array]"?R+=Qr:p==="[object Float64Array]"?R+=hr:E(new Error("Failed to get type for BinaryArray"))),E(R+mr(T))}else if(p==="[object Blob]"){var C=new FileReader;C.onload=function(){var q=Qe+h.type+"~"+mr(this.result);E(Ve+vr+q)},C.readAsArrayBuffer(h)}else try{E(JSON.stringify(h))}catch(q){console.error("Couldn't convert value into a JSON string: ",h),E(null,q)}}function zi(h){if(h.substring(0,bt)!==Ve)return JSON.parse(h);var E=h.substring(Xr),p=h.substring(bt,Xr),T;if(p===vr&&at.test(E)){var R=E.match(at);T=R[1],E=E.substring(R[0].length)}var C=gr(E);switch(p){case ln:return C;case vr:return d([C],{type:T});case Hr:return new Int8Array(C);case Ur:return new Uint8Array(C);case Vr:return new Uint8ClampedArray(C);case Yr:return new Int16Array(C);case xn:return new Uint16Array(C);case Wr:return new Int32Array(C);case Gr:return new Uint32Array(C);case Qr:return new Float32Array(C);case hr:return new Float64Array(C);default:throw new Error("Unkown type: "+p)}}var _r={serialize:Li,deserialize:zi,stringToBuffer:gr,bufferToString:mr};function Kr(h,E,p,T){h.executeSql("CREATE TABLE IF NOT EXISTS "+E.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],p,T)}function Fi(h){var E=this,p={db:null};if(h)for(var T in h)p[T]=typeof h[T]!="string"?h[T].toString():h[T];var R=new f(function(C,q){try{p.db=openDatabase(p.name,String(p.version),p.description,p.size)}catch(U){return q(U)}p.db.transaction(function(U){Kr(U,p,function(){E._dbInfo=p,C()},function(W,G){q(G)})},q)});return p.serializer=_r,R}function Gt(h,E,p,T,R,C){h.executeSql(p,T,R,function(q,U){U.code===U.SYNTAX_ERR?q.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[E.storeName],function(W,G){G.rows.length?C(W,U):Kr(W,E,function(){W.executeSql(p,T,R,C)},C)},C):C(q,U)},C)}function Zr(h,E){var p=this;h=g(h);var T=new f(function(R,C){p.ready().then(function(){var q=p._dbInfo;q.db.transaction(function(U){Gt(U,q,"SELECT * FROM "+q.storeName+" WHERE key = ? LIMIT 1",[h],function(W,G){var X=G.rows.length?G.rows.item(0).value:null;X&&(X=q.serializer.deserialize(X)),R(X)},function(W,G){C(G)})})}).catch(C)});return v(T,E),T}function Bi(h,E){var p=this,T=new f(function(R,C){p.ready().then(function(){var q=p._dbInfo;q.db.transaction(function(U){Gt(U,q,"SELECT * FROM "+q.storeName,[],function(W,G){for(var X=G.rows,ne=X.length,be=0;be<ne;be++){var Ae=X.item(be),Ne=Ae.value;if(Ne&&(Ne=q.serializer.deserialize(Ne)),Ne=h(Ne,Ae.key,be+1),Ne!==void 0){R(Ne);return}}R()},function(W,G){C(G)})})}).catch(C)});return v(T,E),T}function Jr(h,E,p,T){var R=this;h=g(h);var C=new f(function(q,U){R.ready().then(function(){E===void 0&&(E=null);var W=E,G=R._dbInfo;G.serializer.serialize(E,function(X,ne){ne?U(ne):G.db.transaction(function(be){Gt(be,G,"INSERT OR REPLACE INTO "+G.storeName+" (key, value) VALUES (?, ?)",[h,X],function(){q(W)},function(Ae,Ne){U(Ne)})},function(be){if(be.code===be.QUOTA_ERR){if(T>0){q(Jr.apply(R,[h,W,p,T-1]));return}U(be)}})})}).catch(U)});return v(C,p),C}function Mi(h,E,p){return Jr.apply(this,[h,E,p,1])}function Q(h,E){var p=this;h=g(h);var T=new f(function(R,C){p.ready().then(function(){var q=p._dbInfo;q.db.transaction(function(U){Gt(U,q,"DELETE FROM "+q.storeName+" WHERE key = ?",[h],function(){R()},function(W,G){C(G)})})}).catch(C)});return v(T,E),T}function ie(h){var E=this,p=new f(function(T,R){E.ready().then(function(){var C=E._dbInfo;C.db.transaction(function(q){Gt(q,C,"DELETE FROM "+C.storeName,[],function(){T()},function(U,W){R(W)})})}).catch(R)});return v(p,h),p}function nt(h){var E=this,p=new f(function(T,R){E.ready().then(function(){var C=E._dbInfo;C.db.transaction(function(q){Gt(q,C,"SELECT COUNT(key) as c FROM "+C.storeName,[],function(U,W){var G=W.rows.item(0).c;T(G)},function(U,W){R(W)})})}).catch(R)});return v(p,h),p}function $t(h,E){var p=this,T=new f(function(R,C){p.ready().then(function(){var q=p._dbInfo;q.db.transaction(function(U){Gt(U,q,"SELECT key FROM "+q.storeName+" WHERE id = ? LIMIT 1",[h+1],function(W,G){var X=G.rows.length?G.rows.item(0).key:null;R(X)},function(W,G){C(G)})})}).catch(C)});return v(T,E),T}function Dt(h){var E=this,p=new f(function(T,R){E.ready().then(function(){var C=E._dbInfo;C.db.transaction(function(q){Gt(q,C,"SELECT key FROM "+C.storeName,[],function(U,W){for(var G=[],X=0;X<W.rows.length;X++)G.push(W.rows.item(X).key);T(G)},function(U,W){R(W)})})}).catch(R)});return v(p,h),p}function Ut(h){return new f(function(E,p){h.transaction(function(T){T.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(R,C){for(var q=[],U=0;U<C.rows.length;U++)q.push(C.rows.item(U).name);E({db:h,storeNames:q})},function(R,C){p(C)})},function(T){p(T)})})}function Rt(h,E){E=k.apply(this,arguments);var p=this.config();h=typeof h!="function"&&h||{},h.name||(h.name=h.name||p.name,h.storeName=h.storeName||p.storeName);var T=this,R;return h.name?R=new f(function(C){var q;h.name===p.name?q=T._dbInfo.db:q=openDatabase(h.name,"","",0),h.storeName?C({db:q,storeNames:[h.storeName]}):C(Ut(q))}).then(function(C){return new f(function(q,U){C.db.transaction(function(W){function G(Ae){return new f(function(Ne,Ke){W.executeSql("DROP TABLE IF EXISTS "+Ae,[],function(){Ne()},function(Xe,Nt){Ke(Nt)})})}for(var X=[],ne=0,be=C.storeNames.length;ne<be;ne++)X.push(G(C.storeNames[ne]));f.all(X).then(function(){q()}).catch(function(Ae){U(Ae)})},function(W){U(W)})})}):R=f.reject("Invalid arguments"),v(R,E),R}var ei={_driver:"webSQLStorage",_initStorage:Fi,_support:wn(),iterate:Bi,getItem:Zr,setItem:Mi,removeItem:Q,clear:ie,length:nt,key:$t,keys:Dt,dropInstance:Rt};function ti(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function yr(h,E){var p=h.name+"/";return h.storeName!==E.storeName&&(p+=h.storeName+"/"),p}function ps(){var h="_localforage_support_test";try{return localStorage.setItem(h,!0),localStorage.removeItem(h),!1}catch{return!0}}function gs(){return!ps()||localStorage.length>0}function ms(h){var E=this,p={};if(h)for(var T in h)p[T]=h[T];return p.keyPrefix=yr(h,E._defaultConfig),gs()?(E._dbInfo=p,p.serializer=_r,f.resolve()):f.reject()}function _s(h){var E=this,p=E.ready().then(function(){for(var T=E._dbInfo.keyPrefix,R=localStorage.length-1;R>=0;R--){var C=localStorage.key(R);C.indexOf(T)===0&&localStorage.removeItem(C)}});return v(p,h),p}function ys(h,E){var p=this;h=g(h);var T=p.ready().then(function(){var R=p._dbInfo,C=localStorage.getItem(R.keyPrefix+h);return C&&(C=R.serializer.deserialize(C)),C});return v(T,E),T}function bs(h,E){var p=this,T=p.ready().then(function(){for(var R=p._dbInfo,C=R.keyPrefix,q=C.length,U=localStorage.length,W=1,G=0;G<U;G++){var X=localStorage.key(G);if(X.indexOf(C)===0){var ne=localStorage.getItem(X);if(ne&&(ne=R.serializer.deserialize(ne)),ne=h(ne,X.substring(q),W++),ne!==void 0)return ne}}});return v(T,E),T}function ws(h,E){var p=this,T=p.ready().then(function(){var R=p._dbInfo,C;try{C=localStorage.key(h)}catch{C=null}return C&&(C=C.substring(R.keyPrefix.length)),C});return v(T,E),T}function xs(h){var E=this,p=E.ready().then(function(){for(var T=E._dbInfo,R=localStorage.length,C=[],q=0;q<R;q++){var U=localStorage.key(q);U.indexOf(T.keyPrefix)===0&&C.push(U.substring(T.keyPrefix.length))}return C});return v(p,h),p}function Ss(h){var E=this,p=E.keys().then(function(T){return T.length});return v(p,h),p}function ks(h,E){var p=this;h=g(h);var T=p.ready().then(function(){var R=p._dbInfo;localStorage.removeItem(R.keyPrefix+h)});return v(T,E),T}function Es(h,E,p){var T=this;h=g(h);var R=T.ready().then(function(){E===void 0&&(E=null);var C=E;return new f(function(q,U){var W=T._dbInfo;W.serializer.serialize(E,function(G,X){if(X)U(X);else try{localStorage.setItem(W.keyPrefix+h,G),q(C)}catch(ne){(ne.name==="QuotaExceededError"||ne.name==="NS_ERROR_DOM_QUOTA_REACHED")&&U(ne),U(ne)}})})});return v(R,p),R}function $s(h,E){if(E=k.apply(this,arguments),h=typeof h!="function"&&h||{},!h.name){var p=this.config();h.name=h.name||p.name,h.storeName=h.storeName||p.storeName}var T=this,R;return h.name?R=new f(function(C){h.storeName?C(yr(h,T._defaultConfig)):C(h.name+"/")}).then(function(C){for(var q=localStorage.length-1;q>=0;q--){var U=localStorage.key(q);U.indexOf(C)===0&&localStorage.removeItem(U)}}):R=f.reject("Invalid arguments"),v(R,E),R}var Is={_driver:"localStorageWrapper",_initStorage:ms,_support:ti(),iterate:bs,getItem:ys,setItem:Es,removeItem:ks,clear:_s,length:Ss,key:ws,keys:xs,dropInstance:$s},Ps=function(E,p){return E===p||typeof E=="number"&&typeof p=="number"&&isNaN(E)&&isNaN(p)},Cs=function(E,p){for(var T=E.length,R=0;R<T;){if(Ps(E[R],p))return!0;R++}return!1},za=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"},br={},Fa={},Wn={INDEXEDDB:Ue,WEBSQL:ei,LOCALSTORAGE:Is},Ts=[Wn.INDEXEDDB._driver,Wn.WEBSQL._driver,Wn.LOCALSTORAGE._driver],ni=["dropInstance"],qi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ni),As={description:"",driver:Ts.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ds(h,E){h[E]=function(){var p=arguments;return h.ready().then(function(){return h[E].apply(h,p)})}}function ji(){for(var h=1;h<arguments.length;h++){var E=arguments[h];if(E)for(var p in E)E.hasOwnProperty(p)&&(za(E[p])?arguments[0][p]=E[p].slice():arguments[0][p]=E[p])}return arguments[0]}var Rs=(function(){function h(E){o(this,h);for(var p in Wn)if(Wn.hasOwnProperty(p)){var T=Wn[p],R=T._driver;this[p]=R,br[R]||this.defineDriver(T)}this._defaultConfig=ji({},As),this._config=ji({},this._defaultConfig,E),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return h.prototype.config=function(p){if((typeof p>"u"?"undefined":a(p))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var T in p){if(T==="storeName"&&(p[T]=p[T].replace(/\W/g,"_")),T==="version"&&typeof p[T]!="number")return new Error("Database version must be a number.");this._config[T]=p[T]}return"driver"in p&&p.driver?this.setDriver(this._config.driver):!0}else return typeof p=="string"?this._config[p]:this._config},h.prototype.defineDriver=function(p,T,R){var C=new f(function(q,U){try{var W=p._driver,G=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!p._driver){U(G);return}for(var X=qi.concat("_initStorage"),ne=0,be=X.length;ne<be;ne++){var Ae=X[ne],Ne=!Cs(ni,Ae);if((Ne||p[Ae])&&typeof p[Ae]!="function"){U(G);return}}var Ke=function(){for(var wr=function(Ls){return function(){var zs=new Error("Method "+Ls+" is not implemented by the current driver"),Ba=f.reject(zs);return v(Ba,arguments[arguments.length-1]),Ba}},Hi=0,Os=ni.length;Hi<Os;Hi++){var Ui=ni[Hi];p[Ui]||(p[Ui]=wr(Ui))}};Ke();var Xe=function(wr){br[W]&&console.info("Redefining LocalForage driver: "+W),br[W]=p,Fa[W]=wr,q()};"_support"in p?p._support&&typeof p._support=="function"?p._support().then(Xe,U):Xe(!!p._support):Xe(!0)}catch(Nt){U(Nt)}});return c(C,T,R),C},h.prototype.driver=function(){return this._driver||null},h.prototype.getDriver=function(p,T,R){var C=br[p]?f.resolve(br[p]):f.reject(new Error("Driver not found."));return c(C,T,R),C},h.prototype.getSerializer=function(p){var T=f.resolve(_r);return c(T,p),T},h.prototype.ready=function(p){var T=this,R=T._driverSet.then(function(){return T._ready===null&&(T._ready=T._initDriver()),T._ready});return c(R,p,p),R},h.prototype.setDriver=function(p,T,R){var C=this;za(p)||(p=[p]);var q=this._getSupportedDrivers(p);function U(){C._config.driver=C.driver()}function W(ne){return C._extend(ne),U(),C._ready=C._initStorage(C._config),C._ready}function G(ne){return function(){var be=0;function Ae(){for(;be<ne.length;){var Ne=ne[be];return be++,C._dbInfo=null,C._ready=null,C.getDriver(Ne).then(W).catch(Ae)}U();var Ke=new Error("No available storage method found.");return C._driverSet=f.reject(Ke),C._driverSet}return Ae()}}var X=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=X.then(function(){var ne=q[0];return C._dbInfo=null,C._ready=null,C.getDriver(ne).then(function(be){C._driver=be._driver,U(),C._wrapLibraryMethodsWithReady(),C._initDriver=G(q)})}).catch(function(){U();var ne=new Error("No available storage method found.");return C._driverSet=f.reject(ne),C._driverSet}),c(this._driverSet,T,R),this._driverSet},h.prototype.supports=function(p){return!!Fa[p]},h.prototype._extend=function(p){ji(this,p)},h.prototype._getSupportedDrivers=function(p){for(var T=[],R=0,C=p.length;R<C;R++){var q=p[R];this.supports(q)&&T.push(q)}return T},h.prototype._wrapLibraryMethodsWithReady=function(){for(var p=0,T=qi.length;p<T;p++)Ds(this,qi[p])},h.prototype.createInstance=function(p){return new h(p)},h})(),Ns=new Rs;r.exports=Ns},{3:3}]},{},[4])(4)})})(Qi)),Qi.exports}var Vf=Uf();const Yf=Xl(Vf),jr=Yf.createInstance({name:"dnd-character-sheet",storeName:"characters"});async function Wf(){const e=[];return await jr.iterate(t=>{const n=Gl(t);n&&e.push(n)}),e}async function Gf(e,t){const n=Ni({slug:e,name:t});return await jr.setItem(e,n),n}async function Kl(e){try{const t=await jr.getItem(e);return t===null?null:Gl(t)}catch{return null}}async function Qf(e){await jr.setItem(e.slug,e)}async function Xf(e){await jr.removeItem(e)}async function Kf(e,t){const{parse:n}=await qr(async()=>{const{parse:s}=await import("./index--Ug0Gu6p.js");return{parse:s}},[]),r=await fetch(jf).then(s=>s.blob()),i=await fetch(Hf).then(s=>s.text()),a=n(i),o=Ni({...a,slug:e}),l=await Ql(r,Tr,Cr);o.avatar={...o.avatar,blob:r,...l},t.set(o)}function Zf(e=0,t=0){const n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("Could not obtain context.");return{canvas:n,context:r,destroy(){n.width=0,n.height=0}}}async function Jf(e){const{canvas:t,context:n}=Zf(),{html2canvas:r}=await qr(async()=>{const{html2canvas:o}=await import("./html2canvas-pro.esm-CcCRWITZ.js");return{html2canvas:o}},[]),i={"--color-white":"white","--color-black":"black","--color-paper":"white","--color-ink":"black","--color-faded:":"#ccc",color:"black",padding:"1em"};for(const[o,l]of Object.entries(i))e.style.setProperty(o,l);const a=await r(e,{backgroundColor:null,scale:2});for(const o of Object.keys(i))e.style.removeProperty(o);return t.width=a.width,t.height=a.height,n.filter='url("#pencil")',n.drawImage(a,0,0),t}var ed=F('<p class="svelte-12j65zy">Damage taken</p> <!> <!>',1),td=F('<p class="svelte-12j65zy">Temp. HP</p> <!> <!>',1),nd=F('<p class="svelte-12j65zy">Death saves:</p> <!> <!> <!>',1),rd=F("<!> <!> <!>",1),id=F("<!> <!>",1),ad=F("<span>Level</span>"),od=F("<span>Slots</span>"),ld=F("<!> <!>",1),sd=F('<div class="dot svelte-12j65zy"></div>'),ud=F("<!> <!>",1),cd=F("<!> <!>",1),fd=F('<h1 class="svelte-12j65zy"> </h1> <!> <!>',1),dd=F('<div class="wrapper svelte-12j65zy"><!></div> <!>',1),vd=F('<h1 class="svelte-12j65zy">No character found for slug: <code> </code></h1> <a href="/">Go back to character select</a>',1),hd=F("<!> <!>",1);function pd(e,t){$e(t,!0);async function n(){try{if(!x(i)||!x(r))return;const u=await Jf(x(i)),d=await new Promise(f=>u.toBlob(f,"image/png"));if(!d)throw new Error("Couldn't retrieve blob");await Ol(d,`Mini sheet ${x(r).name}.png`)}catch{pi("Something went wrong downloading the image.")}}var r,i,a=Ei([async()=>r=await $i(()=>Kl(t.params.slug)),()=>i=De(null)]),o=hd(),l=K(o);ft(l,[a[0]],void 0,u=>{let d=Me(()=>x(r)?`${x(r).name}`:"Not Found");Di(l,{get title(){return x(d)}})});var s=P(l,2);ft(s,[a[0]],[()=>x(r)],(u,d)=>{var f=c=>{oe(c,{column:!0,align:"center",children:(g,k)=>{var m=dd(),y=K(m),$=L(y);Je($,{children:(O,S)=>{oe(O,{column:!0,children:(b,I)=>{var z=fd(),B=K(z),H=L(B,!0);N(B);var M=P(B,2);oe(M,{children:(Y,J)=>{var Z=id(),te=K(Z);Je(te,{small:!0,noshadow:!0,nopadding:!0,children:(le,ve)=>{ft(le,[a[0]],void 0,w=>{Aa(w,{get avatar(){return x(r).avatar}})})},$$slots:{default:!0}});var re=P(te,2);oe(re,{column:!0,children:(le,ve)=>{var w=rd(),ee=K(w);Je(ee,{flex:!0,small:!0,noshadow:!0,children:(ue,me)=>{oe(ue,{column:!0,children:(ce,ke)=>{var Ee=ed(),Ce=P(K(Ee),2);Tn(Ce,{});var He=P(Ce,2);_e(He,{}),A(ce,Ee)},$$slots:{default:!0}})},$$slots:{default:!0}});var ge=P(ee,2);Je(ge,{flex:!0,small:!0,noshadow:!0,children:(ue,me)=>{oe(ue,{column:!0,children:(ce,ke)=>{var Ee=td(),Ce=P(K(Ee),2);Tn(Ce,{});var He=P(Ce,2);_e(He,{}),A(ce,Ee)},$$slots:{default:!0}})},$$slots:{default:!0}});var _=P(ge,2);oe(_,{column:!0,sm:!0,children:(ue,me)=>{var ce=nd(),ke=P(K(ce),2);Tn(ke,{});var Ee=P(ke,2);gi(Ee,{label:"Success"});var Ce=P(Ee,2);gi(Ce,{label:"Failures"}),A(ue,ce)},$$slots:{default:!0}}),A(le,w)},$$slots:{default:!0}}),A(Y,Z)},$$slots:{default:!0}});var j=P(M,2);ft(j,[a[0]],[()=>x(r).spells.length>0&&x(r).spellSlots.length>0],(Y,J)=>{var Z=te=>{Fe(te,{children:(re,le)=>{var ve=cd(),w=K(ve);Fe(w,{row:!0,children:(ge,_)=>{var ue=ld(),me=K(ue);Fe(me,{cell:!0,right:!0,children:(ke,Ee)=>{var Ce=ad();A(ke,Ce)},$$slots:{default:!0}});var ce=P(me,2);Fe(ce,{cell:!0,children:(ke,Ee)=>{var Ce=od();A(ke,Ce)},$$slots:{default:!0}}),A(ge,ue)},$$slots:{default:!0}});var ee=P(w,2);ft(ee,[a[0]],[()=>x(r).spellSlots],(ge,_)=>{Wt(ge,17,()=>x(_),mn,(ue,me)=>{Fe(ue,{row:!0,children:(ce,ke)=>{var Ee=ud(),Ce=K(Ee);Fe(Ce,{cell:!0,right:!0,children:(We,Et)=>{xe();var Ue=Ze();pe(()=>Ye(Ue,x(me).level)),A(We,Ue)},$$slots:{default:!0}});var He=P(Ce,2);Fe(He,{cell:!0,children:(We,Et)=>{oe(We,{sm:!0,children:(Ue,wn)=>{var Ge=qt(),Qe=K(Ge);Wt(Qe,17,()=>Array.from({length:x(me).amount}),mn,(at,Ve)=>{var bt=sd();A(at,bt)}),A(Ue,Ge)},$$slots:{default:!0}})},$$slots:{default:!0}}),A(ce,Ee)},$$slots:{default:!0}})})}),A(re,ve)},$$slots:{default:!0}})};ze(Y,te=>{x(J)&&te(Z)})}),pe(()=>Ye(H,x(r).name),void 0,void 0,[a[0]]),A(b,z)},$$slots:{default:!0}})},$$slots:{default:!0}}),N(y),Xo([a[1]],()=>{Hn(y,O=>se(i,O),()=>x(i))});var D=P(y,2);ft(D,[a[1]],void 0,O=>{dt(D,{get onclick(){return n},children:(S,b)=>{xe();var I=Ze("Download");A(S,I)},$$slots:{default:!0}})}),A(g,m)},$$slots:{default:!0}})},v=c=>{var g=vd(),k=K(g),m=P(L(k)),y=L(m,!0);N(m),N(k);var $=P(k,2);Ci($,D=>Ta?.(D)),pe(()=>Ye(y,t.params.slug),void 0,void 0,[a[0]]),A(c,g)};ze(u,c=>{x(d)?c(f):c(v,!1)})}),A(e,o),Ie()}var gd=F('<div class="grid svelte-1hhz0mg"><div class="inner svelte-1hhz0mg"><!></div></div>');function md(e,t){var n=gd(),r=L(n),i=L(r);ht(i,()=>t.children??Re),N(r),N(n),A(e,n)}var _d=F('<h1 class="svelte-1udyrqm"> </h1> <!>',1),yd=F('<div class="padding svelte-1udyrqm"><!></div>'),bd=F('<div class="children svelte-1udyrqm"><!></div>'),wd=F('<div class="inner svelte-1udyrqm"><!> <!></div>');function Ft(e,t){Je(e,{get grid(){return t.grid},nopadding:!0,children:(n,r)=>{var i=wd(),a=L(i);{var o=u=>{var d=_d(),f=K(d),v=L(f,!0);N(f);var c=P(f,2);_e(c,{}),pe(()=>Ye(v,t.title)),A(u,d)};ze(a,u=>{t.title&&u(o)})}var l=P(a,2);{var s=u=>{var d=bd(),f=L(d);{var v=g=>{md(g,{children:(k,m)=>{var y=qt(),$=K(y);ht($,()=>t.children),A(k,y)}})},c=g=>{var k=yd(),m=L(k);ht(m,()=>t.children),N(k),A(g,k)};ze(f,g=>{t.grid?g(v):g(c,!1)})}N(d),A(u,d)};ze(l,u=>{t.children&&u(s)})}N(i),A(n,i)},$$slots:{default:!0}})}var xd=F("<span> </span>"),Sd=F("<span> </span>"),kd=F("<p> </p> <p><!> <!></p>",1),Ed=F("<span>View Sheet</span>"),$d=F("<a><!></a> <!>",1),Id=F('<!> <!> <!> <!> <div class="bottom svelte-19e1lap"><!></div>',1);function Pd(e,t){$e(t,!0),Ft(e,{get title(){return t.character.name},children:(n,r)=>{oe(n,{column:!0,children:(i,a)=>{var o=Id(),l=K(o);Je(l,{nopadding:!0,noshadow:!0,small:!0,children:(c,g)=>{Aa(c,{get avatar(){return t.character.avatar}})}});var s=P(l,2);oe(s,{column:!0,children:(c,g)=>{var k=kd(),m=K(k),y=L(m);N(m);var $=P(m,2),D=L($);{var O=I=>{var z=xd(),B=L(z);N(z),pe(()=>Ye(B,`Class: ${t.character.class??""}`)),A(I,z)};ze(D,I=>{t.character.class&&I(O)})}var S=P(D,2);{var b=I=>{var z=Sd(),B=L(z);N(z),pe(()=>Ye(B,`(${t.character.subclass??""})`)),A(I,z)};ze(S,I=>{t.character.subclass&&I(b)})}N($),pe(()=>Ye(y,`Level: ${t.character.level??""}`)),A(c,k)},$$slots:{default:!0}});var u=P(s,2);Tn(u);var d=P(u,2);_e(d,{});var f=P(d,2),v=L(f);oe(v,{justify:"start",children:(c,g)=>{var k=$d(),m=K(k),y=L(m);Da(y,{children:(O,S)=>{var b=Ed();A(O,b)}}),N(m),Ci(m,O=>Ta?.(O));var $=P(m,2);{var D=O=>{dt(O,{get onclick(){return t.onDelete},children:(S,b)=>{xe();var I=Ze("Delete");A(S,I)},$$slots:{default:!0}})};ze($,O=>{t.onDelete&&O(D)})}pe(O=>tn(m,"href",O),[()=>En.characterSheet(t.character.slug)]),A(c,k)},$$slots:{default:!0}}),N(f),A(i,o)},$$slots:{default:!0}})}}),Ie()}var Cd=F('<div class="modal svelte-ta60gp"><div><!></div></div>');function Td(e,t){$e(t,!0);function n(o){o.key==="Escape"&&(o.stopPropagation(),o.preventDefault(),t.onclose?.())}var r=Cd();Yt("keydown",Rn,n);var i=L(r),a=L(i);Ft(a,{get title(){return t.title},children:(o,l)=>{var s=qt(),u=K(s);ht(u,()=>t.children??Re),A(o,s)}}),N(i),N(r),A(e,r),Ie()}var Ad=F("<!> <!>",1),Dd=F("<h2>Confirm Deletion</h2> <p>Are you sure you want to delete this character?</p> <!>",1),Rd=F('<input required type="text" placeholder="New Character Name" class="svelte-1uilhb6"/> <!>',1),Nd=F("<form><!></form>"),Od=F('<div class="grid svelte-1uilhb6"><!></div> <!> <div class="toolbar svelte-1uilhb6"><!></div>',1),Ld=F("<!> <!> <!>",1);function zd(e,t){$e(t,!0);async function n(){const k=x(s).trim();if(k.length===0)return;const m=Bc(k);if(x(l).find($=>$.slug===m)){pi("A character with that name already exists.","error");return}const y=await Gf(m,k);x(l).push(y),se(s,""),se(l,x(l),!0)}function r(k){se(u,k,!0)}function i(){se(u,null)}async function a(){if(!x(u))return;const k=x(u);se(u,null),await Xf(k),se(l,x(l).filter(m=>m.slug!==k),!0)}function o(k){k.preventDefault()}var l,s,u,d=Ei([async()=>l=De(kn(await Wf())),()=>s=De(""),()=>u=De(null)]),f=Ld(),v=K(f);Di(v,{title:"Character select"});var c=P(v,2);ft(c,[d[2]],[()=>x(u)],(k,m)=>{var y=$=>{ft($,[d[2]],void 0,D=>{Td(D,{get onclose(){return i},children:(O,S)=>{oe(O,{column:!0,children:(b,I)=>{var z=Dd(),B=P(K(z),4);oe(B,{children:(H,M)=>{var j=Ad(),Y=K(j);ft(Y,[d[2]],void 0,Z=>{dt(Y,{get onclick(){return i},children:(te,re)=>{xe();var le=Ze("Cancel");A(te,le)},$$slots:{default:!0}})});var J=P(Y,2);ft(J,[d[2]],void 0,Z=>{dt(J,{get onclick(){return a},children:(te,re)=>{xe();var le=Ze("Delete");A(te,le)},$$slots:{default:!0}})}),A(H,j)},$$slots:{default:!0}}),A(b,z)},$$slots:{default:!0}})},$$slots:{default:!0}})})};ze(k,$=>{x(m)&&$(y)})});var g=P(c,2);oe(g,{column:!0,children:(k,m)=>{var y=Od(),$=K(y),D=L($);ft(D,[d[0]],[()=>x(l)],(I,z)=>{Wt(I,17,()=>x(z),B=>B.slug,(B,H)=>{Pd(B,{get character(){return x(H)},onDelete:()=>r(x(H).slug)})})}),N($);var O=P($,2);Tn(O);var S=P(O,2),b=L(S);Fl(b,{children:(I,z)=>{oe(I,{column:!0,xl:!0,children:(B,H)=>{oe(B,{column:!0,align:"start",padding:!0,children:(M,j)=>{oe(M,{children:(Y,J)=>{var Z=Nd(),te=L(Z);oe(te,{children:(re,le)=>{var ve=Rd(),w=K(ve);er(w);var ee=P(w,2);ft(ee,[d[2]],void 0,ge=>{dt(ee,{type:"submit",get onclick(){return n},children:(_,ue)=>{xe();var me=Ze("Create New Character");A(_,me)},$$slots:{default:!0}})}),Xo([d[1]],()=>{tr(w,()=>x(s),ge=>se(s,ge))}),A(re,ve)},$$slots:{default:!0}}),N(Z),Yt("submit",Z,o),A(Y,Z)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}}),N(S),A(k,y)}}),A(e,f),Ie()}const ut=or({edit:!1,theme:"automatic",hasChanges:!1});ut.subscribe(e=>{e.hasChanges?window.onbeforeunload=()=>"There are unsaved changed, these will get lost if you continue":window.onbeforeunload=null});function Fd(e){const t=n=>{if(n!=null){if(typeof n=="string"){const r=n.trim();return r===""||r.toLowerCase()==="none"?void 0:n}if(typeof n=="number")return n===0?void 0:n;if(Array.isArray(n)){const r=n.map(i=>t(i)).filter(i=>i!==void 0);return r.length===0?void 0:r}if(typeof n=="object"){const r=Object.entries(n).map(([i,a])=>[i,t(a)]).filter(([,i])=>i!==void 0);return r.length===0?void 0:Object.fromEntries(r)}return n}};return t(e)??{}}async function Bd(e){let t=structuredClone(e);return t=Fd(t),t=Wi(t,"slug"),t.avatar&&(t.avatar.blob=null),t.spellSlots?.length===0&&(t=Wi(t,"spellSlots")),t.weapons?.length===0&&(t=Wi(t,"weapons")),(await qr(()=>import("./index--Ug0Gu6p.js"),[])).stringify(t)}var Md=F('<label class="checkbox svelte-136uhkj"><!> <input type="checkbox" class="svelte-136uhkj"/></label>');function qd(e,t){$e(t,!0);const n=()=>qe(ut,"$appSettings",r),[r,i]=it();let a=_t(t,"checked",15);var o=Md(),l=L(o);Je(l,{nopadding:!0,absolute:!0,transparent:!0,small:!0,noshadow:!0});var s=P(l,2);er(s),N(o),pe(()=>s.disabled=!n().edit),gc(s,a),A(e,o),Ie(),i()}var jd=F("<div><!></div>");function Hd(e,t){const n=_t(t,"hide",3,!0);var r=jd();let i;var a=L(r);ht(a,()=>t.children??Re),N(r),pe(()=>i=Tt(r,1,"svelte-c0fsxz",null,i,{hide:n()})),A(e,r)}var Ud=F('<input class="svelte-8ff5h4"/>'),Vd=F('<div class="svelte-8ff5h4"> </div>');function je(e,t){$e(t,!0);const n=()=>qe(ut,"$appSettings",r),[r,i]=it();let a=_t(t,"value",15);const o=Me(()=>t.type??typeof a()=="number"?"number":"text"),l=Me(()=>n().edit);var s=qt(),u=K(s);{var d=v=>{var c=Ud();er(c),pe(()=>tn(c,"type",x(o))),tr(c,a),A(v,c)},f=v=>{var c=Vd(),g=L(c,!0);N(c),pe(()=>Ye(g,a())),A(v,c)};ze(u,v=>{x(l)?v(d):v(f,!1)})}A(e,s),Ie(),i()}var Yd=F('<div class="value svelte-1ndak0x"><!></div> <button type="button">delete</button>',1),Wd=F("<!> <!>",1),Gd=F("<strong>Qty</strong>"),Qd=F("<strong>Item</strong>"),Xd=F("<strong>Notes</strong>"),Kd=F("<!> <!> <!>",1),Zd=F('<span class="value svelte-1ndak0x"> </span>'),Jd=F('<span class="value svelte-1ndak0x"> </span>'),ev=F('<span class="value svelte-1ndak0x"> </span>'),tv=F("<!> <!> <!>",1),nv=F("<!> <!>",1),rv=F('<div class="wrapper svelte-1ndak0x"><!></div>');function iv(e,t){$e(t,!0);const n=()=>qe(t.character,"$character",i),r=()=>qe(ut,"$appSettings",i),[i,a]=it(),o=Me(()=>n().inventory.flatMap(c=>{if(!c.trim())return[];const g=c.trim().match(/^(\d+)\s+(.*)$/),k=g?Number(g[1]):1,m=g?g[2]:c.trim(),[y,$]=qc(m,"|");return{count:k,name:y,description:$}}));function l(){t.character.update(c=>(c.inventory.push(""),c))}function s(c){t.character.update(g=>(g.inventory.splice(c,1),g))}var u=rv(),d=L(u);{var f=c=>{oe(c,{column:!0,children:(g,k)=>{var m=Wd(),y=K(m);Wt(y,1,()=>n().inventory,mn,(D,O,S)=>{oe(D,{align:"center",children:(b,I)=>{var z=Yd(),B=K(z),H=L(B);je(H,{get value(){return n().inventory[S]},set value(j){he(t.character,V(n).inventory[S]=j,V(n))}}),N(B);var M=P(B,2);M.__click=()=>s(S),A(b,z)},$$slots:{default:!0}})});var $=P(y,2);dt($,{onclick:l,children:(D,O)=>{xe();var S=Ze("Add item");A(D,S)},$$slots:{default:!0}}),A(g,m)}})},v=c=>{Fe(c,{cells:3,children:(g,k)=>{var m=nv(),y=K(m);Fe(y,{row:!0,children:(D,O)=>{var S=Kd(),b=K(S);Fe(b,{cell:!0,children:(B,H)=>{var M=Gd();A(B,M)},$$slots:{default:!0}});var I=P(b,2);Fe(I,{cell:!0,children:(B,H)=>{var M=Qd();A(B,M)},$$slots:{default:!0}});var z=P(I,2);Fe(z,{cell:!0,children:(B,H)=>{var M=Xd();A(B,M)},$$slots:{default:!0}}),A(D,S)},$$slots:{default:!0}});var $=P(y,2);Wt($,17,()=>x(o),mn,(D,O)=>{Fe(D,{row:!0,children:(S,b)=>{var I=tv(),z=K(I);Fe(z,{cell:!0,children:(M,j)=>{var Y=Zd(),J=L(Y,!0);N(Y),pe(()=>Ye(J,x(O).count)),A(M,Y)},$$slots:{default:!0}});var B=P(z,2);Fe(B,{cell:!0,children:(M,j)=>{var Y=Jd(),J=L(Y,!0);N(Y),pe(()=>Ye(J,x(O).name)),A(M,Y)},$$slots:{default:!0}});var H=P(B,2);Fe(H,{cell:!0,children:(M,j)=>{var Y=ev(),J=L(Y,!0);N(Y),pe(()=>Ye(J,x(O).description)),A(M,Y)},$$slots:{default:!0}}),A(S,I)},$$slots:{default:!0}})}),A(g,m)},$$slots:{default:!0}})};ze(d,c=>{r().edit?c(f):c(v,!1)})}N(u),A(e,u),Ie(),a()}At(["click"]);function Na(e,t){$e(t,!0);const n=Me(()=>Rl(t.modifier));xe();var r=Ze();pe(()=>Ye(r,x(n))),A(e,r),Ie()}var av=F('<div class="container"><div><div class="inner svelte-37b3kl"><!></div></div></div>');function Zl(e,t){var n=av(),r=L(n);let i;var a=L(r),o=L(a);ht(o,()=>t.children??Re),N(a),N(r),N(n),pe(()=>i=Tt(r,1,"page svelte-37b3kl",null,i,{multiple:t.multiple})),A(e,n)}var ov=F('<button type="button">delete</button>'),lv=F('<div class="line svelte-19rqkn5"><div class="value svelte-19rqkn5"><!></div> <!> <div class="value svelte-19rqkn5"><!></div> <!></div> <!>',1),sv=F('<div class="line svelte-19rqkn5"><span>Level</span> <!> <span>Slots</span></div> <!> <!> <!>',1);function uv(e,t){$e(t,!0);const n=()=>qe(t.character,"$character",i),r=()=>qe(ut,"$appSettings",i),[i,a]=it();function o(){n().spellSlots.push({level:1,amount:0}),he(t.character,V(n).spellSlots=n().spellSlots,V(n))}function l(s){n().spellSlots.splice(s,1),he(t.character,V(n).spellSlots=n().spellSlots,V(n))}oe(e,{column:!0,sm:!0,children:(s,u)=>{var d=sv(),f=K(d),v=P(L(f),2);_e(v,{vertical:!0}),xe(2),N(f);var c=P(f,2);_e(c,{});var g=P(c,2);Wt(g,1,()=>n().spellSlots,mn,(y,$,D)=>{var O=lv(),S=K(O),b=L(S),I=L(b);je(I,{get value(){return x($).level},set value(J){x($).level=J,fn(i,"$character")}}),N(b);var z=P(b,2);_e(z,{vertical:!0});var B=P(z,2),H=L(B);je(H,{type:"number",get value(){return x($).amount},set value(J){x($).amount=J,fn(i,"$character")}}),N(B);var M=P(B,2);{var j=J=>{var Z=ov();Z.__click=()=>l(D),A(J,Z)};ze(M,J=>{r().edit&&J(j)})}N(S);var Y=P(S,2);_e(Y,{}),A(y,O)});var k=P(g,2);{var m=y=>{dt(y,{onclick:o,children:($,D)=>{xe();var O=Ze("Add spellslot level");A($,O)},$$slots:{default:!0}})};ze(k,y=>{r().edit&&y(m)})}A(s,d)},$$slots:{default:!0}}),Ie(),a()}At(["click"]);var cv=F("<textarea></textarea>"),fv=F("<div> </div>");function ho(e,t){$e(t,!0);const n=()=>qe(ut,"$appSettings",r),[r,i]=it();let a=_t(t,"value",15),o=De(null);const l=()=>{x(o)&&(x(o).style.height="auto",x(o).style.minHeight=`${x(o).scrollHeight}px`)};Jt(()=>{l(),t.autofocus&&x(o)?.focus({preventScroll:!0})});var s=qt();Yt("resize",Rn,l);var u=K(s);{var d=v=>{var c=cv();Nu(c),c.__input=l;let g;Hn(c,k=>se(o,k),()=>x(o)),pe(()=>g=Tt(c,1,"textarea svelte-1ilrf3m",null,g,{nopadding:t.nopadding})),tr(c,a),A(v,c)},f=v=>{var c=fv();let g;var k=L(c,!0);N(c),pe(()=>{g=Tt(c,1,"textarea svelte-1ilrf3m",null,g,{nopadding:t.nopadding}),Ye(k,a())}),A(v,c)};ze(u,v=>{n().edit?v(d):v(f,!1)})}A(e,s),Ie(),i()}At(["input"]);var dv=F('<p>Spell DC</p> <!> <p class="value big svelte-mrvj8r"> </p>',1),vv=F('<p>Spellcasting</p> <!> <p class="value big svelte-mrvj8r"><!></p>',1),hv=F("<!> <!> <!> <!> <div><!></div>",1),pv=F("<span>Prepared</span>"),gv=F("<span>Spell Name</span>"),mv=F("<span>Notes</span>"),_v=F("<!> <!> <!>",1),yv=F('<div class="value svelte-mrvj8r"><!></div>'),bv=F('<div class="value svelte-mrvj8r"><!></div>'),wv=F('<button type="button">delete</button>'),xv=F("<!> <!> <!> <!>",1),Sv=F("<!> <!>",1),kv=F("<!> <!> <!>",1),Ev=F('<div class="spells svelte-mrvj8r"><!></div>'),$v=F('<div class="side svelte-mrvj8r"><!></div>'),Iv=F('<div class="wrapper svelte-mrvj8r"><!> <div class="inventory svelte-mrvj8r"><!></div></div>');function Pv(e,t){$e(t,!0);const n=()=>qe(t.character,"$character",i),r=()=>qe(ut,"$appSettings",i),[i,a]=it(),o=Me(()=>{const d=n().spellcastingAbility;return d==="none"?0:Ti(n().abilityScores[d])}),l=Me(()=>8+x(o)+n().proficiencyBonus);function s(){t.character.update(d=>(d.spells.push(Vl(Wl,{})),d))}function u(d){t.character.update(f=>(f.spells.splice(d,1),f))}Zl(e,{children:(d,f)=>{var v=Iv(),c=L(v);{let m=Me(()=>n().spells.length===0);Hd(c,{get hide(){return x(m)},children:(y,$)=>{var D=$v(),O=L(D);oe(O,{column:!0,children:(S,b)=>{var I=Ev(),z=L(I);Ft(z,{title:"Spells",children:(B,H)=>{oe(B,{column:!0,children:(M,j)=>{oe(M,{column:!0,justify:"start",align:"start",children:(Y,J)=>{var Z=kv(),te=K(Z);oe(te,{nogrow:!0,children:(w,ee)=>{Je(w,{noshadow:!0,small:!0,children:(ge,_)=>{oe(ge,{sm:!0,children:(ue,me)=>{var ce=hv(),ke=K(ce);oe(ke,{column:!0,align:"center",sm:!0,children:(Ue,wn)=>{var Ge=dv(),Qe=P(K(Ge),2);_e(Qe,{});var at=P(Qe,2),Ve=L(at,!0);N(at),pe(()=>Ye(Ve,x(l))),A(Ue,Ge)},$$slots:{default:!0}});var Ee=P(ke,2);_e(Ee,{vertical:!0});var Ce=P(Ee,2);oe(Ce,{column:!0,align:"center",sm:!0,children:(Ue,wn)=>{var Ge=vv(),Qe=P(K(Ge),2);_e(Qe,{});var at=P(Qe,2),Ve=L(at);Na(Ve,{get modifier(){return x(o)}}),N(at),A(Ue,Ge)},$$slots:{default:!0}});var He=P(Ce,2);_e(He,{vertical:!0});var We=P(He,2),Et=L(We);uv(Et,{get character(){return t.character}}),N(We),A(ue,ce)},$$slots:{default:!0}})}})},$$slots:{default:!0}});var re=P(te,2);Fe(re,{cells:3,fillCell:3,children:(w,ee)=>{var ge=Sv(),_=K(ge);Fe(_,{row:!0,children:(me,ce)=>{var ke=_v(),Ee=K(ke);Fe(Ee,{cell:!0,children:(We,Et)=>{var Ue=pv();A(We,Ue)},$$slots:{default:!0}});var Ce=P(Ee,2);Fe(Ce,{cell:!0,children:(We,Et)=>{var Ue=gv();A(We,Ue)},$$slots:{default:!0}});var He=P(Ce,2);Fe(He,{cell:!0,children:(We,Et)=>{var Ue=mv();A(We,Ue)},$$slots:{default:!0}}),A(me,ke)},$$slots:{default:!0}});var ue=P(_,2);Wt(ue,1,()=>n().spells,mn,(me,ce,ke)=>{Fe(me,{row:!0,children:(Ee,Ce)=>{var He=xv(),We=K(He);Fe(We,{cell:!0,centered:!0,children:(Qe,at)=>{qd(Qe,{get checked(){return x(ce).prepared},set checked(Ve){x(ce).prepared=Ve,fn(i,"$character")}})},$$slots:{default:!0}});var Et=P(We,2);Fe(Et,{cell:!0,children:(Qe,at)=>{var Ve=yv(),bt=L(Ve);je(bt,{get value(){return x(ce).name},set value(ln){x(ce).name=ln,fn(i,"$character")}}),N(Ve),A(Qe,Ve)},$$slots:{default:!0}});var Ue=P(Et,2);Fe(Ue,{cell:!0,children:(Qe,at)=>{var Ve=bv(),bt=L(Ve);je(bt,{get value(){return x(ce).notes},set value(ln){x(ce).notes=ln,fn(i,"$character")}}),N(Ve),A(Qe,Ve)},$$slots:{default:!0}});var wn=P(Ue,2);{var Ge=Qe=>{Fe(Qe,{cell:!0,children:(at,Ve)=>{var bt=wv();bt.__click=()=>u(ke),A(at,bt)},$$slots:{default:!0}})};ze(wn,Qe=>{r().edit&&Qe(Ge)})}A(Ee,He)},$$slots:{default:!0}})}),A(w,ge)},$$slots:{default:!0}});var le=P(re,2);{var ve=w=>{dt(w,{onclick:s,children:(ee,ge)=>{xe();var _=Ze("Add spell");A(ee,_)},$$slots:{default:!0}})};ze(le,w=>{r().edit&&w(ve)})}A(Y,Z)},$$slots:{default:!0}})},$$slots:{default:!0}})}}),N(I),A(S,I)},$$slots:{default:!0}}),N(D),A(y,D)},$$slots:{default:!0}})}var g=P(c,2),k=L(g);Ft(k,{title:"Inventory",children:(m,y)=>{iv(m,{get character(){return t.character}})}}),N(g),N(v),A(d,v)}}),Ie(),a()}At(["click"]);var Cv=F('<div><input type="range" min="0" max="1" step="0.01"/></div> <div><input type="range" min="0" max="1" step="0.01"/></div> <div><input type="range" min="0" max="1" step="0.01"/></div> <input type="file" accept="image/*"/>',1),Tv=F('<div class="controls svelte-112qgxv"><!></div>'),Av=F('<div class="container svelte-112qgxv"><div class="canvas"><!></div> <!></div>');function Dv(e,t){$e(t,!0);const n=()=>qe(ut,"$appSettings",i),r=()=>qe(t.character,"$character",i),[i,a]=it();let o=Me(()=>n().edit),l=De(null),s=De(null);function u(c){x(o)&&se(s,{x:r().avatar.x,y:r().avatar.y,pointerX:c.clientX,pointerY:c.clientY},!0)}function d(c){if(!x(o)||!x(s)||!x(l))return;const g=c.clientX-x(s).pointerX,k=c.clientY-x(s).pointerY,m=Cr/Tr*r().avatar.scale;he(t.character,V(r).avatar.x=x(s).x+g*m,V(r)),he(t.character,V(r).avatar.y=x(s).y+k*m,V(r))}function f(){x(o)&&se(s,null)}function v(c){if(!x(o)||(c.preventDefault(),!x(l)))return;const g=r().avatar.scale,k=Math.min(Math.max(.1,g-c.deltaY/1e3),10),m=x(l).getBoundingClientRect(),y=c.clientX-m.left,$=c.clientY-m.top,D=y/x(l).offsetWidth*Tr,O=$/x(l).offsetHeight*Cr,S=(D-r().avatar.x)/g,b=(O-r().avatar.y)/g;he(t.character,V(r).avatar.scale=k,V(r)),he(t.character,V(r).avatar.x=D-S*k,V(r)),he(t.character,V(r).avatar.y=O-b*k,V(r))}Yt("mouseup",Rn,f),Yt("pointermove",Rn,d),Je(e,{nopadding:!0,children:(c,g)=>{var k=Av(),m=L(k);m.__pointerdown=u;var y=L(m);{let O=Me(()=>x(s)!==null);Aa(y,{get avatar(){return r().avatar},get disableEffects(){return x(O)}})}N(m),Hn(m,O=>se(l,O),()=>x(l));var $=P(m,2);{var D=O=>{var S=Tv(),b=L(S);Ft(b,{children:(I,z)=>{oe(I,{column:!0,sm:!0,children:(B,H)=>{var M=Cv(),j=K(M),Y=L(j);er(Y),N(j);var J=P(j,2),Z=L(J);er(Z),N(J);var te=P(J,2),re=L(te);er(re),N(te);var le=P(te,2);le.__input=async ve=>{const w=ve.currentTarget.files?.[0];if(w){const ee=await Ql(w,Tr,Cr);he(t.character,V(r).avatar.blob=w,V(r)),he(t.character,V(r).avatar.x=ee.x,V(r)),he(t.character,V(r).avatar.y=ee.y,V(r)),he(t.character,V(r).avatar.scale=ee.scale,V(r))}ve.currentTarget.value=""},tr(Y,()=>r().avatar.contrast,ve=>he(t.character,V(r).avatar.contrast=ve,V(r))),tr(Z,()=>r().avatar.gray,ve=>he(t.character,V(r).avatar.gray=ve,V(r))),tr(re,()=>r().avatar.black,ve=>he(t.character,V(r).avatar.black=ve,V(r))),A(B,M)},$$slots:{default:!0}})}}),N(S),A(O,S)};ze($,O=>{n().edit&&O(D)})}N(k),Yt("wheel",m,v),A(c,k)}}),Ie(),a()}At(["pointerdown","input"]);var Rv=F("<!> <span>current</span>",1),Nv=F('<div class="value svelte-10uhbq3"><!></div> <!> <span>max</span>',1),Ov=F("<!> <!> <!>",1),Lv=F('<div class="label svelte-10uhbq3">Hitpoints</div> <!>',1),zv=F('<div style="height:3em;"></div> <!> <span>spend</span>',1),Fv=F('<div class="value svelte-10uhbq3"><!></div> <!> <span>current</span>',1),Bv=F('<div class="label svelte-10uhbq3">Hit Dice</div> <!> <!> <!>',1),Mv=F('<div class="label svelte-10uhbq3">Death<br/>Saves</div> <!> <!> <!>',1),qv=F('<div class="inner svelte-10uhbq3"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!> <!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),jv=F('<div class="container svelte-10uhbq3"><div class="armor svelte-10uhbq3"><div class="inner svelte-10uhbq3"><div class="label svelte-10uhbq3">Armor<br/>Class</div> <!> <div class="value svelte-10uhbq3"><!></div></div></div> <!></div>');function Hv(e,t){$e(t,!0);const n=()=>qe(t.character,"$character",r),[r,i]=it();var a=jv(),o=L(a),l=L(o),s=P(L(l),2);_e(s,{});var u=P(s,2),d=L(u);je(d,{get value(){return n().armorClass},set value(v){he(t.character,V(n).armorClass=v,V(n))}}),N(u),N(l),N(o);var f=P(o,2);Ft(f,{children:(v,c)=>{var g=qv(),k=L(g);Wa(k,()=>({"--flex-grow":"1"})),oe(k.lastChild,{column:!0,align:"center",children:(O,S)=>{var b=Lv(),I=P(K(b),2);oe(I,{full:!0,children:(z,B)=>{var H=Ov(),M=K(H);oe(M,{column:!0,align:"center",justify:"end",full:!0,children:(J,Z)=>{var te=Rv(),re=K(te);_e(re,{}),xe(2),A(J,te)},$$slots:{default:!0}});var j=P(M,2);_e(j,{vertical:!0});var Y=P(j,2);oe(Y,{column:!0,align:"center",justify:"end",full:!0,children:(J,Z)=>{var te=Nv(),re=K(te),le=L(re);je(le,{get value(){return n().hitPoints},set value(w){he(t.character,V(n).hitPoints=w,V(n))}}),N(re);var ve=P(re,2);_e(ve,{}),xe(2),A(J,te)},$$slots:{default:!0}}),A(z,H)},$$slots:{default:!0}}),A(O,b)},$$slots:{default:!0}}),N(k);var m=P(k,2);_e(m,{vertical:!0});var y=P(m,2);oe(y,{column:!0,align:"center",sm:!0,children:(O,S)=>{var b=Bv(),I=P(K(b),2);Tn(I);var z=P(I,2);oe(z,{column:!0,full:!0,children:(H,M)=>{var j=zv(),Y=P(K(j),2);_e(Y,{}),xe(2),A(H,j)},$$slots:{default:!0}});var B=P(z,2);oe(B,{column:!0,full:!0,children:(H,M)=>{var j=Fv(),Y=K(j),J=L(Y);je(J,{get value(){return n().hitDice},set value(te){he(t.character,V(n).hitDice=te,V(n))}}),N(Y);var Z=P(Y,2);_e(Z,{}),xe(2),A(H,j)},$$slots:{default:!0}}),A(O,b)},$$slots:{default:!0}});var $=P(y,2);_e($,{vertical:!0});var D=P($,2);Wa(D,()=>({"--flex-grow":"0"})),oe(D.lastChild,{column:!0,children:(O,S)=>{var b=Mv(),I=P(K(b),2);Tn(I);var z=P(I,2);gi(z,{label:"successes"});var B=P(z,2);gi(B,{label:"failures"}),A(O,b)},$$slots:{default:!0}}),N(D),N(g),A(v,g)}}),N(a),A(e,a),Ie(),i()}var Uv=F('<div class="value svelte-q5a7vm"><!></div> <!> <div class="label svelte-q5a7vm">Level</div>',1),Vv=F('<div class="inner svelte-q5a7vm"><div class="field svelte-q5a7vm"><div class="value svelte-q5a7vm"><!></div> <!> <div class="label svelte-q5a7vm">Player name</div></div> <div class="field svelte-q5a7vm"><div class="value svelte-q5a7vm"><!></div> <!> <div class="label svelte-q5a7vm">Alignment</div></div> <div class="field svelte-q5a7vm"><div class="value svelte-q5a7vm"><!></div> <!> <div class="label svelte-q5a7vm">Background</div></div> <div class="field svelte-q5a7vm"><div class="value svelte-q5a7vm"><!></div> <!> <div class="label svelte-q5a7vm">Class</div></div> <div class="field svelte-q5a7vm"><div class="value svelte-q5a7vm"><!></div> <!> <div class="label svelte-q5a7vm">Species</div></div> <div class="field svelte-q5a7vm"><div class="value svelte-q5a7vm"><!></div> <!> <div class="label svelte-q5a7vm">Subclass</div></div> <div class="level svelte-q5a7vm"><!></div></div>');function Yv(e,t){$e(t,!0);const n=()=>qe(t.character,"$character",r),[r,i]=it();Je(e,{children:(a,o)=>{var l=Vv(),s=L(l),u=L(s),d=L(u);je(d,{get value(){return n().playerName},set value(le){he(t.character,V(n).playerName=le,V(n))}}),N(u);var f=P(u,2);_e(f,{}),xe(2),N(s);var v=P(s,2),c=L(v),g=L(c);je(g,{get value(){return n().alignment},set value(le){he(t.character,V(n).alignment=le,V(n))}}),N(c);var k=P(c,2);_e(k,{}),xe(2),N(v);var m=P(v,2),y=L(m),$=L(y);je($,{get value(){return n().background},set value(le){he(t.character,V(n).background=le,V(n))}}),N(y);var D=P(y,2);_e(D,{}),xe(2),N(m);var O=P(m,2),S=L(O),b=L(S);je(b,{get value(){return n().class},set value(le){he(t.character,V(n).class=le,V(n))}}),N(S);var I=P(S,2);_e(I,{}),xe(2),N(O);var z=P(O,2),B=L(z),H=L(B);je(H,{get value(){return n().species},set value(le){he(t.character,V(n).species=le,V(n))}}),N(B);var M=P(B,2);_e(M,{}),xe(2),N(z);var j=P(z,2),Y=L(j),J=L(Y);je(J,{get value(){return n().subclass},set value(le){he(t.character,V(n).subclass=le,V(n))}}),N(Y);var Z=P(Y,2);_e(Z,{}),xe(2),N(j);var te=P(j,2),re=L(te);oe(re,{column:!0,sm:!0,align:"center",children:(le,ve)=>{var w=Uv(),ee=K(w),ge=L(ee);je(ge,{get value(){return n().level},set value(ue){he(t.character,V(n).level=ue,V(n))}}),N(ee);var _=P(ee,2);_e(_,{}),xe(2),A(le,w)},$$slots:{default:!0}}),N(te),N(l),A(a,l)}}),Ie(),i()}const po=document.createElement("i");function Jl(e){const t="&"+e+";";po.innerHTML=t;const n=po.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function nn(e,t,n,r){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function vt(e,t){return e.length>0?(nn(e,e.length,0,t),e):t}const da={}.hasOwnProperty;function Wv(e){const t={};let n=-1;for(;++n<e.length;)Gv(t,e[n]);return t}function Gv(e,t){let n;for(n in t){const i=(da.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){da.call(i,o)||(i[o]=[]);const l=a[o];Qv(i[o],Array.isArray(l)?l:l?[l]:[])}}}function Qv(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);nn(e,0,0,r)}function Xv(e){const t={};let n=-1;for(;++n<e.length;)Kv(t,e[n]);return t}function Kv(e,t){let n;for(n in t){const i=(da.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a)i[o]=a[o]}}function Zv(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}const Jv={'"':"quot","&":"amp","<":"lt",">":"gt"};function es(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+Jv[n]+";"}}function Lr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Xt=On(/[A-Za-z]/),Pt=On(/[\dA-Za-z]/),eh=On(/[#-'*+\--9=?A-Z^-~]/);function va(e){return e!==null&&(e<32||e===127)}const ha=On(/\d/),th=On(/[\dA-Fa-f]/),nh=On(/[!-/:-@[-`{-~]/);function fe(e){return e!==null&&e<-2}function kt(e){return e!==null&&(e<0||e===32)}function Te(e){return e===-2||e===-1||e===32}const rh=On(new RegExp("\\p{P}|\\p{S}","u")),ih=On(/\s/);function On(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function li(e,t){const n=es(ah(e||""));if(!t)return n;const r=n.indexOf(":"),i=n.indexOf("?"),a=n.indexOf("#"),o=n.indexOf("/");return r<0||o>-1&&r>o||i>-1&&r>i||a>-1&&r>a||t.test(n.slice(0,r))?n:""}function ah(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&Pt(e.charCodeAt(n+1))&&Pt(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),i=1):o="ï¿½"}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}const go={}.hasOwnProperty,mo=/^(https?|ircs?|mailto|xmpp)$/i,oh=/^https?$/i;function lh(e){const t=e||{};let n=!0;const r={},i=[[]],a=[],o=[],s=Xv([{enter:{blockQuote:Z,codeFenced:ve,codeFencedFenceInfo:m,codeFencedFenceMeta:m,codeIndented:ge,codeText:zi,content:ln,definition:wn,definitionDestinationString:Qe,definitionLabelString:m,definitionTitleString:m,emphasis:mr,htmlFlow:Xr,htmlText:gr,image:ue,label:m,link:me,listItemMarker:M,listItemValue:H,listOrdered:z,listUnordered:B,paragraph:re,reference:m,resource:Ce,resourceDestinationString:He,resourceTitleString:m,setextHeading:Hr,strong:Li},exit:{atxHeading:Vr,atxHeadingSequence:vr,autolinkEmail:Mi,autolinkProtocol:Jr,blockQuote:te,characterEscapeValue:xn,characterReferenceMarkerHexadecimal:Zr,characterReferenceMarkerNumeric:Zr,characterReferenceValue:Bi,codeFenced:_,codeFencedFence:ee,codeFencedFenceInfo:w,codeFencedFenceMeta:I,codeFlowValue:Qr,codeIndented:_,codeText:_r,codeTextData:xn,data:xn,definition:bt,definitionDestinationString:at,definitionLabelString:Ge,definitionTitleString:Ve,emphasis:Kr,hardBreakEscape:hr,hardBreakTrailing:hr,htmlFlow:pr,htmlFlowData:xn,htmlText:pr,htmlTextData:xn,image:Ue,label:ke,labelText:ce,lineEnding:Gr,link:Ue,listOrdered:j,listUnordered:Y,paragraph:le,reference:I,referenceString:Ee,resource:I,resourceDestinationString:We,resourceTitleString:Et,setextHeading:Wr,setextHeadingLineSequence:Yr,setextHeadingText:Ur,strong:Fi,thematicBreak:Gt}},...t.htmlExtensions||[]]),u={definitions:r,tightStack:o},d={buffer:m,encode:b,getData:k,lineEndingIfNeeded:S,options:t,raw:D,resume:y,setData:g,tag:$};let f=t.defaultLineEnding;return v;function v(Q){let ie=-1,nt=0;const $t=[];let Dt=[],Ut=[];for(;++ie<Q.length;)!f&&(Q[ie][1].type==="lineEnding"||Q[ie][1].type==="lineEndingBlank")&&(f=Q[ie][2].sliceSerialize(Q[ie][1])),(Q[ie][1].type==="listOrdered"||Q[ie][1].type==="listUnordered")&&(Q[ie][0]==="enter"?$t.push(ie):c(Q.slice($t.pop(),ie))),Q[ie][1].type==="definition"&&(Q[ie][0]==="enter"?(Ut=vt(Ut,Q.slice(nt,ie)),nt=ie):(Dt=vt(Dt,Q.slice(nt,ie+1)),nt=ie+1));Dt=vt(Dt,Ut),Dt=vt(Dt,Q.slice(nt)),ie=-1;const Rt=Dt;for(s.enter.null&&s.enter.null.call(d);++ie<Q.length;){const ei=s[Rt[ie][0]],ti=Rt[ie][1].type,yr=ei[ti];go.call(ei,ti)&&yr&&yr.call({sliceSerialize:Rt[ie][2].sliceSerialize,...d},Rt[ie][1])}return s.exit.null&&s.exit.null.call(d),i[0].join("")}function c(Q){const ie=Q.length;let nt=0,$t=0,Dt=!1,Ut;for(;++nt<ie;){const Rt=Q[nt];if(Rt[1]._container)Ut=void 0,Rt[0]==="enter"?$t++:$t--;else switch(Rt[1].type){case"listItemPrefix":{Rt[0]==="exit"&&(Ut=!0);break}case"linePrefix":break;case"lineEndingBlank":{Rt[0]==="enter"&&!$t&&(Ut?Ut=void 0:Dt=!0);break}default:Ut=void 0}}Q[0][1]._loose=Dt}function g(Q,ie){u[Q]=ie}function k(Q){return u[Q]}function m(){i.push([])}function y(){return i.pop().join("")}function $(Q){n&&(g("lastWasTag",!0),i[i.length-1].push(Q))}function D(Q){g("lastWasTag"),i[i.length-1].push(Q)}function O(){D(f||`
`)}function S(){const Q=i[i.length-1],ie=Q[Q.length-1],nt=ie?ie.charCodeAt(ie.length-1):null;nt===10||nt===13||nt===null||O()}function b(Q){return k("ignoreEncode")?Q:es(Q)}function I(){y()}function z(Q){o.push(!Q._loose),S(),$("<ol"),g("expectFirstItem",!0)}function B(Q){o.push(!Q._loose),S(),$("<ul"),g("expectFirstItem",!0)}function H(Q){if(k("expectFirstItem")){const ie=Number.parseInt(this.sliceSerialize(Q),10);ie!==1&&$(' start="'+b(String(ie))+'"')}}function M(){k("expectFirstItem")?$(">"):J(),S(),$("<li>"),g("expectFirstItem"),g("lastWasTag")}function j(){J(),o.pop(),O(),$("</ol>")}function Y(){J(),o.pop(),O(),$("</ul>")}function J(){k("lastWasTag")&&!k("slurpAllLineEndings")&&S(),$("</li>"),g("slurpAllLineEndings")}function Z(){o.push(!1),S(),$("<blockquote>")}function te(){o.pop(),S(),$("</blockquote>"),g("slurpAllLineEndings")}function re(){o[o.length-1]||(S(),$("<p>")),g("slurpAllLineEndings")}function le(){o[o.length-1]?g("slurpAllLineEndings",!0):$("</p>")}function ve(){S(),$("<pre><code"),g("fencesCount",0)}function w(){const Q=y();$(' class="language-'+Q+'"')}function ee(){const Q=k("fencesCount")||0;Q||($(">"),g("slurpOneLineEnding",!0)),g("fencesCount",Q+1)}function ge(){S(),$("<pre><code>")}function _(){const Q=k("fencesCount");Q!==void 0&&Q<2&&u.tightStack.length>0&&!k("lastWasTag")&&O(),k("flowCodeSeenData")&&S(),$("</code></pre>"),Q!==void 0&&Q<2&&S(),g("flowCodeSeenData"),g("fencesCount"),g("slurpOneLineEnding")}function ue(){a.push({image:!0}),n=void 0}function me(){a.push({})}function ce(Q){a[a.length-1].labelId=this.sliceSerialize(Q)}function ke(){a[a.length-1].label=y()}function Ee(Q){a[a.length-1].referenceId=this.sliceSerialize(Q)}function Ce(){m(),a[a.length-1].destination=""}function He(){m(),g("ignoreEncode",!0)}function We(){a[a.length-1].destination=y(),g("ignoreEncode")}function Et(){a[a.length-1].title=y()}function Ue(){let Q=a.length-1;const ie=a[Q],nt=ie.referenceId||ie.labelId,$t=ie.destination===void 0?r[Lr(nt)]:ie;for(n=!0;Q--;)if(a[Q].image){n=void 0;break}ie.image?($('<img src="'+li($t.destination,t.allowDangerousProtocol?void 0:oh)+'" alt="'),D(ie.label),$('"')):$('<a href="'+li($t.destination,t.allowDangerousProtocol?void 0:mo)+'"'),$($t.title?' title="'+$t.title+'"':""),ie.image?$(" />"):($(">"),D(ie.label),$("</a>")),a.pop()}function wn(){m(),a.push({})}function Ge(Q){y(),a[a.length-1].labelId=this.sliceSerialize(Q)}function Qe(){m(),g("ignoreEncode",!0)}function at(){a[a.length-1].destination=y(),g("ignoreEncode")}function Ve(){a[a.length-1].title=y()}function bt(){const Q=a[a.length-1],ie=Lr(Q.labelId);y(),go.call(r,ie)||(r[ie]=a[a.length-1]),a.pop()}function ln(){g("slurpAllLineEndings",!0)}function vr(Q){k("headingRank")||(g("headingRank",this.sliceSerialize(Q).length),S(),$("<h"+k("headingRank")+">"))}function Hr(){m(),g("slurpAllLineEndings")}function Ur(){g("slurpAllLineEndings",!0)}function Vr(){$("</h"+k("headingRank")+">"),g("headingRank")}function Yr(Q){g("headingRank",this.sliceSerialize(Q).charCodeAt(0)===61?1:2)}function Wr(){const Q=y();S(),$("<h"+k("headingRank")+">"),D(Q),$("</h"+k("headingRank")+">"),g("slurpAllLineEndings"),g("headingRank")}function xn(Q){D(b(this.sliceSerialize(Q)))}function Gr(Q){if(!k("slurpAllLineEndings")){if(k("slurpOneLineEnding")){g("slurpOneLineEnding");return}if(k("inCodeText")){D(" ");return}D(b(this.sliceSerialize(Q)))}}function Qr(Q){D(b(this.sliceSerialize(Q))),g("flowCodeSeenData",!0)}function hr(){$("<br />")}function Xr(){S(),gr()}function pr(){g("ignoreEncode")}function gr(){t.allowDangerousHtml&&g("ignoreEncode",!0)}function mr(){$("<em>")}function Li(){$("<strong>")}function zi(){g("inCodeText",!0),$("<code>")}function _r(){g("inCodeText"),$("</code>")}function Kr(){$("</em>")}function Fi(){$("</strong>")}function Gt(){S(),$("<hr />")}function Zr(Q){g("characterReferenceType",Q.type)}function Bi(Q){const ie=this.sliceSerialize(Q),nt=k("characterReferenceType")?Zv(ie,k("characterReferenceType")==="characterReferenceMarkerNumeric"?10:16):Jl(ie);D(b(nt)),g("characterReferenceType")}function Jr(Q){const ie=this.sliceSerialize(Q);$('<a href="'+li(ie,t.allowDangerousProtocol?void 0:mo)+'">'),D(b(ie)),$("</a>")}function Mi(Q){const ie=this.sliceSerialize(Q);$('<a href="'+li("mailto:"+ie)+'">'),D(b(ie)),$("</a>")}}function Be(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(s){return Te(s)?(e.enter(n),l(s)):t(s)}function l(s){return Te(s)&&a++<i?(e.consume(s),l):(e.exit(n),t(s))}}const sh={tokenize:uh};function uh(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Be(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),a(l)}function a(l){const s=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=s),n=s,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return fe(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const ch={tokenize:fh},_o={tokenize:dh};function fh(e){const t=this,n=[];let r=0,i,a,o;return l;function l(D){if(r<n.length){const O=n[r];return t.containerState=O[1],e.attempt(O[0].continuation,s,u)(D)}return u(D)}function s(D){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&$();const O=t.events.length;let S=O,b;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){b=t.events[S][1].end;break}y(r);let I=O;for(;I<t.events.length;)t.events[I][1].end={...b},I++;return nn(t.events,S+1,0,t.events.slice(O)),t.events.length=I,u(D)}return l(D)}function u(D){if(r===n.length){if(!i)return v(D);if(i.currentConstruct&&i.currentConstruct.concrete)return g(D);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(_o,d,f)(D)}function d(D){return i&&$(),y(r),v(D)}function f(D){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(D)}function v(D){return t.containerState={},e.attempt(_o,c,g)(D)}function c(D){return r++,n.push([t.currentConstruct,t.containerState]),v(D)}function g(D){if(D===null){i&&$(),y(0),e.consume(D);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),k(D)}function k(D){if(D===null){m(e.exit("chunkFlow"),!0),y(0),e.consume(D);return}return fe(D)?(e.consume(D),m(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(D),k)}function m(D,O){const S=t.sliceStream(D);if(O&&S.push(null),D.previous=a,a&&(a.next=D),a=D,i.defineSkip(D.start),i.write(S),t.parser.lazy[D.start.line]){let b=i.events.length;for(;b--;)if(i.events[b][1].start.offset<o&&(!i.events[b][1].end||i.events[b][1].end.offset>o))return;const I=t.events.length;let z=I,B,H;for(;z--;)if(t.events[z][0]==="exit"&&t.events[z][1].type==="chunkFlow"){if(B){H=t.events[z][1].end;break}B=!0}for(y(r),b=I;b<t.events.length;)t.events[b][1].end={...H},b++;nn(t.events,z+1,0,t.events.slice(I)),t.events.length=b}}function y(D){let O=n.length;for(;O-- >D;){const S=n[O];t.containerState=S[1],S[0].exit.call(t,e)}n.length=D}function $(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function dh(e,t,n){return Be(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function yo(e){if(e===null||kt(e)||ih(e))return 1;if(rh(e))return 2}function Oa(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const pa={name:"attention",resolveAll:vh,tokenize:hh};function vh(e,t){let n=-1,r,i,a,o,l,s,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;s=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},v={...e[n][1].start};bo(f,-s),bo(v,s),o={type:s>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},l={type:s>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:v},a={type:s>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:s>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=vt(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=vt(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),u=vt(u,Oa(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=vt(u,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=vt(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,nn(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function hh(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=yo(r);let a;return o;function o(s){return a=s,e.enter("attentionSequence"),l(s)}function l(s){if(s===a)return e.consume(s),l;const u=e.exit("attentionSequence"),d=yo(s),f=!d||d===2&&i||n.includes(s),v=!i||i===2&&d||n.includes(r);return u._open=!!(a===42?f:f&&(i||!v)),u._close=!!(a===42?v:v&&(d||!f)),t(s)}}function bo(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const ph={name:"autolink",tokenize:gh};function gh(e,t,n){let r=0;return i;function i(c){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(c),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(c){return Xt(c)?(e.consume(c),o):c===64?n(c):u(c)}function o(c){return c===43||c===45||c===46||Pt(c)?(r=1,l(c)):u(c)}function l(c){return c===58?(e.consume(c),r=0,s):(c===43||c===45||c===46||Pt(c))&&r++<32?(e.consume(c),l):(r=0,u(c))}function s(c){return c===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(c),e.exit("autolinkMarker"),e.exit("autolink"),t):c===null||c===32||c===60||va(c)?n(c):(e.consume(c),s)}function u(c){return c===64?(e.consume(c),d):eh(c)?(e.consume(c),u):n(c)}function d(c){return Pt(c)?f(c):n(c)}function f(c){return c===46?(e.consume(c),r=0,d):c===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(c),e.exit("autolinkMarker"),e.exit("autolink"),t):v(c)}function v(c){if((c===45||Pt(c))&&r++<63){const g=c===45?v:f;return e.consume(c),g}return n(c)}}const Oi={partial:!0,tokenize:mh};function mh(e,t,n){return r;function r(a){return Te(a)?Be(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||fe(a)?t(a):n(a)}}const ts={continuation:{tokenize:yh},exit:bh,name:"blockQuote",tokenize:_h};function _h(e,t,n){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return Te(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function yh(e,t,n){const r=this;return i;function i(o){return Te(o)?Be(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(ts,t,n)(o)}}function bh(e){e.exit("blockQuote")}const ns={name:"characterEscape",tokenize:wh};function wh(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return nh(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const rs={name:"characterReference",tokenize:xh};function xh(e,t,n){const r=this;let i=0,a,o;return l;function l(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),s}function s(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),a=31,o=Pt,d(f))}function u(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=th,d):(e.enter("characterReferenceValue"),a=7,o=ha,d(f))}function d(f){if(f===59&&i){const v=e.exit("characterReferenceValue");return o===Pt&&!Jl(r.sliceSerialize(v))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<a?(e.consume(f),d):n(f)}}const wo={partial:!0,tokenize:kh},xo={concrete:!0,name:"codeFenced",tokenize:Sh};function Sh(e,t,n){const r=this,i={partial:!0,tokenize:S};let a=0,o=0,l;return s;function s(b){return u(b)}function u(b){const I=r.events[r.events.length-1];return a=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=b,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(b)}function d(b){return b===l?(o++,e.consume(b),d):o<3?n(b):(e.exit("codeFencedFenceSequence"),Te(b)?Be(e,f,"whitespace")(b):f(b))}function f(b){return b===null||fe(b)?(e.exit("codeFencedFence"),r.interrupt?t(b):e.check(wo,k,O)(b)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(b))}function v(b){return b===null||fe(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(b)):Te(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Be(e,c,"whitespace")(b)):b===96&&b===l?n(b):(e.consume(b),v)}function c(b){return b===null||fe(b)?f(b):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===null||fe(b)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(b)):b===96&&b===l?n(b):(e.consume(b),g)}function k(b){return e.attempt(i,O,m)(b)}function m(b){return e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),y}function y(b){return a>0&&Te(b)?Be(e,$,"linePrefix",a+1)(b):$(b)}function $(b){return b===null||fe(b)?e.check(wo,k,O)(b):(e.enter("codeFlowValue"),D(b))}function D(b){return b===null||fe(b)?(e.exit("codeFlowValue"),$(b)):(e.consume(b),D)}function O(b){return e.exit("codeFenced"),t(b)}function S(b,I,z){let B=0;return H;function H(Z){return b.enter("lineEnding"),b.consume(Z),b.exit("lineEnding"),M}function M(Z){return b.enter("codeFencedFence"),Te(Z)?Be(b,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Z):j(Z)}function j(Z){return Z===l?(b.enter("codeFencedFenceSequence"),Y(Z)):z(Z)}function Y(Z){return Z===l?(B++,b.consume(Z),Y):B>=o?(b.exit("codeFencedFenceSequence"),Te(Z)?Be(b,J,"whitespace")(Z):J(Z)):z(Z)}function J(Z){return Z===null||fe(Z)?(b.exit("codeFencedFence"),I(Z)):z(Z)}}}function kh(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Xi={name:"codeIndented",tokenize:$h},Eh={partial:!0,tokenize:Ih};function $h(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),Be(e,a,"linePrefix",5)(u)}function a(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?s(u):fe(u)?e.attempt(Eh,o,s)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||fe(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function s(u){return e.exit("codeIndented"),t(u)}}function Ih(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):fe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Be(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):fe(o)?i(o):n(o)}}const Ph={name:"codeText",previous:Th,resolve:Ch,tokenize:Ah};function Ch(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Th(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Ah(e,t,n){let r=0,i,a;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),l(f)}function l(f){return f===96?(e.consume(f),r++,l):(e.exit("codeTextSequence"),s(f))}function s(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),s):f===96?(a=e.enter("codeTextSequence"),i=0,d(f)):fe(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),s):(e.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||fe(f)?(e.exit("codeTextData"),s(f)):(e.consume(f),u)}function d(f){return f===96?(e.consume(f),i++,d):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(a.type="codeTextData",u(f))}}class Dh{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&xr(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),xr(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),xr(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);xr(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);xr(this.left,n.reverse())}}}function xr(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function is(e){const t={};let n=-1,r,i,a,o,l,s,u;const d=new Dh(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(s=r[1]._tokenizer.events,a=0,a<s.length&&s[a][1].type==="lineEndingBlank"&&(a+=2),a<s.length&&s[a][1].type==="content"))for(;++a<s.length&&s[a][1].type!=="content";)s[a][1].type==="chunkText"&&(s[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Rh(d,n)),n=t[n],u=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(o=d.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},l=d.slice(i,n),l.unshift(r),d.splice(i,n-i+1,l))}}return nn(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function Rh(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,s=[],u={};let d,f,v=-1,c=n,g=0,k=0;const m=[k];for(;c;){for(;e.get(++i)[1]!==c;);a.push(i),c._tokenizer||(d=r.sliceStream(c),c.next||d.push(null),f&&o.defineSkip(c.start),c._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),c._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=c,c=c.next}for(c=n;++v<l.length;)l[v][0]==="exit"&&l[v-1][0]==="enter"&&l[v][1].type===l[v-1][1].type&&l[v][1].start.line!==l[v][1].end.line&&(k=v+1,m.push(k),c._tokenizer=void 0,c.previous=void 0,c=c.next);for(o.events=[],c?(c._tokenizer=void 0,c.previous=void 0):m.pop(),v=m.length;v--;){const y=l.slice(m[v],m[v+1]),$=a.pop();s.push([$,$+y.length-1]),e.splice($,2,y)}for(s.reverse(),v=-1;++v<s.length;)u[g+s[v][0]]=g+s[v][1],g+=s[v][1]-s[v][0]-1;return u}const Nh={resolve:Lh,tokenize:zh},Oh={partial:!0,tokenize:Fh};function Lh(e){return is(e),e}function zh(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):fe(l)?e.check(Oh,o,a)(l):(e.consume(l),i)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Fh(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Be(e,a,"linePrefix")}function a(o){if(o===null||fe(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function as(e,t,n,r,i,a,o,l,s){const u=s||Number.POSITIVE_INFINITY;let d=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(y),e.exit(a),v):y===null||y===32||y===41||va(y)?n(y):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),k(y))}function v(y){return y===62?(e.enter(a),e.consume(y),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),c(y))}function c(y){return y===62?(e.exit("chunkString"),e.exit(l),v(y)):y===null||y===60||fe(y)?n(y):(e.consume(y),y===92?g:c)}function g(y){return y===60||y===62||y===92?(e.consume(y),c):c(y)}function k(y){return!d&&(y===null||y===41||kt(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(y)):d<u&&y===40?(e.consume(y),d++,k):y===41?(e.consume(y),d--,k):y===null||y===32||y===40||va(y)?n(y):(e.consume(y),y===92?m:k)}function m(y){return y===40||y===41||y===92?(e.consume(y),k):k(y)}}function os(e,t,n,r,i,a){const o=this;let l=0,s;return u;function u(c){return e.enter(r),e.enter(i),e.consume(c),e.exit(i),e.enter(a),d}function d(c){return l>999||c===null||c===91||c===93&&!s||c===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(c):c===93?(e.exit(a),e.enter(i),e.consume(c),e.exit(i),e.exit(r),t):fe(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),f(c))}function f(c){return c===null||c===91||c===93||fe(c)||l++>999?(e.exit("chunkString"),d(c)):(e.consume(c),s||(s=!Te(c)),c===92?v:f)}function v(c){return c===91||c===92||c===93?(e.consume(c),l++,f):f(c)}}function ls(e,t,n,r,i,a){let o;return l;function l(v){return v===34||v===39||v===40?(e.enter(r),e.enter(i),e.consume(v),e.exit(i),o=v===40?41:v,s):n(v)}function s(v){return v===o?(e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):(e.enter(a),u(v))}function u(v){return v===o?(e.exit(a),s(o)):v===null?n(v):fe(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),Be(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(v))}function d(v){return v===o||v===null||fe(v)?(e.exit("chunkString"),u(v)):(e.consume(v),v===92?f:d)}function f(v){return v===o||v===92?(e.consume(v),d):d(v)}}function Ar(e,t){let n;return r;function r(i){return fe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Te(i)?Be(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Bh={name:"definition",tokenize:qh},Mh={partial:!0,tokenize:jh};function qh(e,t,n){const r=this;let i;return a;function a(c){return e.enter("definition"),o(c)}function o(c){return os.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(c)}function l(c){return i=Lr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),c===58?(e.enter("definitionMarker"),e.consume(c),e.exit("definitionMarker"),s):n(c)}function s(c){return kt(c)?Ar(e,u)(c):u(c)}function u(c){return as(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(c)}function d(c){return e.attempt(Mh,f,f)(c)}function f(c){return Te(c)?Be(e,v,"whitespace")(c):v(c)}function v(c){return c===null||fe(c)?(e.exit("definition"),r.parser.defined.push(i),t(c)):n(c)}}function jh(e,t,n){return r;function r(l){return kt(l)?Ar(e,i)(l):n(l)}function i(l){return ls(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return Te(l)?Be(e,o,"whitespace")(l):o(l)}function o(l){return l===null||fe(l)?t(l):n(l)}}const Hh={name:"hardBreakEscape",tokenize:Uh};function Uh(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return fe(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const Vh={name:"headingAtx",resolve:Yh,tokenize:Wh};function Yh(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},nn(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function Wh(e,t,n){let r=0;return i;function i(d){return e.enter("atxHeading"),a(d)}function a(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||kt(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),s(d)):d===null||fe(d)?(e.exit("atxHeading"),t(d)):Te(d)?Be(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function s(d){return d===35?(e.consume(d),s):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||kt(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const Gh=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],So=["pre","script","style","textarea"],Qh={concrete:!0,name:"htmlFlow",resolveTo:Zh,tokenize:Jh},Xh={partial:!0,tokenize:tp},Kh={partial:!0,tokenize:ep};function Zh(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Jh(e,t,n){const r=this;let i,a,o,l,s;return u;function u(_){return d(_)}function d(_){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(_),f}function f(_){return _===33?(e.consume(_),v):_===47?(e.consume(_),a=!0,k):_===63?(e.consume(_),i=3,r.interrupt?t:w):Xt(_)?(e.consume(_),o=String.fromCharCode(_),m):n(_)}function v(_){return _===45?(e.consume(_),i=2,c):_===91?(e.consume(_),i=5,l=0,g):Xt(_)?(e.consume(_),i=4,r.interrupt?t:w):n(_)}function c(_){return _===45?(e.consume(_),r.interrupt?t:w):n(_)}function g(_){const ue="CDATA[";return _===ue.charCodeAt(l++)?(e.consume(_),l===ue.length?r.interrupt?t:j:g):n(_)}function k(_){return Xt(_)?(e.consume(_),o=String.fromCharCode(_),m):n(_)}function m(_){if(_===null||_===47||_===62||kt(_)){const ue=_===47,me=o.toLowerCase();return!ue&&!a&&So.includes(me)?(i=1,r.interrupt?t(_):j(_)):Gh.includes(o.toLowerCase())?(i=6,ue?(e.consume(_),y):r.interrupt?t(_):j(_)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(_):a?$(_):D(_))}return _===45||Pt(_)?(e.consume(_),o+=String.fromCharCode(_),m):n(_)}function y(_){return _===62?(e.consume(_),r.interrupt?t:j):n(_)}function $(_){return Te(_)?(e.consume(_),$):H(_)}function D(_){return _===47?(e.consume(_),H):_===58||_===95||Xt(_)?(e.consume(_),O):Te(_)?(e.consume(_),D):H(_)}function O(_){return _===45||_===46||_===58||_===95||Pt(_)?(e.consume(_),O):S(_)}function S(_){return _===61?(e.consume(_),b):Te(_)?(e.consume(_),S):D(_)}function b(_){return _===null||_===60||_===61||_===62||_===96?n(_):_===34||_===39?(e.consume(_),s=_,I):Te(_)?(e.consume(_),b):z(_)}function I(_){return _===s?(e.consume(_),s=null,B):_===null||fe(_)?n(_):(e.consume(_),I)}function z(_){return _===null||_===34||_===39||_===47||_===60||_===61||_===62||_===96||kt(_)?S(_):(e.consume(_),z)}function B(_){return _===47||_===62||Te(_)?D(_):n(_)}function H(_){return _===62?(e.consume(_),M):n(_)}function M(_){return _===null||fe(_)?j(_):Te(_)?(e.consume(_),M):n(_)}function j(_){return _===45&&i===2?(e.consume(_),te):_===60&&i===1?(e.consume(_),re):_===62&&i===4?(e.consume(_),ee):_===63&&i===3?(e.consume(_),w):_===93&&i===5?(e.consume(_),ve):fe(_)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Xh,ge,Y)(_)):_===null||fe(_)?(e.exit("htmlFlowData"),Y(_)):(e.consume(_),j)}function Y(_){return e.check(Kh,J,ge)(_)}function J(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),Z}function Z(_){return _===null||fe(_)?Y(_):(e.enter("htmlFlowData"),j(_))}function te(_){return _===45?(e.consume(_),w):j(_)}function re(_){return _===47?(e.consume(_),o="",le):j(_)}function le(_){if(_===62){const ue=o.toLowerCase();return So.includes(ue)?(e.consume(_),ee):j(_)}return Xt(_)&&o.length<8?(e.consume(_),o+=String.fromCharCode(_),le):j(_)}function ve(_){return _===93?(e.consume(_),w):j(_)}function w(_){return _===62?(e.consume(_),ee):_===45&&i===2?(e.consume(_),w):j(_)}function ee(_){return _===null||fe(_)?(e.exit("htmlFlowData"),ge(_)):(e.consume(_),ee)}function ge(_){return e.exit("htmlFlow"),t(_)}}function ep(e,t,n){const r=this;return i;function i(o){return fe(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function tp(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Oi,t,n)}}const np={name:"htmlText",tokenize:rp};function rp(e,t,n){const r=this;let i,a,o;return l;function l(w){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(w),s}function s(w){return w===33?(e.consume(w),u):w===47?(e.consume(w),S):w===63?(e.consume(w),D):Xt(w)?(e.consume(w),z):n(w)}function u(w){return w===45?(e.consume(w),d):w===91?(e.consume(w),a=0,g):Xt(w)?(e.consume(w),$):n(w)}function d(w){return w===45?(e.consume(w),c):n(w)}function f(w){return w===null?n(w):w===45?(e.consume(w),v):fe(w)?(o=f,re(w)):(e.consume(w),f)}function v(w){return w===45?(e.consume(w),c):f(w)}function c(w){return w===62?te(w):w===45?v(w):f(w)}function g(w){const ee="CDATA[";return w===ee.charCodeAt(a++)?(e.consume(w),a===ee.length?k:g):n(w)}function k(w){return w===null?n(w):w===93?(e.consume(w),m):fe(w)?(o=k,re(w)):(e.consume(w),k)}function m(w){return w===93?(e.consume(w),y):k(w)}function y(w){return w===62?te(w):w===93?(e.consume(w),y):k(w)}function $(w){return w===null||w===62?te(w):fe(w)?(o=$,re(w)):(e.consume(w),$)}function D(w){return w===null?n(w):w===63?(e.consume(w),O):fe(w)?(o=D,re(w)):(e.consume(w),D)}function O(w){return w===62?te(w):D(w)}function S(w){return Xt(w)?(e.consume(w),b):n(w)}function b(w){return w===45||Pt(w)?(e.consume(w),b):I(w)}function I(w){return fe(w)?(o=I,re(w)):Te(w)?(e.consume(w),I):te(w)}function z(w){return w===45||Pt(w)?(e.consume(w),z):w===47||w===62||kt(w)?B(w):n(w)}function B(w){return w===47?(e.consume(w),te):w===58||w===95||Xt(w)?(e.consume(w),H):fe(w)?(o=B,re(w)):Te(w)?(e.consume(w),B):te(w)}function H(w){return w===45||w===46||w===58||w===95||Pt(w)?(e.consume(w),H):M(w)}function M(w){return w===61?(e.consume(w),j):fe(w)?(o=M,re(w)):Te(w)?(e.consume(w),M):B(w)}function j(w){return w===null||w===60||w===61||w===62||w===96?n(w):w===34||w===39?(e.consume(w),i=w,Y):fe(w)?(o=j,re(w)):Te(w)?(e.consume(w),j):(e.consume(w),J)}function Y(w){return w===i?(e.consume(w),i=void 0,Z):w===null?n(w):fe(w)?(o=Y,re(w)):(e.consume(w),Y)}function J(w){return w===null||w===34||w===39||w===60||w===61||w===96?n(w):w===47||w===62||kt(w)?B(w):(e.consume(w),J)}function Z(w){return w===47||w===62||kt(w)?B(w):n(w)}function te(w){return w===62?(e.consume(w),e.exit("htmlTextData"),e.exit("htmlText"),t):n(w)}function re(w){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),le}function le(w){return Te(w)?Be(e,ve,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):ve(w)}function ve(w){return e.enter("htmlTextData"),o(w)}}const La={name:"labelEnd",resolveAll:lp,resolveTo:sp,tokenize:up},ip={tokenize:cp},ap={tokenize:fp},op={tokenize:dp};function lp(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&nn(e,0,e.length,n),e}function sp(e,t){let n=e.length,r=0,i,a,o,l;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const s={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",s,t],["enter",u,t]],l=vt(l,e.slice(a+1,a+r+3)),l=vt(l,[["enter",d,t]]),l=vt(l,Oa(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=vt(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=vt(l,e.slice(o+1)),l=vt(l,[["exit",s,t]]),nn(e,a,e.length,l),e}function up(e,t,n){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return l;function l(v){return a?a._inactive?f(v):(o=r.parser.defined.includes(Lr(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),s):n(v)}function s(v){return v===40?e.attempt(ip,d,o?d:f)(v):v===91?e.attempt(ap,d,o?u:f)(v):o?d(v):f(v)}function u(v){return e.attempt(op,d,f)(v)}function d(v){return t(v)}function f(v){return a._balanced=!0,n(v)}}function cp(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return kt(f)?Ar(e,a)(f):a(f)}function a(f){return f===41?d(f):as(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return kt(f)?Ar(e,s)(f):d(f)}function l(f){return n(f)}function s(f){return f===34||f===39||f===40?ls(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function u(f){return kt(f)?Ar(e,d)(f):d(f)}function d(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function fp(e,t,n){const r=this;return i;function i(l){return os.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(Lr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function dp(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const vp={name:"labelStartImage",resolveAll:La.resolveAll,tokenize:hp};function hp(e,t,n){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const pp={name:"labelStartLink",resolveAll:La.resolveAll,tokenize:gp};function gp(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Ki={name:"lineEnding",tokenize:mp};function mp(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Be(e,t,"linePrefix")}}const ui={name:"thematicBreak",tokenize:_p};function _p(e,t,n){let r=0,i;return a;function a(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,l(u)}function l(u){return u===i?(e.enter("thematicBreakSequence"),s(u)):r>=3&&(u===null||fe(u))?(e.exit("thematicBreak"),t(u)):n(u)}function s(u){return u===i?(e.consume(u),r++,s):(e.exit("thematicBreakSequence"),Te(u)?Be(e,l,"whitespace")(u):l(u))}}const wt={continuation:{tokenize:xp},exit:kp,name:"list",tokenize:wp},yp={partial:!0,tokenize:Ep},bp={partial:!0,tokenize:Sp};function wp(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(c){const g=r.containerState.type||(c===42||c===43||c===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||c===r.containerState.marker:ha(c)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),c===42||c===45?e.check(ui,n,u)(c):u(c);if(!r.interrupt||c===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(c)}return n(c)}function s(c){return ha(c)&&++o<10?(e.consume(c),s):(!r.interrupt||o<2)&&(r.containerState.marker?c===r.containerState.marker:c===41||c===46)?(e.exit("listItemValue"),u(c)):n(c)}function u(c){return e.enter("listItemMarker"),e.consume(c),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||c,e.check(Oi,r.interrupt?n:d,e.attempt(yp,v,f))}function d(c){return r.containerState.initialBlankLine=!0,a++,v(c)}function f(c){return Te(c)?(e.enter("listItemPrefixWhitespace"),e.consume(c),e.exit("listItemPrefixWhitespace"),v):n(c)}function v(c){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(c)}}function xp(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Oi,i,a);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Be(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!Te(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(bp,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Be(e,e.attempt(wt,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Sp(e,t,n){const r=this;return Be(e,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function kp(e){e.exit(this.containerState.type)}function Ep(e,t,n){const r=this;return Be(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!Te(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const ko={name:"setextUnderline",resolveTo:$p,tokenize:Ip};function $p(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function Ip(e,t,n){const r=this;let i;return a;function a(u){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===i?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Te(u)?Be(e,s,"lineSuffix")(u):s(u))}function s(u){return u===null||fe(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const Pp={tokenize:Cp};function Cp(e){const t=this,n=e.attempt(Oi,r,e.attempt(this.parser.constructs.flowInitial,i,Be(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Nh,i)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Tp={resolveAll:us()},Ap=ss("string"),Dp=ss("text");function ss(e){return{resolveAll:us(e==="text"?Rp:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],a=n.attempt(i,o,l);return o;function o(d){return u(d)?a(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),s}function s(d){return u(d)?(n.exit("data"),a(d)):(n.consume(d),s)}function u(d){if(d===null)return!0;const f=i[d];let v=-1;if(f)for(;++v<f.length;){const c=f[v];if(!c.previous||c.previous.call(r,r.previous))return!0}return!1}}}function us(e){return t;function t(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,r):n}}function Rp(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let a=i.length,o=-1,l=0,s;for(;a--;){const u=i[a];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)s=!0,l++;else if(u!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||s||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const Np={42:wt,43:wt,45:wt,48:wt,49:wt,50:wt,51:wt,52:wt,53:wt,54:wt,55:wt,56:wt,57:wt,62:ts},Op={91:Bh},Lp={[-2]:Xi,[-1]:Xi,32:Xi},zp={35:Vh,42:ui,45:[ko,ui],60:Qh,61:ko,95:ui,96:xo,126:xo},Fp={38:rs,92:ns},Bp={[-5]:Ki,[-4]:Ki,[-3]:Ki,33:vp,38:rs,42:pa,60:[ph,np],91:pp,92:[Hh,ns],93:La,95:pa,96:Ph},Mp={null:[pa,Tp]},qp={null:[42,95]},jp={null:[]},Hp=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:qp,contentInitial:Op,disable:jp,document:Np,flow:zp,flowInitial:Lp,insideSpan:Mp,string:Fp,text:Bp},Symbol.toStringTag,{value:"Module"}));function Up(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let o=[],l=[];const s={attempt:I(S),check:I(b),consume:$,enter:D,exit:O,interrupt:I(b,{interrupt:!0})},u={code:null,containerState:{},defineSkip:k,events:[],now:g,parser:e,previous:null,sliceSerialize:v,sliceStream:c,write:f};let d=t.tokenize.call(u,s);return t.resolveAll&&a.push(t),u;function f(M){return o=vt(o,M),m(),o[o.length-1]!==null?[]:(z(t,0),u.events=Oa(a,u.events,u),u.events)}function v(M,j){return Yp(c(M),j)}function c(M){return Vp(o,M)}function g(){const{_bufferIndex:M,_index:j,line:Y,column:J,offset:Z}=r;return{_bufferIndex:M,_index:j,line:Y,column:J,offset:Z}}function k(M){i[M.line]=M.column,H()}function m(){let M;for(;r._index<o.length;){const j=o[r._index];if(typeof j=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<j.length;)y(j.charCodeAt(r._bufferIndex));else y(j)}}function y(M){d=d(M)}function $(M){fe(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,H()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=M}function D(M,j){const Y=j||{};return Y.type=M,Y.start=g(),u.events.push(["enter",Y,u]),l.push(Y),Y}function O(M){const j=l.pop();return j.end=g(),u.events.push(["exit",j,u]),j}function S(M,j){z(M,j.from)}function b(M,j){j.restore()}function I(M,j){return Y;function Y(J,Z,te){let re,le,ve,w;return Array.isArray(J)?ge(J):"tokenize"in J?ge([J]):ee(J);function ee(ce){return ke;function ke(Ee){const Ce=Ee!==null&&ce[Ee],He=Ee!==null&&ce.null,We=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(He)?He:He?[He]:[]];return ge(We)(Ee)}}function ge(ce){return re=ce,le=0,ce.length===0?te:_(ce[le])}function _(ce){return ke;function ke(Ee){return w=B(),ve=ce,ce.partial||(u.currentConstruct=ce),ce.name&&u.parser.constructs.disable.null.includes(ce.name)?me():ce.tokenize.call(j?Object.assign(Object.create(u),j):u,s,ue,me)(Ee)}}function ue(ce){return M(ve,w),Z}function me(ce){return w.restore(),++le<re.length?_(re[le]):te}}}function z(M,j){M.resolveAll&&!a.includes(M)&&a.push(M),M.resolve&&nn(u.events,j,u.events.length-j,M.resolve(u.events.slice(j),u)),M.resolveTo&&(u.events=M.resolveTo(u.events,u))}function B(){const M=g(),j=u.previous,Y=u.currentConstruct,J=u.events.length,Z=Array.from(l);return{from:J,restore:te};function te(){r=M,u.previous=j,u.currentConstruct=Y,u.events.length=J,l=Z,H()}}function H(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Vp(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,a)];else{if(o=e.slice(n,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function Yp(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function Wp(e){const r={constructs:Wv([Hp,...(e||{}).extensions||[]]),content:i(sh),defined:[],document:i(ch),flow:i(Pp),lazy:{},string:i(Ap),text:i(Dp)};return r;function i(a){return o;function o(l){return Up(r,a,l)}}}function Gp(e){for(;!is(e););return e}const Eo=/[\0\t\n\r]/g;function Qp(){let e=1,t="",n=!0,r;return i;function i(a,o,l){const s=[];let u,d,f,v,c;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),f=0,t="",n&&(a.charCodeAt(0)===65279&&f++,n=void 0);f<a.length;){if(Eo.lastIndex=f,u=Eo.exec(a),v=u&&u.index!==void 0?u.index:a.length,c=a.charCodeAt(v),!u){t=a.slice(f);break}if(c===10&&f===v&&r)s.push(-3),r=void 0;else switch(r&&(s.push(-5),r=void 0),f<v&&(s.push(a.slice(f,v)),e+=v-f),c){case 0:{s.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,s.push(-2);e++<d;)s.push(-1);break}case 10:{s.push(-4),e=1;break}default:r=!0,e=1}f=v+1}return l&&(r&&s.push(-5),t&&s.push(t),s.push(null)),s}}function Xp(e,t,n){return typeof t!="string"&&(n=t,t=void 0),lh(n)(Gp(Wp(n).document().write(Qp()(e,t,!0))))}var Kp=F('<form method="dialog"><button type="submit">Close</button></form> <!>',1),Zp=F('<div class="content svelte-z28whr"><button type="button" class="svelte-z28whr">â¶</button> <!></div> <dialog class="svelte-z28whr"><!></dialog>',1),Jp=F('<div class="content svelte-z28whr"><!></div>');function Sr(e,t){$e(t,!0);const n=()=>qe(ut,"$appSettings",r),[r,i]=it();let a=_t(t,"code",15);const o=Me(()=>Xp(a()));let l=Me(()=>n().edit),s=De(null);function u(){x(s)&&x(s).showModal()}function d(k){if(x(s)){var m=x(s).getBoundingClientRect(),y=m.top<=k.clientY&&k.clientY<=m.top+m.height&&m.left<=k.clientX&&k.clientX<=m.left+m.width;y||x(s).close()}}var f=qt(),v=K(f);{var c=k=>{var m=Zp(),y=K(m),$=L(y);$.__click=u;var D=P($,2);ho(D,{autofocus:!0,get value(){return a()},set value(b){a(b)}}),N(y);var O=P(y,2);O.__click=d;var S=L(O);oe(S,{column:!0,align:"end",children:(b,I)=>{var z=Kp(),B=P(K(z),2);ho(B,{autofocus:!0,get value(){return a()},set value(H){a(H)}}),A(b,z)}}),N(O),Hn(O,b=>se(s,b),()=>x(s)),A(k,m)},g=k=>{var m=Jp(),y=L(m);{var $=D=>{var O=qt(),S=K(O);rc(S,()=>x(o)),A(D,O)};ze(y,D=>{x(o)&&D($)})}N(m),A(k,m)};ze(v,k=>{x(l)?k(c):k(g,!1)})}A(e,f),Ie(),i()}At(["click"]);var eg=F('<span class="label svelte-xov0bq">Inspiration</span> <div style="min-height: 1.4em"></div>',1),tg=F('<span class="label svelte-xov0bq">Size</span> <span class="value svelte-xov0bq"><!></span>',1),ng=F('<span class="label svelte-xov0bq">Initiative</span> <span class="value svelte-xov0bq"> </span>',1),rg=F('<span class="label svelte-xov0bq">Speed</span> <span class="value svelte-xov0bq"><!></span>',1),ig=F('<span class="label svelte-xov0bq">Proficiency Bonus</span> <span class="value svelte-xov0bq"><!></span>',1),ag=F("<!> <!> <!> <!> <!>",1);function og(e,t){$e(t,!0);const n=()=>qe(t.character,"$character",r),[r,i]=it();oe(e,{column:!0,justify:"between",sm:!0,children:(a,o)=>{var l=ag(),s=K(l);Je(s,{nogrow:!0,children:(c,g)=>{oe(c,{column:!0,sm:!0,children:(k,m)=>{var y=eg();xe(2),A(k,y)},$$slots:{default:!0}})}});var u=P(s,2);Je(u,{nogrow:!0,children:(c,g)=>{oe(c,{column:!0,sm:!0,children:(k,m)=>{var y=tg(),$=P(K(y),2),D=L($);je(D,{get value(){return n().size},set value(O){he(t.character,V(n).size=O,V(n))}}),N($),A(k,y)},$$slots:{default:!0}})}});var d=P(u,2);Je(d,{nogrow:!0,children:(c,g)=>{oe(c,{column:!0,sm:!0,children:(k,m)=>{var y=ng(),$=P(K(y),2),D=L($,!0);N($),pe(O=>Ye(D,O),[()=>Rl(Ti(n().abilityScores.dex))]),A(k,y)},$$slots:{default:!0}})}});var f=P(d,2);Je(f,{nogrow:!0,children:(c,g)=>{oe(c,{column:!0,sm:!0,children:(k,m)=>{var y=rg(),$=P(K(y),2),D=L($);je(D,{get value(){return n().speed},set value(O){he(t.character,V(n).speed=O,V(n))}}),N($),A(k,y)},$$slots:{default:!0}})}});var v=P(f,2);Je(v,{nogrow:!0,children:(c,g)=>{oe(c,{column:!0,sm:!0,children:(k,m)=>{var y=ig(),$=P(K(y),2),D=L($);je(D,{get value(){return n().proficiencyBonus},set value(O){he(t.character,V(n).proficiencyBonus=O,V(n))}}),N($),A(k,y)},$$slots:{default:!0}})}}),A(a,l)},$$slots:{default:!0}}),Ie(),i()}const lg={acrobatics:"Acrobatics",animalHandling:"Animal Handling",arcana:"Arcana",athletics:"Athletics",deception:"Deception",history:"History",insight:"Insight",intimidation:"Intimidation",investigation:"Investigation",medicine:"Medicine",nature:"Nature",perception:"Perception",performance:"Performance",persuasion:"Persuasion",religion:"Religion",sleightOfHand:"Sleight of Hand",stealth:"Stealth",survival:"Survival",str:"Strength",dex:"Dexterity",con:"Constitution",int:"Intelligence",wis:"Wisdom",cha:"Charisma",none:"None",savingThrow:"Saving Throw"};function cs(e){return lg[e]}var sg=F('<div class="item svelte-1wvd7v4"><div class="name svelte-1wvd7v4"> </div> <div class="modifier svelte-1wvd7v4"><!></div> <span class="score svelte-1wvd7v4"><!> <div class="input svelte-1wvd7v4"><!></div></span></div>');function ug(e,t){$e(t,!0);const n=()=>qe(t.character,"$character",r),[r,i]=it(),a=Me(()=>n().abilityScores[t.ability]);var o=sg(),l=L(o),s=L(l,!0);N(l);var u=P(l,2),d=L(u);{let k=Me(()=>Ti(x(a)));Na(d,{get modifier(){return x(k)}})}N(u);var f=P(u,2),v=L(f);Je(v,{rounded:!0,absolute:!0,noshadow:!0,small:!0});var c=P(v,2),g=L(c);je(g,{get value(){return n().abilityScores[t.ability]},set value(k){he(t.character,V(n).abilityScores[t.ability]=k,V(n))}}),N(c),N(f),N(o),pe(k=>Ye(s,k),[()=>cs(t.ability)]),A(e,o),Ie(),i()}var cg=F('<button aria-label="Proficiency"></button>');function fg(e,t){$e(t,!0);let n=_t(t,"value",15);const r=["none","proficient","double","half"];function i(){const s=(r.indexOf(n()??"none")+1)%r.length;n(r[s])}var a=cg();a.__click=i;let o;pe(()=>o=Tt(a,1,"svelte-1vb6rvd",null,o,{"is-proficient":n()==="proficient","is-double":n()==="double","is-half":n()==="half"})),A(e,a),Ie()}At(["click"]);var dg=F('<div class="wrapper svelte-1jy7427"><!> <span class="modifier svelte-1jy7427"><!></span> <span class="skill"> </span></div>');function $o(e,t){$e(t,!0);const n=()=>qe(t.character,"$character",i),r=()=>qe(ut,"$appSettings",i),[i,a]=it(),o=Me(()=>t.skill==="savingThrow"?n().abilityProficiencies.includes(t.ability)?"proficient":"none":n().skillProficiencies[t.skill]??"none"),l=Me(()=>Lc(n().abilityScores[t.ability]??0,n().proficiencyBonus,x(o)));var s=dg(),u=L(s),d=()=>x(o),f=m=>{r().edit&&(t.skill==="savingThrow"?he(t.character,V(n).abilityProficiencies=Fc(n().abilityProficiencies,t.ability),V(n)):he(t.character,V(n).skillProficiencies[t.skill]=m,V(n)))};fg(u,{get value(){return d()},set value(m){f(m)}});var v=P(u,2),c=L(v);Na(c,{get modifier(){return x(l)}}),N(v);var g=P(v,2),k=L(g,!0);N(g),N(s),pe(m=>Ye(k,m),[()=>cs(t.skill)]),A(e,s),Ie(),a()}var vg=F("<!> <!>",1),hg=F('<div class="inner svelte-1ftln1h"><!> <!> <!> <!></div>');function Kn(e,t){$e(t,!0);const n=Me(()=>zc(qf).flatMap(([r,i])=>t.ability!==i?[]:{skill:r,ability:i}));Je(e,{children:(r,i)=>{var a=hg(),o=L(a);ug(o,{get ability(){return t.ability},get character(){return t.character}});var l=P(o,2);_e(l,{});var s=P(l,2);$o(s,{skill:"savingThrow",get ability(){return t.ability},get character(){return t.character}});var u=P(s,2);{var d=f=>{var v=vg(),c=K(v);_e(c,{});var g=P(c,2);Wt(g,17,()=>x(n),mn,(k,m)=>{$o(k,{get skill(){return x(m).skill},get ability(){return t.ability},get character(){return t.character}})}),A(f,v)};ze(u,f=>{x(n).length>0&&f(d)})}N(a),A(r,a)}}),Ie()}var pg=F('<span>+</span> <div class="hit"><!></div>',1),gg=F('<button class="delete-button" type="button">delete</button>'),mg=F('<div class="seperator svelte-120kl8r"><!></div> <div class="line svelte-120kl8r"><div class="cell name svelte-120kl8r"><!></div> <!> <div class="cell svelte-120kl8r"><!></div> <!> <div class="cell damage svelte-120kl8r"><!></div> <!> <div class="cell details svelte-120kl8r"><!></div> <!></div>',1),_g=F("<span>Add line</span>"),yg=F('<div><div class="line heading svelte-120kl8r"><div class="cell name svelte-120kl8r">Name</div> <!> <div class="cell hit svelte-120kl8r">Hit</div> <!> <div class="cell damage svelte-120kl8r">Damage</div> <!> <div class="cell details svelte-120kl8r">Details</div></div> <!> <!></div>');function bg(e,t){$e(t,!0);const n=()=>qe(ut,"$appSettings",i),r=()=>qe(t.character,"$character",i),[i,a]=it(),o=Me(()=>n().edit),l=()=>{r().weapons.push({name:"",hit:0,damage:"",details:""}),he(t.character,V(r).weapons=r().weapons,V(r))},s=u=>{const d=r().weapons.indexOf(u);r().weapons.splice(d,1),he(t.character,V(r).weapons=r().weapons,V(r))};Ft(e,{children:(u,d)=>{var f=yg();let v;var c=L(f),g=P(L(c),2);_e(g,{vertical:!0});var k=P(g,4);_e(k,{vertical:!0});var m=P(k,4);_e(m,{vertical:!0}),xe(2),N(c);var y=P(c,2);Wt(y,1,()=>r().weapons,mn,(O,S,b)=>{var I=mg(),z=K(I),B=L(z);_e(B,{}),N(z);var H=P(z,2),M=L(H),j=L(M);je(j,{get value(){return x(S).name},set value(ue){x(S).name=ue,fn(i,"$character")}}),N(M);var Y=P(M,2);_e(Y,{vertical:!0});var J=P(Y,2),Z=L(J);oe(Z,{align:"center",nogap:!0,children:(ue,me)=>{var ce=pg(),ke=P(K(ce),2),Ee=L(ke);je(Ee,{get value(){return x(S).hit},set value(Ce){x(S).hit=Ce,fn(i,"$character")}}),N(ke),A(ue,ce)}}),N(J);var te=P(J,2);_e(te,{vertical:!0});var re=P(te,2),le=L(re);je(le,{get value(){return x(S).damage},set value(ue){x(S).damage=ue,fn(i,"$character")}}),N(re);var ve=P(re,2);_e(ve,{vertical:!0});var w=P(ve,2),ee=L(w);je(ee,{get value(){return x(S).details},set value(ue){x(S).details=ue,fn(i,"$character")}}),N(w);var ge=P(w,2);{var _=ue=>{var me=gg();me.__click=()=>s(x(S)),A(ue,me)};ze(ge,ue=>{x(o)&&ue(_)})}N(H),A(O,I)});var $=P(y,2);{var D=O=>{oe(O,{children:(S,b)=>{dt(S,{onclick:l,children:(I,z)=>{var B=_g();A(I,B)},$$slots:{default:!0}})},$$slots:{default:!0}})};ze($,O=>{x(o)&&O(D)})}N(f),pe(()=>v=Tt(f,1,"items svelte-120kl8r",null,v,{edit:x(o)})),A(u,f)}}),Ie(),a()}At(["click"]);var wg=F('<div class="wrapper svelte-1xzr1y2"><div class="inner svelte-1xzr1y2"><!></div></div>');function Io(e,t){let n=De(null),r=De(null);var i=wg(),a=L(i),o=L(a);ht(o,()=>t.children??Re),N(a),Hn(a,l=>se(r,l),()=>x(r)),N(i),Hn(i,l=>se(n,l),()=>x(n)),A(e,i)}var xg=F('<span class="languages svelte-1ghi6lp"><!></span>'),Sg=F('<div class="inner svelte-1ghi6lp"><div class="side svelte-1ghi6lp"><h1 class="name svelte-1ghi6lp"><!></h1> <div class="avatar svelte-1ghi6lp"><!></div> <div class="abilities svelte-1ghi6lp"><div class="line svelte-1ghi6lp"><!> <!> <!> <!> <!></div> <div class="line svelte-1ghi6lp"><!> <!> <!></div></div></div> <div class="main svelte-1ghi6lp"><div class="heading svelte-1ghi6lp"><!></div> <div class="combat svelte-1ghi6lp"><!></div> <div class="other svelte-1ghi6lp"><!></div> <div class="weapons svelte-1ghi6lp"><!></div> <div class="feats svelte-1ghi6lp"><!></div> <div class="species svelte-1ghi6lp"><!></div> <div class="class svelte-1ghi6lp"><!></div></div></div>');function kg(e,t){$e(t,!0);const n=()=>qe(t.character,"$character",r),[r,i]=it();Zl(e,{children:(a,o)=>{var l=Sg(),s=L(l),u=L(s),d=L(u);je(d,{get value(){return n().name},set value(_){he(t.character,V(n).name=_,V(n))}}),N(u);var f=P(u,2),v=L(f);Dv(v,{get character(){return t.character}}),N(f);var c=P(f,2),g=L(c),k=L(g);Kn(k,{ability:"str",get character(){return t.character}});var m=P(k,2);Kn(m,{ability:"dex",get character(){return t.character}});var y=P(m,2);Kn(y,{ability:"con",get character(){return t.character}});var $=P(y,2);Ft($,{title:"Proficiencies",children:(_,ue)=>{Sr(_,{get code(){return n().proficienies},set code(me){he(t.character,V(n).proficienies=me,V(n))}})}});var D=P($,2);Ft(D,{title:"Languages",children:(_,ue)=>{var me=xg(),ce=L(me);Sr(ce,{get code(){return n().languages},set code(ke){he(t.character,V(n).languages=ke,V(n))}}),N(me),A(_,me)}}),N(g);var O=P(g,2),S=L(O);Kn(S,{ability:"int",get character(){return t.character}});var b=P(S,2);Kn(b,{ability:"wis",get character(){return t.character}});var I=P(b,2);Kn(I,{ability:"cha",get character(){return t.character}}),N(O),N(c),N(s);var z=P(s,2),B=L(z),H=L(B);Yv(H,{get character(){return t.character}}),N(B);var M=P(B,2),j=L(M);Hv(j,{get character(){return t.character}}),N(M);var Y=P(M,2),J=L(Y);og(J,{get character(){return t.character}}),N(Y);var Z=P(Y,2),te=L(Z);bg(te,{get character(){return t.character}}),N(Z);var re=P(Z,2),le=L(re);Ft(le,{grid:!0,title:"Feats",children:(_,ue)=>{Sr(_,{get code(){return n().features.feats},set code(me){he(t.character,V(n).features.feats=me,V(n))}})}}),N(re);var ve=P(re,2),w=L(ve);Ft(w,{grid:!0,title:"Species",children:(_,ue)=>{Io(_,{children:(me,ce)=>{Sr(me,{get code(){return n().features.species},set code(ke){he(t.character,V(n).features.species=ke,V(n))}})}})}}),N(ve);var ee=P(ve,2),ge=L(ee);Ft(ge,{grid:!0,title:"Class",children:(_,ue)=>{Io(_,{children:(me,ce)=>{Sr(me,{get code(){return n().features.class},set code(ke){he(t.character,V(n).features.class=ke,V(n))}})}})}}),N(ee),N(z),N(l),A(a,l)}}),Ie(),i()}const fs="character.json",ds="avatar.";async function Eg(e){const{BlobReader:t,BlobWriter:n,TextReader:r,ZipWriter:i}=await qr(async()=>{const{BlobReader:f,BlobWriter:v,TextReader:c,ZipWriter:g}=await import("./index-NmetT060.js");return{BlobReader:f,BlobWriter:v,TextReader:c,ZipWriter:g}},[]),a=new n,o=new i(a);let l=structuredClone(e);l.avatar.blob=null;const s=JSON.stringify(l);await o.add(fs,new r(s));const u=e.avatar?.blob;if(u instanceof Blob){let f=u.type?.split("/")[1]||"bin";f==="jpeg"&&(f="jpg");const v=`${ds}${f}`;await o.add(v,new t(u))}await o.close();const d=await a.getData();return new File([d],`${e.slug}.zip`)}async function $g(e){const{BlobReader:t,BlobWriter:n,TextWriter:r,ZipReader:i}=await qr(async()=>{const{BlobReader:f,BlobWriter:v,TextWriter:c,ZipReader:g}=await import("./index-NmetT060.js");return{BlobReader:f,BlobWriter:v,TextWriter:c,ZipReader:g}},[]),a=new i(new t(e)),o=await a.getEntries(),l=o.find(f=>f.directory===!1&&f.filename.startsWith(ds)),s=o.find(f=>f.directory===!1&&f.filename===fs);if(!s)throw new Error("Invalid save data: missing character.json");const[u,d]=await Promise.all([(async()=>{const f=new r;await s.getData(f);const v=await f.getData();return Ni(JSON.parse(v))})(),(async()=>{if(!l)return null;const f=new n;return await l.getData(f),await f.getData()})()]);return u.avatar.blob=d,await a.close(),u}var Ig=F('<input type="file" class="svelte-ozss1q"/> <!>',1),Pg=F("<label><!></label>");function Cg(e,t){$e(t,!0);var n=Pg(),r=L(n);Da(r,{children:(i,a)=>{var o=Ig(),l=K(o);l.__change=u=>{const d=u.currentTarget.files?.[0]??null;t.onchange?.(d),u.currentTarget.value=""};var s=P(l,2);ht(s,()=>t.children??Re),pe(()=>tn(l,"accept",t.accept)),A(i,o)}}),N(n),A(e,n),Ie()}At(["change"]);var Zi,Po;function Tg(){return Po||(Po=1,Zi=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),Zi}var Ag=Tg();const Dg=Xl(Ag);function Rg(e,t){return Dg(e,t)}var Ng=F("<!> <!> <!> <!> <!> <!> <!> <!>",1),Og=F('<!> <!> <div class="toolbar hide-print svelte-va3igi"><!></div>',1),Lg=F("<div><!></div>");function zg(e,t){$e(t,!0);const n=()=>qe(ut,"$appSettings",i),r=()=>qe(x(l),"$character",i),[i,a]=it();let o=_t(t,"characterData",15),l=De(kn(or(structuredClone(o()))));Jt(()=>{_c(se(l,or(structuredClone(o())),!0),"$character",i)});const s=Me(()=>n().hasChanges);Jt(()=>{he(ut,V(n).hasChanges=!Rg(o(),r()),V(n))});const u=()=>{he(ut,V(n).edit=!n().edit,V(n))};async function d(){const m=await Eg(r());await Ol(m,m.name)}async function f(m){try{if(!m)return;const y=await $g(m);x(l).set(y)}catch(y){console.error(y),pi("Something went wrong with importing.")}}async function v(){await Qf(r()),o(r())}var c=Lg();let g;var k=L(c);oe(k,{column:!0,xl:!0,children:(m,y)=>{var $=Og(),D=K($);kg(D,{get character(){return x(l)}});var O=P(D,2);Pv(O,{get character(){return x(l)}});var S=P(O,2),b=L(S);Fl(b,{children:(I,z)=>{oe(I,{padding:!0,justify:"start",children:(B,H)=>{var M=Ng(),j=K(M);dt(j,{onclick:u,children:(ee,ge)=>{xe();var _=Ze("Toggle editables");A(ee,_)},$$slots:{default:!0}});var Y=P(j,2);{var J=ee=>{dt(ee,{onclick:v,children:(ge,_)=>{xe();var ue=Ze("Save changes");A(ge,ue)},$$slots:{default:!0}})};ze(Y,ee=>{x(s)&&ee(J)})}var Z=P(Y,2);Tn(Z);var te=P(Z,2);dt(te,{onclick:d,children:(ee,ge)=>{xe();var _=Ze("Export");A(ee,_)},$$slots:{default:!0}});var re=P(te,2);Cg(re,{accept:"application/zip",onchange:f,children:(ee,ge)=>{xe();var _=Ze("Import");A(ee,_)},$$slots:{default:!0}});var le=P(re,2);dt(le,{onclick:async()=>{const ee=await Bd(r());await navigator.clipboard.writeText(ee),pi("Copied to clipboard")},children:(ee,ge)=>{xe();var _=Ze("Export to yaml");A(ee,_)},$$slots:{default:!0}});var ve=P(le,2);dt(ve,{type:"button",onclick:async()=>{const ee=n().edit;he(ut,V(n).edit=!1,V(n)),await Pi(),window.print(),he(ut,V(n).edit=ee,V(n))},children:(ee,ge)=>{xe();var _=Ze("Print");A(ee,_)},$$slots:{default:!0}});var w=P(ve,2);dt(w,{onclick:async()=>{await Kf(r().slug,x(l))},children:(ee,ge)=>{xe();var _=Ze("Load Example");A(ee,_)},$$slots:{default:!0}}),A(B,M)},$$slots:{default:!0}})}}),N(S),A(m,$)}}),N(c),pe(()=>g=Tt(c,1,"svelte-va3igi",null,g,{showEditables:!n().edit})),A(e,c),Ie(),a()}var Fg=F('<h1>No character found for slug: <code> </code></h1> <a href="/">Go back to character select</a>',1),Bg=F("<!> <!>",1);function Mg(e,t){$e(t,!0);var n,r=Ei([async()=>n=await $i(()=>Kl(t.params.slug))]),i=Bg(),a=K(i);ft(a,[r[0]],void 0,l=>{let s=Me(()=>x(n)?`${x(n).name}`:"Not Found");Di(a,{get title(){return x(s)}})});var o=P(a,2);ft(o,[r[0]],[()=>x(n)],(l,s)=>{var u=f=>{ft(f,[r[0]],void 0,v=>{zg(v,{get characterData(){return x(n)},set characterData(c){se(n,c)}})})},d=f=>{var v=Fg(),c=K(v),g=P(L(c)),k=L(g,!0);N(g),N(c);var m=P(c,2);Ci(m,y=>Ta?.(y)),pe(()=>Ye(k,t.params.slug),void 0,void 0,[r[0]]),A(f,v)};ze(l,f=>{x(s)?f(u):f(d,!1)})}),A(e,i),Ie()}function qg(e){const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("unable to get canvas");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),{canvas:t,destroy(){t.width=0,t.height=0}}}var jg=F('<label><span>Size</span> <input name="size" type="number"/></label> <label><span>Columns</span> <input name="x" type="number"/></label> <label><span>Rows</span> <input name="y" type="number"/></label> <label><span>Stroke width</span> <input name="stroke" type="number"/></label> <!>',1),Hg=F('<div class="wrapper svelte-1g22s45"><form class="svelte-1g22s45"><!></form> <!> <div class="canvas svelte-1g22s45"><!></div></div>');function Ug(e,t){$e(t,!0);let n=De(null),r=De(null),i=De(2),a=De(10),o=De(8),l=De(100),s=30;Jt(()=>{if(!x(n)||!x(r))return;x(n).width=s*2+x(a)*x(l),x(n).height=s*2+x(o)*x(l),x(r).clearRect(0,0,x(n).width,x(n).height),x(r).lineWidth=x(i);for(let y=1;y<x(a);y++){x(r).beginPath();const $=s+y*x(l);x(r).moveTo($,s),x(r).lineTo($,x(n).height-s),x(r).stroke()}for(let y=1;y<x(o);y++){x(r).beginPath();const $=s+y*x(l);x(r).moveTo(s,$),x(r).lineTo(x(n).width-s,$),x(r).stroke()}x(r).lineWidth=x(i)*1.5,x(r).beginPath(),x(r).roundRect(s,s,x(n).width-s*2,x(n).height-s*2,x(i)*5),x(r).stroke();const m=qg(x(n));x(r).filter="url(#pencil)",x(r).drawImage(m.canvas,0,0),m.destroy()});const u=m=>{m.preventDefault();const y=new FormData(m.currentTarget),$=parseInt(y.get("x")?.toString()||"")||x(a),D=parseInt(y.get("y")?.toString()||"")||x(o),O=parseInt(y.get("size")?.toString()||"")||x(l);Math.sqrt($*D*O*O)>4e3&&!confirm("The grid will be pretty large and can cause issues, are you sure?")||(se(a,$,!0),se(o,D,!0),se(l,O,!0),se(i,parseInt(y.get("stroke")?.toString()||"")||x(i),!0))};var d=Hg(),f=L(d),v=L(f);oe(v,{column:!0,children:(m,y)=>{var $=jg(),D=K($),O=P(L(D),2);N(D);var S=P(D,2),b=P(L(S),2);N(S);var I=P(S,2),z=P(L(I),2);N(I);var B=P(I,2),H=P(L(B),2);N(B);var M=P(B,2);dt(M,{type:"submit",children:(j,Y)=>{xe();var J=Ze("Generate");A(j,J)},$$slots:{default:!0}}),pe(()=>{O.defaultValue=x(l),b.defaultValue=x(a),z.defaultValue=x(o),H.defaultValue=x(i)}),A(m,$)}}),N(f);var c=P(f,2);_e(c,{vertical:!0});var g=P(c,2),k=L(g);zl(k,{get canvas(){return x(n)},set canvas(m){se(n,m,!0)},get context(){return x(r)},set context(m){se(r,m,!0)}}),N(g),N(d),Yt("submit",f,u),A(e,d),Ie()}var Vg=F("<!> <!>",1);function Yg(e){var t=Vg(),n=K(t);Di(n,{title:"Grid generator"});var r=P(n,2);Ug(r,{}),A(e,t)}const En={characterSelect:()=>"/",characterSheet:e=>`/sheet/${e}`,characterMiniSheet:e=>`/sheet/mini/${e}`,gridGenerator:()=>"/generate-grid"},Wg={[En.characterSelect()]:zd,[En.characterSheet(":slug")]:Mg,[En.characterMiniSheet(":slug")]:pd,[En.gridGenerator()]:Yg},ci=[];let vs;function hs(e){const t=e.pattern.test(vs);Co(e,e.className,t),Co(e,e.inactiveClassName,!t)}function Co(e,t,n){(t||"").split(" ").forEach(r=>{r&&(e.node.classList.remove(r),n&&e.node.classList.add(r))})}Ai.subscribe(e=>{vs=e.location+(e.querystring?"?"+e.querystring:""),ci.map(hs)});function Gg(e,t){if(t&&(typeof t=="string"||typeof t=="object"&&t instanceof RegExp)?t={path:t}:t=t||{},!t.path&&e.hasAttribute("href")&&(t.path=e.getAttribute("href"),t.path&&t.path.length>1&&t.path.charAt(0)=="#"&&(t.path=t.path.substring(1))),t.className||(t.className="active"),!t.path||typeof t.path=="string"&&(t.path.length<1||t.path.charAt(0)!="/"&&t.path.charAt(0)!="*"))throw Error('Invalid value for "path" argument');const{pattern:n}=typeof t.path=="string"?Ll(t.path):{pattern:t.path},r={node:e,className:t.className,inactiveClassName:t.inactiveClassName,pattern:n};return ci.push(r),hs(r),{destroy(){ci.splice(ci.indexOf(r),1)}}}var Qg=F("<a><!></a>");function To(e,t){$e(t,!0);const n=()=>qe(ut,"$appSettings",r),[r,i]=it(),a=Me(()=>n().hasChanges);function o(u){u.preventDefault(),(!x(a)||window.confirm("There are unsaved changed, these will get lost if you continue"))&&tf(t.href)}var l=Qg();l.__click=o;var s=L(l);ht(s,()=>t.children??Re),N(l),Ci(l,u=>Gg?.(u)),pe(()=>tn(l,"href",t.href)),A(e,l),Ie(),i()}At(["click"]);var Xg=F('<header class="hide-print svelte-a8kxe2"><div class="inner svelte-a8kxe2"><h1><!></h1> <nav class="svelte-a8kxe2"></nav></div> <!></header>');function Kg(e,t){$e(t,!1);const n=[{href:En.characterSelect(),label:"Character select"},{href:En.gridGenerator(),label:"Grid generator"}];Cl();var r=Xg(),i=L(r),a=L(i),o=L(a);{let u=Ii(()=>En.characterSelect());To(o,{get href(){return x(u)},children:(d,f)=>{xe();var v=Ze("D&D Character Sheet creator");A(d,v)},$$slots:{default:!0}})}N(a);var l=P(a,2);Wt(l,5,()=>n,mn,(u,d)=>{let f=()=>x(d).href,v=()=>x(d).label;To(u,{get href(){return f()},children:(c,g)=>{xe();var k=Ze();pe(()=>Ye(k,v())),A(c,k)},$$slots:{default:!0}})}),N(l),N(i);var s=P(i,2);_e(s,{}),N(r),A(e,r),Ie()}var Zg=F("<!> <!> <!>",1),Jg=F('<!> <main class="svelte-1n46o8q"><!></main>',1);function em(e){var t=Jg(),n=K(t);ef(n);var r=P(n,2),i=L(r);Dc(i,{children:(a,o)=>{var l=Zg(),s=K(l);Kg(s,{});var u=P(s,2);af(u,{get routes(){return Wg}});var d=P(u,2);Zc(d),A(a,l)}}),N(r),A(e,t)}const tm=document.getElementById("app");Ku(em,{target:tm});
